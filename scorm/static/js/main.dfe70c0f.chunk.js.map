{"version":3,"sources":["components/CoursePlayer/Audio/Audio.module.scss","components/CoursePlayer/Main/Main.module.scss","components/CoursePlayer/Content/Slide/Slide.module.scss","components/CoursePlayer/Content/Youtube/Youtube.module.scss","components/CoursePlayer/Content/Quiz/Question/FillInTheBlanks/FillInTheBlanks.module.scss","components/CoursePlayer/Content/Video/Video.module.scss","components/CoursePlayer/Content/Game/Game.module.scss","components/CoursePlayer/UI/Spinner/Spinner.module.scss","components/CoursePlayer/Menu/VideoPlayback/VideoPlayback.module.scss","components/CoursePlayer/UI/Icon/Icon.js","components/CoursePlayer/Header/Header.js","components/CoursePlayer/context/Label/LabelContext.tsx","components/CoursePlayer/context/Label/useLabel.tsx","components/CoursePlayer/context/Label/Label.tsx","components/CoursePlayer/UI/Progress/Progress.js","components/CoursePlayer/UI/Button/Button.js","components/CoursePlayer/Audio/Audio.js","components/CoursePlayer/context/UI/UIContext.tsx","components/CoursePlayer/NavFooter/NavFooter.js","components/CoursePlayer/Content/Slide/PlaceholderSlide.js","components/CoursePlayer/Content/Slide/Slide.js","components/CoursePlayer/Content/Youtube/Youtube.js","components/CoursePlayer/UI/ContainerPage/ContainerPage.js","components/CoursePlayer/UI/Feedback/Feedback.js","components/CoursePlayer/Form/Radio/Radio.js","components/CoursePlayer/Content/Quiz/Question/MultipleChoice/MultipleChoice.tsx","components/CoursePlayer/Content/Quiz/Question/Essay/Essay.tsx","components/CoursePlayer/Content/Quiz/Question/FillInTheBlanks/Sentence.tsx","components/CoursePlayer/Content/Quiz/Question/FillInTheBlanks/FillInTheBlanks.tsx","components/CoursePlayer/Content/Quiz/Question/Matching/DraggableItem.tsx","components/CoursePlayer/Content/Quiz/Question/Matching/DroppableArea.tsx","components/CoursePlayer/Content/Quiz/Question/Matching/Matching.tsx","components/CoursePlayer/Content/Quiz/Question/Matching/MatchingWrapper.tsx","components/CoursePlayer/Content/Quiz/Question/Question.js","components/CoursePlayer/hooks/usePrevious.js","components/CoursePlayer/utils/utils.js","components/CoursePlayer/Content/Quiz/Quiz.js","components/CoursePlayer/Content/Video/Video.js","components/CoursePlayer/utils/messenger.js","components/CoursePlayer/UI/Spinner/Spinner.js","components/CoursePlayer/Content/Game/Game.js","components/CoursePlayer/Main/Main.js","components/CoursePlayer/Menu/MenuItem/MenuItem.js","components/CoursePlayer/Menu/VideoPlayback/VideoPlayback.js","components/CoursePlayer/constants/version.js","components/CoursePlayer/Menu/Menu.js","components/CoursePlayer/UI/OutsiderAlerter/OutsiderAlerter.js","components/CoursePlayer/hooks/useScorm.js","components/CoursePlayer/hooks/useGlobal.js","components/CoursePlayer/Preloader/Preloader.tsx","components/CoursePlayer/CoursePlayer.js","App.tsx","reportWebVitals.ts","index.tsx","components/CoursePlayer/Content/Quiz/Quiz.module.scss","components/CoursePlayer/Content/Quiz/Question/Matching/DroppableArea.module.scss","components/CoursePlayer/NavFooter/NavFooter.module.scss","components/CoursePlayer/Content/Quiz/Question/Matching/DraggableItem.module.scss","components/CoursePlayer/Menu/MenuItem/MenuItem.module.scss","components/CoursePlayer/Header/Header.module.scss","components/CoursePlayer/UI/Feedback/Feedback.module.scss","components/CoursePlayer/Content/Quiz/Question/Question.module.scss","components/CoursePlayer/Content/Quiz/Question/FillInTheBlanks/Sentence.module.scss","components/CoursePlayer/CoursePlayer.module.scss","components/CoursePlayer/UI/Progress/Progress.module.scss","components/CoursePlayer/UI/Button/Button.module.scss","components/CoursePlayer/UI/ContainerPage/ContainerPage.module.scss","components/CoursePlayer/Form/Radio/Radio.module.scss","components/CoursePlayer/Content/Quiz/Question/Essay/Essay.module.scss","components/CoursePlayer/Menu/Menu.module.scss","components/CoursePlayer/context/Label/Label.module.scss","components/CoursePlayer/UI/Icon/Icon.module.scss","components/CoursePlayer/Content/Slide/PlaceholderSlide.module.scss","components/CoursePlayer/Content/Quiz/Question/MultipleChoice/MultipleChoice.module.scss","components/CoursePlayer/Content/Quiz/Question/Matching/Matching.module.scss"],"names":["module","exports","Icon","icon","className","onClick","library","add","faCoffee","faBars","faCheckCircle","faCircle","faTimesCircle","faVideo","faEdit","faTrash","faTrashAlt","styles","Icon__clickable","Header","globalState","toggleMenu","getColorScheme","course","primary","style","backgroundColor","Header__left","Header__icon","Header__title","name","Header__right","Header__logo","backgroundImage","logo","baseURL","initialState","labels","initialLabels","wildcards","config","defaultLanguage","language","undefined","languages","editing","editMode","untrackedLabels","setLanguage","toggleEditMode","addUntrackedLabel","labelReducer","state","action","type","payload","updatedLabels","_","cloneDeep","forEach","keys","key","get","includes","Error","set","err","console","error","browserLanguage","window","navigator","text","LabelContext","createContext","LabelProvider","props","useReducer","dispatch","useEffect","onLanguageChanged","isEmpty","setLabels","setWildcards","customLabels","appendLabels","Provider","value","children","useLabel","useContextSelector","c","label","options","getLabelKey","additionalWildcards","hasWildcards","allWildcards","wildcardsFound","wildcard","push","replace","getWildcards","replaceWildcards","ReactHtmlParser","getLabel","replaceAll","search","split","join","sanitizeKey","slugify","jsxToString","jsx","map","Array","isArray","el","typeToTag","propsToAttr","filter","tags","plainLabel","_label","Label","isLabelUntracked","hasLabel","isLabelTrackedInContext","_className","Label__highlighted","Label__highlighted__tracked","Label__highlighted__tracked__in__context","e","stopPropagation","preventDefault","memo","Progress","percent","showText","color","height","useSpring","width","from","Progress__bar__bg","div","Progress__bar__fg","Progress__text","Button","secondary","disabled","onMount","colorScheme","borderColor","buttonRef","useRef","current","ref","Audio","url","useState","forceRender","setForceRender","controls","autoPlay","controlsList","src","extname","background","blinkNext","setBackground","clearBackground","startBlinkNext","stopBlinkNext","uiReducer","UIContext","UIProvider","NavFooter","goNextPage","goPrevPage","getCoursePercentage","getCurrentPage","getTracking","isInFirstPage","isInLastPage","isNavigationModeFree","currentPage","pageTracking","resourceId","hasAudio","audio","NavFooter__progress","NavFooter__audio","NavFooter__navbuttons","NavFooter__button","NavFooter__nextButton","NavFooter__button__blink","completed","PlaceholderSlide","PlaceholderSlide__activity","Slide","filename","hyperlink","onPageCompleted","loaded","setLoaded","cursor","open","display","onLoad","onError","Youtube","settings","disableSeek","pageCompleted","opts","playerVars","autoplay","iv_load_policy","playsinline","rel","showinfo","disablekb","containerClassName","videoId","match","length","getYoutubeVideoId","onEnd","ContainerPage","title","ContainerPage__container","ContainerPage__title","borderBottomColor","ContainerPage__body","Feedback","correct","incorrect","Feedback__type","Feedback__icon","Feedback__text","Radio","id","checked","onChange","showAnswer","htmlFor","MultipleChoice","question","tracking","showCorrectAnswer","showYourAnswers","answer","submitted","allowMultipleAnswer","choices","handleChange","target","questionId","choice","toString","MultipleChoice__radio","Essay","answeredCorrectly","Essay__correct","Essay__incorrect","placeholder","rows","maxLength","defaultValue","acceptableResponses","exactResponse","r","Sentence","sentence","blanks","getValues","register","preview","Blank","idx","expectedResponse","userAnswer","filledCorrectly","toLowerCase","autoComplete","minWidth","correctAnswer","_sentence","blank","startsWithBlank","substr","endsWithBlank","textBlocks","a","block","sentenceWithBlanks","textBlock","i","isLastTextBlock","FillInTheBlanks","useForm","defaultValues","watch","typeHere","useMemo","subscription","unsubscribe","DraggableItem","draggableId","draggableText","index","cannotDrag","isDraggingOver","minHeight","mountData","setMountData","getClassName","snapshot","item","itemWithArrow","isDragging","itemIsDragging","itemIsDraggingOver","itemIsCorrect","itemIsIncorrect","itemWrapper","clientHeight","isDragDisabled","provided","innerRef","draggableProps","dragHandleProps","faGripVertical","flex","textAlign","DroppableArea","droppableId","droppableText","handleRef","direction","dropzone","dropzoneIsDragging","draggingOverWith","draggingFromThisWith","droppableTextWrapper","droppableTextWrapperWithArrow","droppableTextWrapperNoLeftBorder","droppableTextWrapperCorrect","droppableTextWrapperIncorrect","Matching","matchingItems","matchingResponse","showFeedback","sameHeight","items","setItems","response","setResponse","changeDataPayload","setChangeDataPayload","setMinHeight","touched","setTouched","checkResponse","onlyIdFromDroppableId","onlyIdFromDraggableId","matchIds","textThatMatchesWithThisDraggagle","find","renderDroppables","ordered","orderBy","merged","responseDraggableId","filtered","isResponseCorrect","data","prevMinHeight","initialItems","order","size","shuffle","draggable","droppable","maxResponses","correctResponses","updatedChangeDataPayload","score","prevState","isEqual","onDragEnd","result","destination","source","updatedResponse","prevUpdatedResponse","warn","onDragStart","left","right","MatchingWrapper","marginTop","Question","cur","max","hasQuizBackground","showAllQuestionsInPage","renderedQuestionType","resourceType","Question__counter","textImage","image","Question__image","Question__question","feedback","whenCorrect","whenIncorrect","Question__feedback","usePrevious","getWindowPosition","w","d","document","documentElement","body","getElementsByTagName","innerWidth","clientWidth","innerHeight","scrollTop","scrollLeft","scrollWidth","scrollHeight","cleanedObject","obj","Object","firestore","isReferenceField","Quiz","quiz","questions","curQuestion","setCurQuestion","reviewMode","setReviewMode","maxQuestion","initOrder","randomizeQuestions","setOrder","allowRetryWhenFailed","passingScore","patchTracking","clearTracking","onPageStarted","setCourseScore","setCourseFailed","setCoursePassed","courseCompleted","handleError","player","quizStarted","started","prevCourseCompleted","randomize","inOrder","handleRetry","newOrder","onQuestionAddOrRemove","totalAnsweredCorrectly","totalAnsweredIncorrectly","Math","round","totalAnswered","calculateQuizResult","hasPassed","isNaN","anyChoiceTouched","handleNextQuestion","getAllQuestionsInPage","_questions","o","canGoNextQuestion","isQuestionsSubmitted","q","canRetry","handleButtonOnMount","scrollIntoView","setTimeout","behavior","scrollIntoViewSmooth","Quiz__intro","renderIntro","Quiz__question__component","renderQuestions","Quiz__result","Quiz__result__detail","Quiz__result__passingScore","Quiz__result__passingScore__passed","Quiz__result__passingScore__failed","Quiz__result__passingScore__icon","renderResult","Quiz__footer","allQuestionsAnswered","canSubmit","sortBy","responseMatched","lowerCase","allBlanksAnsweredCorrectly","Video","random","setRandom","reloading","setReloading","videoRef","supposedCurrentTime","ceil","onEnded","onContextMenu","onTimeUpdate","seeking","currentTime","onSeeking","receiver","messengerEvent","addOnReceiveMessage","message","execFunction","onReceiveMessage","event","JSON","parse","_receivedData","_message","_param","param","executeMessage","theMessage","sendMessage","sourceWindow","_data","postMessage","stringify","origin","Spinner","Spinner__container","loading","Game","game","iframeRef","dataRef","addEventListener","messenger","frameWindow","contentWindow","_json","encoded","encodeURIComponent","encodeIt","log","removeEventListener","process","frameBorder","Game__iframe","Main","page","isChangingPage","setIsChangingPage","timeout","clearTimeout","backgroundOpacity","opacity","video","youtubeUrl","renderPage","MenuItem","active","borderLeftColor","MenuItem__icon","MenuItem__label","MenuItem__completed","VideoPlayback","videoMetadata","pageResourceId","setError","VERSION","version","Menu","getPages","goPage","pages","getIcon","facevideo","showMenu","Menu__title","Menu__list","_trackingPrevPage","_tracking","Menu__bottom","OutsideAlerter","setWrapperRef","bind","handleClickOutside","this","node","wrapperRef","ReactDOM","findDOMNode","onClickOutside","contains","childElement","React","Children","only","cloneElement","Component","useScorm","previous","setPrevious","Promise","resolve","reject","scormData","initializeScorm","lastError","curRetry","interval","setInterval","clearInterval","getAPIHandle","loadPage","lessonLocation","doLMSGetValue","suspendData","lessonStatus","scoreRaw","unloadPage","setLessonStatus","doLMSSetValue","commit","doLMSCommit","setupScormScripts","onLoadPromises","file","script","createElement","async","onload","appendChild","all","then","res","catch","initializeScormAsync","setCompleted","setPassed","setFailed","setLessonLocation","setSuspendData","compress","getSuspendData","decompress","setScore","useGlobal","localLanguage","debouncedSetSuspendData","maxPage","curPage","updatedState","saveTrackingAsSuspendData","updatedState2","messages","scormReady","disableScorm","useCallback","cancel","debounce","getPagesCompleted","pagesCompleted","isCourseCompleted","onCourseCompleted","toast","success","navigationMode","initCourseData","restoreTracking","setMessageCourseCompleted","callback","wasCompletedBefore","onPageChanged","setDisableScorm","disable","setScormReady","ready","setEditMode","setLocalLanguage","l","Preloader","stack","setStack","initialStack","pageIdx","filteredStack","s","Media","CoursePlayer","prevCurrentPage","lastVisitedPage","confirm","doInitializeScorm","transition","CoursePlayer__menu","renderMenu","CoursePlayer__main","App","setCourse","isFetching","setIsFetching","axios","fetchCourse","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","getElementById"],"mappings":"2HACAA,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,OAAS,wB,oBCAxDD,EAAOC,QAAU,CAAC,KAAO,qB,oBCAzBD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,OAAS,wB,oBCAxDD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,OAAS,0B,oBCA9DD,EAAOC,QAAU,CAAC,gBAAkB,yCAAyC,OAAS,kC,oBCAtFD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,OAAS,wB,oBCAxDD,EAAOC,QAAU,CAAC,KAAO,mBAAmB,OAAS,qBAAqB,aAAe,6B,oBCAzFD,EAAOC,QAAU,CAAC,mBAAqB,sC,oBCAvCD,EAAOC,QAAU,CAAC,cAAgB,qCAAqC,OAAS,gC,q/DC8CjEC,MA9Bf,YAAkD,IAAlCC,EAAiC,EAAjCA,KAAiC,IAA3BC,iBAA2B,MAAf,GAAe,EAAXC,EAAW,EAAXA,QAkBpC,OAjBAC,IAAQC,IACNC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAJ,KAQA,qBACER,UAAS,UAAKa,IAAOf,KAAZ,YACPG,EAAUY,IAAOC,gBAAkB,GAD5B,YAELd,GACJC,QATJ,WACEA,GAAWA,KAIX,SAME,cAAC,IAAD,CAAiBF,KAAMA,OCTdgB,MA5Bf,YAAkC,IAAD,IAAfC,EAAe,EAAfA,YACRC,EAAuCD,EAAvCC,WAAYC,EAA2BF,EAA3BE,eAAgBC,EAAWH,EAAXG,OAC5BC,EAAYF,IAAZE,QAER,OACE,sBAAKpB,UAAWa,IAAOE,OAAQM,MAAO,CAAEC,gBAAiBF,GAAzD,UACE,sBAAKpB,UAAWa,IAAOU,aAAvB,UACE,cAAC,EAAD,CACExB,KAAK,OACLE,QAASgB,EACTjB,UAAWa,IAAOW,eAEpB,sBAAMxB,UAAWa,IAAOY,cAAxB,gBAAwCN,QAAxC,IAAwCA,OAAxC,EAAwCA,EAAQO,UAElD,qBAAK1B,UAAWa,IAAOc,cAAvB,SACE,qBACE3B,UAAWa,IAAOe,aAClBP,MAAO,CACLQ,iBAAuB,OAANV,QAAM,IAANA,GAAA,UAAAA,EAAQW,YAAR,eAAcJ,MAAd,eACLP,EAAOY,QADF,mBACaZ,QADb,IACaA,GADb,UACaA,EAAQW,YADrB,aACa,EAAcJ,KAD3B,MAEb,c,iEClBVM,EAA4B,CAChCC,OAAQ,GACRC,cAAe,GACfC,UAAW,GACXC,OAAQ,CACNC,gBAAiB,QACjBC,cAAUC,EACVC,UAAW,CAAC,QAAS,QAAS,UAEhCC,QAAS,CACPC,UAAU,EACVC,gBAAiB,IAEnBC,YAAa,aACbC,eAAgB,aAChBC,kBAAmB,cAkCrB,SAASC,EAAaC,EAAoBC,GAAoC,IAAD,MAC3E,OAAQA,EAAOC,MACb,IAAK,aACH,OAAO,2BACFF,GADL,IAEEf,OAAQgB,EAAOE,QACfjB,cAAee,EAAOE,UAE1B,IAAK,gBACH,IAAIC,EAAgBC,IAAEC,UAAUN,EAAMd,eAEtC,IACEmB,IAAEE,QAAQF,IAAEG,KAAKP,EAAOE,UAAU,SAACM,GACjCJ,IAAEE,QAAQF,IAAEG,KAAKH,IAAEK,IAAIT,EAAOE,QAASM,KAAO,SAACnB,GAC7C,IAAKe,IAAEM,SAASX,EAAMZ,OAAOI,UAAWF,GACtC,MAAM,IAAIsB,MAAJ,4BAA+BtB,IACvCe,IAAEQ,IACAT,EADF,UAEKK,EAFL,YAEYnB,GACVe,IAAEK,IAAIT,EAAOE,QAAb,UAAyBM,EAAzB,YAAgCnB,WAItC,MAAOwB,GACPC,QAAQC,MAAMF,GAGhB,OAAO,2BACFd,GADL,IAEEf,OAAQmB,IAEZ,IAAK,eACH,OAAO,2BACFJ,GADL,IAEEf,OAAQe,EAAMd,gBAElB,IAAK,gBACH,OAAO,2BACFc,GADL,IAEEb,UAAWc,EAAOE,UAEtB,IAAK,eACH,OAAO,2BACFH,GADL,IAEEZ,OAAO,2BACFY,EAAMZ,QADL,IAEJE,SAAUW,EAAOE,YAGvB,IAAK,gBACH,OAAO,2BACFH,GADL,IAEEZ,OAAO,2BACFY,EAAMZ,QADL,IAEJI,UAAWS,EAAOE,YAGxB,IAAK,kBACH,IAAMc,EAAe,UAAGC,cAAH,iBAAG,EAAQC,iBAAX,aAAG,EAAmB7B,SAE3C,OAAO,2BACFU,GADL,IAEEZ,OAAO,2BACFY,EAAMZ,QADL,IAGJE,SAAUe,IAAEM,SAASX,EAAMZ,OAAOI,UAAWyB,GACzCA,EACAjB,EAAMZ,OAAOC,oBAGvB,IAAK,mBACH,OAAO,2BACFW,GADL,IAEEP,QAAQ,2BACHO,EAAMP,SADJ,IAELC,UAAWM,EAAMP,QAAQC,aAG/B,IAAK,sBACH,MAAsBO,EAAOE,QAArBM,EAAR,EAAQA,IAAKW,EAAb,EAAaA,KACb,OAAO,2BACFpB,GADL,IAEEP,QAAQ,2BACHO,EAAMP,SADJ,IAELE,gBAAgB,2BACXK,EAAMP,QAAQE,iBADJ,kBAEZc,GAFY,mBAGVT,EAAMZ,OAAOI,UAAU,GAAK4B,GAHlB,cAIVpB,EAAMZ,OAAOI,UAAU,GAAK,MAJlB,cAKVQ,EAAMZ,OAAOI,UAAU,GAAK,MALlB,SAUrB,QACE,OAAOQ,GAIN,IAAMqB,EAAeC,YAActC,GAE3B,SAASuC,EAAcC,GASpC,MAA0BC,qBAAW1B,EAAcf,GAAnD,mBAAOgB,EAAP,KAAc0B,EAAd,KA+BA,SAAS9B,EAAYN,GACnBoC,EAAS,CACPxB,KAAM,eACNC,QAASb,IA6Db,OA/BAqC,qBAAU,YACPH,EAAMlC,UAnBPoC,EAAS,CACPxB,KAAM,sBAmBP,IAEHyB,qBAAU,WACJH,EAAMlC,WACRM,EAAY4B,EAAMlC,UAClBkC,EAAMI,mBAAqBJ,EAAMI,kBAAkBJ,EAAMlC,aAE1D,CAACkC,EAAMlC,WAEVqC,qBAAU,WArCV,IAAsBnC,EAsCpBgC,EAAMhC,YAtCcA,EAsCYgC,EAAMhC,UArCtCkC,EAAS,CACPxB,KAAM,gBACNC,QAASX,OAoCV,CAACgC,EAAMhC,YAEVmC,qBAAU,YACPtB,IAAEwB,QAAQL,EAAMvC,SA5EnB,WACEyC,EAAS,CACPxB,KAAM,aACNC,QAHsC,uDAAd,KA4EE2B,CAAUN,EAAMvC,UAC3C,CAACuC,EAAMvC,SAEV0C,qBAAU,YACPtB,IAAEwB,QAAQL,EAAMrC,YA5DnB,WACEuC,EAAS,CACPxB,KAAM,gBACNC,QAH4C,uDAAd,KA4DD4B,CAAaP,EAAMrC,aACjD,CAACqC,EAAMrC,YAEVwC,qBAAU,WACHtB,IAAEwB,QAAQL,EAAMQ,cArErBN,EAAS,CACPxB,KAAM,iBATV,WACEwB,EAAS,CACPxB,KAAM,gBACNC,QAHyC,uDAAd,KA8E3B8B,CAAaT,EAAMQ,gBAIpB,CAACR,EAAMQ,eAGR,cAACX,EAAaa,SAAd,CACEC,MAAK,2BACAnC,GADA,IAEHJ,cACAE,kBA3CN,SAA2BW,EAAaW,GACtCM,EAAS,CACPxB,KAAM,sBACNC,QAAS,CAAEM,MAAKW,WAyCdvB,eAlDN,WACE6B,EAAS,CACPxB,KAAM,wBA2CR,SAQGsB,EAAMY,W,wCCrIEC,MAjIf,WACE,MAAsCC,YACpCjB,GACA,SAACkB,GAAD,OAAOA,KAFDnD,EAAR,EAAQA,OAAQH,EAAhB,EAAgBA,OAAQE,EAAxB,EAAwBA,UASxB,SAASqD,EAAMpB,EAA0BqB,GACvC,OAQF,SAAkBrB,EAA0BqB,GAC1C,IAGID,EAHEnD,EAAkBD,EAAOE,UAAYF,EAAOC,gBAC5CoB,EAAMiC,EAAYtB,GAGxB,IASEoB,EAyCJ,SAA0BpB,EAAcqB,GACtC,MAAqCA,EAA7BE,2BAAR,MAA8B,GAA9B,EACA,IASF,SAAsBvB,GACpB,OAAOf,IAAEM,SAASS,EAAM,MAVnBwB,CAAaxB,GAAO,OAAOA,EAChC,IAAMyB,EAAoB,2BAAQ1D,GAAcwD,GAC1CG,EAWR,SAAsB1B,GAAkC,IACtD,GADqD,uDAAJ,IACzCuB,2BAAR,MAA8B,GAA9B,EACME,EAAY,2BAAQ1D,GAAcwD,GAClCG,EAA2B,GAOjC,OANAzC,IAAEE,QAAQF,IAAEG,KAAKqC,IAAe,SAACE,GAC/B,KAAO1C,IAAEM,SAASS,EAAM2B,IACtBD,EAAeE,KAAKD,GACpB3B,EAAOf,IAAE4C,QAAQ7B,EAAM2B,EAAU,OAG9BD,EArBgBI,CAAa9B,EAAM,CAAEuB,wBAI5C,OAHAtC,IAAEE,QAAQuC,GAAgB,SAACC,GACzB3B,EAAOf,IAAE4C,QAAQ7B,EAAM2B,EAAU1C,IAAEK,IAAImC,EAAcE,OAEhD3B,EAjDG+B,CANRX,EACEnC,IAAEK,IAAIzB,EAAN,UAAiBwB,EAAjB,YAAwBpB,KAExBJ,EAAOwB,GAAKpB,GAGkB,CAC9BsD,oBAAmB,OAAEF,QAAF,IAAEA,OAAF,EAAEA,EAASE,sBAEhC,MAAO7B,IACT,OAAS0B,EAAQY,IAAgBZ,GAASA,EA1BnCa,CAASjC,EAAMqB,IAAYrB,EA6BpC,SAASsB,EAAYtB,GACnB,SAASkC,EAAWlC,EAAcmC,EAAgBN,GAChD,OAAO7B,EAAKoC,MAAMD,GAAQE,KAAKR,GAGjC,SAASS,EAAYtC,GAWnB,OAPAA,EAAOA,EAAK6B,QAAQ,kBAAmB,IAEvC7B,EAAOkC,EADPlC,EAAOuC,IAAQvC,EAHC,IAIQ,IAAK,IAC7BA,EAAOkC,EAAWlC,EAAM,IAAK,KAC7BA,EAAOkC,EAAWlC,EAAM,IAAK,KAC7BA,EAAOkC,EAAWlC,EAAM,IAAK,KAC7BA,EAAOkC,EAAWlC,EAAM,IAAK,KAI/B,IAEE,OAAOsC,EAAYtC,GACnB,MAAON,GAEP,IAEE,OAAO4C,EADaE,EAAYxC,IAEhC,MAAON,GAEP,OAAOM,IAiCb,SAASwC,EAAYC,GACnB,IAQE,OAPexD,IAAEyD,IAAIC,MAAMC,QAAQH,GAAOA,EAAM,CAACA,IAAM,SAACI,GAAQ,IAAD,EAC7D,OAAS,OAAFA,QAAE,IAAFA,OAAA,EAAAA,EAAI/D,QAAJ,OAAY+D,QAAZ,IAAYA,GAAZ,UAAYA,EAAIzC,aAAhB,aAAY,EAAWY,UAAvB,WACC8B,EAAUD,EAAG/D,KAAJ,OAAU+D,QAAV,IAAUA,OAAV,EAAUA,EAAIzC,OADxB,YACkCoC,EACnCK,EAAGzC,MAAMY,UAFR,aAGG8B,EAAUD,EAAG/D,MAHhB,KAIH+D,KAEQR,KAAK,IACnB,MAAO3C,GACP,MAAMA,EAGR,SAASoD,EAAUhE,GAAgC,IAArBsB,EAAoB,uDAAJ,GAC5C,SAAS2C,EAAY3C,GACnB,IAAMhB,EAAOH,IAAE+D,OAAO/D,IAAEG,KAAKgB,IAAQ,SAACf,GAAD,MAAiB,aAARA,KAC9C,OAAOJ,IAAEyD,IAAItD,GAAM,SAACC,GAAD,gBAAYA,EAAZ,aAAoBe,EAAMf,GAA1B,QAAmCgD,KAAK,KAE7D,IAAMY,EAAO,CAAC,OAAQ,SAAU,MAAO,KACvC,OAAOA,EAAK1D,SAAST,GAAd,UAAyBA,EAAzB,YAAiCiE,EAAY3C,IAAW,IAInE,MAAO,CAAEgB,QAAO8B,WAhHhB,SAAoBlD,EAA0BqB,GAC5C,IAAM8B,EAAS/B,EAAMpB,EAAMqB,GAC3B,OAAOsB,MAAMC,QAAQO,GAAUA,EAAOd,KAAK,IAAMc,GA8GvB7B,cAAakB,gBC9H3C,SAASY,EAAMhD,GACb,MAA+Cc,YAC7CjB,GACA,SAACkB,GAAD,OAAOA,KAFDtD,EAAR,EAAQA,OAAQQ,EAAhB,EAAgBA,QAASK,EAAzB,EAAyBA,kBAIzB,EAA4CuC,IAApCG,EAAR,EAAQA,MAAOE,EAAf,EAAeA,YAAakB,EAA5B,EAA4BA,YACpBlE,EAA8BD,EAA9BC,SAAUC,EAAoBF,EAApBE,gBAOlB,IAAM4E,EACJ/B,EAAMhB,EAAMY,SAAU,CAAEO,oBAAqBnB,EAAMrC,aACnDqC,EAAMY,SAER,IAAK1C,EAAU,OAAO6E,GAAU,KAEhC,IAAME,EAAmB/E,IAXzB,SAAkB0B,GAChB,IAAMX,EAAMiC,EAAYtB,GACxB,QAASf,IAAEK,IAAIzB,EAAN,UAAiBwB,IASUiE,CAASlD,EAAMY,UAC/CuC,EAA0BtE,IAAEK,IAChCf,EACA+C,EAAYlB,EAAMY,WAGdwC,EAAa,CAAC/G,IAAOgH,oBAY3B,OAXCJ,GAAoBG,EAAW5B,KAAKnF,IAAOiH,6BAC5CH,GACEC,EAAW5B,KAAKnF,IAAOkH,0CAUvB,sBAAM/H,UAAW4H,EAAWnB,KAAK,KAAMxG,QARzC,SAAqB+H,GACdP,IACLO,EAAEC,kBACFD,EAAEE,iBACFpF,EAAkB4C,EAAYlB,EAAMY,UAAWwB,EAAYpC,EAAMY,aAIjE,SACGmC,IAKQY,qBAAKX,G,iBCbLY,MAjCf,YAMI,IALFC,EAKC,EALDA,QACAC,EAIC,EAJDA,SAIC,IAHDC,aAGC,MAHO,UAGP,MAFDC,cAEC,MAFQ,MAER,EADDxI,EACC,EADDA,UAEMwE,EAAQiE,oBAAU,CACtBC,MAAM,GAAD,OAAKL,EAAL,KACL/G,gBAAiBiH,EACjBI,KAAM,CAAED,MAAO,QAGXd,EAAa,CAAC/G,IAAOuH,UAG3B,OAFApI,GAAa4H,EAAW5B,KAAKhG,GAG3B,sBAAKA,UAAW4H,EAAWnB,KAAK,KAAhC,UACE,qBACEzG,UAAWa,IAAO+H,kBAClBvH,MAAO,CAAEC,gBAAgB,GAAD,OAAKiH,EAAL,MAAgBC,UAF1C,SAIE,cAAC,WAASK,IAAV,CAAc7I,UAAWa,IAAOiI,kBAAmBzH,MAAOmD,MAE3D8D,GACC,sBAAKtI,UAAWa,IAAOkI,eAAgB1H,MAAO,CAAEkH,SAAhD,UACGF,EADH,KACa,cAAC,EAAD,+B,iBCqBNW,MAjDf,YASI,IARF5D,EAQC,EARDA,SACAnF,EAOC,EAPDA,QACAmB,EAMC,EANDA,QACA6H,EAKC,EALDA,UACAC,EAIC,EAJDA,SACAlJ,EAGC,EAHDA,UACAgB,EAEC,EAFDA,YACAmI,EACC,EADDA,QAEMC,EAAcpI,EAAYE,iBAE1B0G,EAAa,CAAC/G,IAAOmI,QAC3B5H,GAAWwG,EAAW5B,KAAKnF,IAAO,cAClCoI,GAAarB,EAAW5B,KAAKnF,IAAO,gBACpCqI,GAAYtB,EAAW5B,KAAKnF,IAAO,eACnCb,GAAa4H,EAAW5B,KAAKhG,GAE7B,IAAIqB,EAAQ,IACP6H,GAAY9H,IACfC,EAAK,2BAAQA,GAAR,IAAeC,gBAAiB8H,EAAYhI,YAC9C8H,GAAYD,IACf5H,EAAK,2BACAA,GADA,IAEHkH,MAAOa,EAAYhI,QACnBiI,YAAaD,EAAYhI,WAO7B,IAAMkI,EAAYC,mBAKlB,OAJA5E,qBAAU,WACRwE,GAAWA,EAAQG,EAAUE,WAC5B,IAGD,qBACEC,IAAKH,EACLtJ,UAAW4H,EAAWnB,KAAK,KAC3BpF,MAAOA,EACPpB,QAdJ,WACEA,IAAYiJ,GAAYjJ,KASxB,SAMGmF,K,6BCrBQsE,OArBf,YAAyB,IAARC,EAAO,EAAPA,IACf,EAAsCC,oBAAS,GAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KAUA,OARAnF,qBAAU,WACRmF,GAAe,KACd,CAACH,IAEJhF,qBAAU,WACRkF,GAAeC,GAAe,KAC7B,CAACD,IAEAA,EAAoB,KAGtB,wBAAOE,UAAQ,EAACC,UAAQ,EAACC,aAAa,aAAajK,UAAWa,KAAO6I,MAArE,UACE,wBAAQQ,IAAKP,EAAKzG,KAAI,gBAAW+C,kBAAQkE,kBAAQR,GAAM,IAAK,OAD9D,uDCdE3H,GAAyB,CAC7BoI,WAAY,GACZC,WAAW,EACXC,cAAe,aACfC,gBAAiB,aACjBC,eAAgB,aAChBC,cAAe,cA4BjB,SAASC,GAAU1H,EAAiBC,GAClC,OAAQA,EAAOC,MACb,IAAK,iBACH,OAAO,2BACFF,GADL,IAEEoH,WAAYnH,EAAOE,UAEvB,IAAK,mBACH,OAAO,2BACFH,GADL,IAEEoH,WAAY,KAEhB,IAAK,mBACH,OAAO,2BACFpH,GADL,IAEEqH,WAAW,IAEf,IAAK,kBACH,OAAO,2BACFrH,GADL,IAEEqH,WAAW,IAEf,QACE,OAAOrH,GAIN,IAAM2H,GAAYrG,YAActC,IAExB,SAAS4I,GAAWpG,GACjC,MAA0BC,qBAAWiG,GAAW1I,IAAhD,mBAAOgB,EAAP,KAAc0B,EAAd,KA6BA,OACE,cAACiG,GAAUzF,SAAX,CACEC,MAAK,2BACAnC,GADA,IAEHsH,cA7BN,WAAwD,IAAjCF,EAAgC,uDAAnB,GAClC1F,EAAS,CACPxB,KAAM,iBACNC,QAASiH,KA2BPG,gBAvBN,WACE7F,EAAS,CACPxB,KAAM,sBAsBJsH,eAlBN,WACE9F,EAAS,CACPxB,KAAM,sBAiBJuH,cAbN,WACE/F,EAAS,CACPxB,KAAM,uBAKR,SASGsB,EAAMY,WC9BEyF,OApEf,YAAqC,IAAD,EAAf7J,EAAe,EAAfA,YAEjB8J,EAUE9J,EAVF8J,WACAC,EASE/J,EATF+J,WACA7J,EAQEF,EARFE,eACA8J,EAOEhK,EAPFgK,oBACAC,EAMEjK,EANFiK,eACA9J,EAKEH,EALFG,OACA+J,EAIElK,EAJFkK,YACAC,EAGEnK,EAHFmK,cACAC,EAEEpK,EAFFoK,aACAC,EACErK,EADFqK,qBAEMjK,EAAYF,IAAZE,QACFkK,EAAcL,IACdM,EAAeL,EAAYI,EAAYE,YACvCf,EAAgBnF,YAAmBqF,IAAW,SAACpF,GAAD,OAAOA,EAAEkF,iBACvDJ,EAAY/E,YAAmBqF,IAAW,SAACpF,GAAD,OAAOA,EAAE8E,aAEnDoB,KAAY,OAACH,QAAD,IAACA,OAAD,EAACA,EAAaI,SAAUrI,IAAEwB,QAAF,OAAUyG,QAAV,IAAUA,GAAV,UAAUA,EAAaI,aAAvB,aAAU,EAAoBhK,MAExE,OACE,sBAAK1B,UAAWa,IAAOgK,UAAWxJ,MAAO,CAAEC,gBAAiBF,GAA5D,UACE,cAAC,EAAD,CACEiH,QAAS2C,IACT1C,UAAQ,EACRC,MAAM,UACNvI,UAAWa,IAAO8K,sBAEnBF,GACC,qBAAKzL,UAAWa,IAAO+K,iBAAvB,SACE,cAAC,GAAD,CAAOjC,IAAG,UAAKxI,EAAOY,QAAZ,mBAAuBuJ,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAaI,MAAMhK,UAGxD,sBAAK1B,UAAWa,IAAOgL,sBAAvB,UACE,cAAC,EAAD,CACE5L,QAAS,WACP8K,IACAN,KAEFzJ,YAAaA,EACbhB,UAAWa,IAAOiL,kBAClB5C,SAAUiC,IAPZ,SASE,cAAC,EAAD,yBAEF,cAAC,EAAD,CACElL,QAAS,WACP6K,IACAL,KAEFzJ,YAAaA,EACbhB,UAAW,CACTa,IAAOiL,kBACPjL,IAAOkL,sBACP1B,EAAYxJ,IAAOmL,yBAA2B,IAC9CvF,KAAK,KACPyC,UACIqC,EAAaU,YAAcZ,GAAyBD,IAZ1D,SAeE,cAAC,EAAD,4B,yCC5DKc,OARf,YAAyC,IAAb9G,EAAY,EAAZA,SAC1B,OACE,qBAAKpF,UAAWa,KAAOqL,iBAAvB,SACE,qBAAKlM,UAAWa,KAAOsL,2BAAvB,SAAoD/G,O,qBCqC3CgH,OAvCf,YAAoE,IAAnDC,EAAkD,EAAlDA,SAAUtK,EAAwC,EAAxCA,QAAwC,IAA/BuK,iBAA+B,MAAnB,GAAmB,EACzDC,EADyD,EAAfvL,YAC1CuL,gBACR,EAA4B3C,oBAAS,GAArC,mBAAO4C,EAAP,KAAeC,EAAf,KAEA9H,qBAAU,WACJ6H,GAAQD,MACX,CAACF,EAAUG,IAMd,IAAMtC,EAAG,UAAMnI,EAAN,YAAiBsK,GAE1B,OAAKG,EAcH,qBACExM,UAAWa,KAAOuL,MAClB/K,MAAO,CACLQ,gBAAgB,QAAD,OAAUqI,EAAV,MACfwC,QAAiB,OAATJ,QAAS,IAATA,OAAA,EAAAA,EAAW3C,KAAM,eAAYpH,GAEvCtC,QA1BJ,YACW,OAATqM,QAAS,IAATA,OAAA,EAAAA,EAAW3C,MAAOzF,OAAOyI,KAAP,OAAYL,QAAZ,IAAYA,OAAZ,EAAYA,EAAW3C,QAOvC,cAAC,GAAD,UAEE,qBACEO,IAAKA,EACL7I,MAAO,CAAEuL,QAAS,QAClBC,OAAQ,kBAAMJ,GAAU,IACxBK,QAAS,kBAAML,GAAU,S,+BCwBpBM,OA5Cf,YAAuD,IAApCpD,EAAmC,EAAnCA,IAAmC,IAA9BqD,gBAA8B,MAAnB,GAAmB,EAAfhM,EAAe,EAAfA,YAC7BuL,EAAiDvL,EAAjDuL,gBAAiBtB,EAAgCjK,EAAhCiK,eAAgBC,EAAgBlK,EAAhBkK,YACjC+B,EAAgBD,EAAhBC,YAEF1B,EAAeL,EADDD,IACyBO,YACvC0B,EAAa,OAAG3B,QAAH,IAAGA,OAAH,EAAGA,EAAcU,UAC9BzB,EAAiBlF,YAAmBqF,IAAW,SAACpF,GAAD,OAAOA,EAAEiF,kBAaxD2C,EAAO,CACX3E,OAAQ,OACRE,MAAO,OACP0E,WAAY,CAEVC,SAAU,EACVC,eAAgB,EAChBC,YAAa,EACbC,IAAK,EACLC,SAAU,EACV1D,SAAUkD,IAAgBC,EAAgB,EAAI,EAC9CQ,UAAWT,IAAgBC,EAAgB,EAAI,IAInD,OACE,cAAC,KAAD,CACES,mBAAoB9M,KAAOkM,QAC3Ba,QA7BJ,SAA2BjE,GACzB,IACE,IAEIkE,EAAQlE,EAAIkE,MADd,6EAEF,SAAOA,GAA6B,KAApBA,EAAM,GAAGC,SAAgBD,EAAM,GAC/C,MAAO/J,GACP,OAAO,GAsBEiK,CAAkBpE,GAC3BwD,KAAMA,EACNa,MAAO,kBAAMzB,GAAgB,kBAAM/B,W,gDCzB1ByD,OAjBf,YAA0E,IAAjDC,EAAgD,EAAhDA,MAAO9I,EAAyC,EAAzCA,SAAyC,IAA/BpF,iBAA+B,MAAnB,GAAmB,EAC/DoB,EAD+D,EAAfJ,YACxBE,iBAAxBE,QAER,OACE,qBAAKpB,UAAS,UAAKa,KAAOoN,cAAZ,YAA6BjO,GAA3C,SACE,sBAAKA,UAAWa,KAAOsN,yBAAvB,UACGD,GACC,qBAAKlO,UAAWa,KAAOuN,qBAAvB,SACE,oBAAI/M,MAAO,CAAEgN,kBAAmBjN,GAAhC,SAA4C8M,MAGhD,qBAAKlO,UAAWa,KAAOyN,oBAAvB,SAA6ClJ,U,wCCatCmJ,OAtBf,YAAgE,IAA5CnJ,EAA2C,EAA3CA,SAAUoJ,EAAiC,EAAjCA,QAASC,EAAwB,EAAxBA,UAAWzO,EAAa,EAAbA,UAC1C4H,EAAa,CAAC/G,KAAO0N,UAK3B,OAJAC,GAAW5G,EAAW5B,KAAKnF,KAAO,cAClC4N,GAAa7G,EAAW5B,KAAKnF,KAAO,gBACpCb,GAAa4H,EAAW5B,KAAKhG,GAG3B,sBAAKA,UAAW4H,EAAWnB,KAAK,KAAhC,UACE,sBAAKzG,UAAWa,KAAO6N,eAAvB,UACE,cAAC,EAAD,CACE3O,KAAMyO,EAAU,eAAiB,eACjCxO,UAAWa,KAAO8N,iBAEpB,+BACGH,EAAU,cAAC,EAAD,sBAAyB,cAAC,EAAD,6BAGxC,qBAAKxO,UAAWa,KAAO+N,eAAvB,SAAwCxJ,Q,wCCwB/ByJ,OA1Cf,YAaI,IAZFnN,EAYC,EAZDA,KACAoN,EAWC,EAXDA,GACAtJ,EAUC,EAVDA,MACAL,EASC,EATDA,MACA4J,EAQC,EARDA,QACAC,EAOC,EAPDA,SACAR,EAMC,EANDA,QACAC,EAKC,EALDA,UACAQ,EAIC,EAJDA,WACA/F,EAGC,EAHDA,SACAhG,EAEC,EAFDA,KACAlD,EACC,EADDA,UAQM4H,EAAa,CAAC/G,KAAOgO,OAM3B,OALAL,GAAW5G,EAAW5B,KAAKnF,KAAO,cAClC4N,GAAa7G,EAAW5B,KAAKnF,KAAO,gBACpCoO,GAAcrH,EAAW5B,KAAKnF,KAAO,iBACrCb,GAAa4H,EAAW5B,KAAKhG,GAG3B,sBAAKA,UAAW4H,EAAWnB,KAAK,KAAhC,UACE,uBACE/E,KAAMA,EACNoN,GAAIA,EACJ5L,KAAMA,GAAQ,QACdiC,MAAOA,EACP4J,QAASA,EACTC,SAlBN,SAAsBhH,GACpBgH,GAAYA,EAAShH,IAkBjBkB,SAAUA,IAEZ,uBAAOgG,QAASJ,EAAhB,SAAqBtJ,QCoBZ2J,OAjDf,SAAwB3K,GACtB,IAAQ4K,EAAyC5K,EAAzC4K,SAAUC,EAA+B7K,EAA/B6K,SAAUjN,EAAqBoC,EAArBpC,OAAQ4M,EAAaxK,EAAbwK,SAC5BM,EAAuClN,EAAvCkN,kBAAmBC,EAAoBnN,EAApBmN,gBACnBC,EAAsBH,EAAtBG,OAAQC,EAAcJ,EAAdI,UAEVC,EACJrM,IAAE+D,OAAOgI,EAASO,SAAS,SAACpK,GAAD,OAAOA,EAAEiJ,WAASV,OAAS,EAExD,SAAS8B,EAAa5H,GACpB,MAA2CA,EAAE6H,OAArCf,EAAR,EAAQA,GAAIpN,EAAZ,EAAYA,KAAMyD,EAAlB,EAAkBA,MAAOjC,EAAzB,EAAyBA,KAAM6L,EAA/B,EAA+BA,QAC/BC,GACEA,EAAShH,EAAG,CACV8G,KACApN,OACAyD,QACAjC,OACA6L,UACAe,WAAYV,EAAS5D,aAI3B,OACE,qBAAKxL,UAAWa,KAAOsO,eAAvB,SACG9L,IAAEyD,IAAIsI,EAASO,SAAS,SAACI,GACxB,IAAMhB,EAAU1L,IAAEM,SAAS6L,EAAQO,EAAOvE,WAAWwE,YACrD,OACE,cAAC,GAAD,CACElB,GAAIiB,EAAOvE,WACXtI,KAAMwM,EAAsB,WAAa,KACzChO,KAAM0N,EAAS5D,WAEfhG,MAAOuK,EAAO3L,KACde,MAAO4K,EAAOvE,WACduD,QAASA,EACTC,SAAUY,EACV1G,SAAUuG,EACVjB,QAASe,GAAmBR,GAAWU,GAAaM,EAAOvB,QAC3DC,UACEc,GAAmBR,GAAWU,IAAcM,EAAOvB,QAErDS,WAAYK,GAAqBG,GAAaM,EAAOvB,QACrDxO,UAAWa,KAAOoP,uBAXbF,EAAOvE,kB,oBC2BT0E,OAxDf,SAAe1L,GACb,IAAQ4K,EAAyC5K,EAAzC4K,SAAUC,EAA+B7K,EAA/B6K,SAAUjN,EAAqBoC,EAArBpC,OAAQ4M,EAAaxK,EAAbwK,SAC5BM,EAAuClN,EAAvCkN,kBAAmBC,EAAoBnN,EAApBmN,gBACnBC,EAAyCH,EAAzCG,OAAQC,EAAiCJ,EAAjCI,UAAWU,EAAsBd,EAAtBc,kBACnB7I,EAAejC,IAAfiC,WAcFM,EAAa,CAAC/G,KAAOqP,OAU3B,OATAT,GACEF,GACAY,GACAvI,EAAW5B,KAAKnF,KAAOuP,gBACzBX,GACEF,IACCY,GACDvI,EAAW5B,KAAKnF,KAAOwP,kBAGvB,sBAAKrQ,UAAW4H,EAAWnB,KAAK,KAAhC,UACE,0BACEqI,GAAIM,EAAS5D,WACb9J,KAAM0N,EAAS5D,WACf8E,YAAahJ,EAAW,yBACxB0H,SA5BN,SAAsBhH,GACpB,MAAkCA,EAAE6H,OAA5Bf,EAAR,EAAQA,GAAIpN,EAAZ,EAAYA,KAAMyD,EAAlB,EAAkBA,MAAOjC,EAAzB,EAAyBA,KACzB8L,GACEA,EAAShH,EAAG,CACV8G,KACApN,OACAyD,QACAjC,OACA4M,WAAYV,EAAS5D,cAqBrBtC,SAAUuG,EACVc,KAAM,EACNC,UAAW,IACXC,aAAchB,EAAYD,OAASjN,IAGpC+M,GAAqBG,GACpB,oBAAGzP,UAAWa,KAAO6P,oBAArB,UACGtB,EAASuB,cACR,cAAC,EAAD,2DAEA,cAAC,EAAD,mCAED,KACAtN,IAAEyD,IAAIsI,EAASsB,qBAAqB,SAACE,GAAD,OAAOA,EAAExM,QAAMqC,KAAK,a,mDC3CnE,SAASoK,GAAT,GAamB,IAAD,IAZhBC,gBAYgB,MAZL,GAYK,EAXhBC,EAWgB,EAXhBA,OACAtB,EAUgB,EAVhBA,UACAF,EASgB,EAThBA,gBACAD,EAQgB,EARhBA,kBAQgB,IAPhB0B,iBAOgB,MAPJ,aAOI,MANhBC,gBAMgB,MANL,aAMK,MALhBjR,iBAKgB,MALJ,GAKI,EAJhBkR,EAIgB,EAJhBA,QACA7P,EAGgB,EAHhBA,MACAiP,EAEgB,EAFhBA,YAEgB,IADhBrQ,eACgB,MADN,aACM,EAChB,SAASkR,EAAT,GAA0C,IAAD,IAAxBC,EAAwB,EAAxBA,IACTtC,EAAE,UAAGiC,EAAOK,UAAV,aAAG,EAAatC,GAClBuC,EAAgB,UAAGN,EAAOK,UAAV,aAAG,EAAahN,KAChCkN,EAAaN,EAAUlC,IAAO,GAEpC,GAAIoC,EACF,OAAO,sBAAMlR,UAAWa,KAAOqQ,QAAxB,SAAkCG,IAG3C,IAAME,EACJ9B,GAAa4B,EAAiBG,gBAAkBF,EAAWE,cAE7D,OACE,iCACE,+CACE1C,GAAIA,EACJ5L,KAAK,OACLuO,aAAa,MACbnB,YAAaA,GACTW,EAASnC,IALf,IAME9O,UACEuP,GAAmBE,EACf8B,EACE1Q,KAAO2N,QACP3N,KAAO4N,eACTlM,EAENlB,MAAO,CAAEqQ,SAAS,GAAD,OAA+B,GAA1BL,EAAiBvD,OAAtB,OACjB5E,SAAUuG,KAEXA,GAAaH,IAAsBiC,GAClC,uBAAMvR,UAAWa,KAAO8Q,cAAxB,cAAyCN,EAAzC,UAMR,IAAMtL,EAAW,MAEb6L,EAAYd,EAChBzN,IAAEE,QAAQwN,GAAQ,SAACc,GACjBD,EAAYvO,IAAE4C,QAAQ2L,EAAV,OAAqBC,QAArB,IAAqBA,OAArB,EAAqBA,EAAOzN,KAAM2B,MAGhD,IAAM+L,EAAkBF,EAAUG,OAAO,EAAGhM,EAAS+H,UAAY/H,EAC3DiM,EACJJ,EAAUG,OAAOH,EAAU9D,OAAS/H,EAAS+H,OAAQ/H,EAAS+H,UAC9D/H,EAEIkM,EAAa5O,IAAEyD,IACnBzD,IAAE+D,OAAO/D,IAAEmD,MAAMoL,EAAW7L,IAAW,SAACmM,GAAD,OAAQ7O,IAAEwB,QAAQqN,OACzD,SAACC,GAAD,OAAWA,KAGPC,EAA4B,GAWlC,OAVAN,GAAmBM,EAAmBpM,KAAK,cAACmL,EAAD,CAAeC,IAAK,GAAR,IAEvD/N,IAAEE,QAAQ0O,GAAY,SAACI,EAAWC,GAChC,IAAMC,EAAkBD,IAAML,EAAWnE,OAAS,EAClDsE,EAAmBpM,KAAKqM,GACxB,IAAM5O,EAAMqO,EAAkBQ,EAAI,EAAIA,IACjCC,GAAoBA,GAAmBP,IAC1CI,EAAmBpM,KAAK,cAACmL,EAAD,CAAiBC,IAAK3N,GAAVA,OAItC,mBACEzD,UAAW,CAACa,KAAOgQ,SAAU7Q,GAAWyG,KAAK,KAC7CpF,MAAOA,EACPpB,QAASA,EAHX,SAKGmS,IAKQjK,sBAAK0I,IC5DL2B,OApCf,SAAyBhO,GACvB,IAAQ4K,EAAyC5K,EAAzC4K,SAAUC,EAA+B7K,EAA/B6K,SAAUjN,EAAqBoC,EAArBpC,OAAQ4M,EAAaxK,EAAbwK,SAC5BM,EAAuClN,EAAvCkN,kBAAmBC,EAAoBnN,EAApBmN,gBACnBC,EAAsBH,EAAtBG,OAAQC,EAAcJ,EAAdI,UAChB,EAAuCgD,aAAQ,CAAEC,cAAelD,IAAxDyB,EAAR,EAAQA,SAAU0B,EAAlB,EAAkBA,MAAO3B,EAAzB,EAAyBA,UACjB1J,EAAejC,IAAfiC,WACFsL,EAAWC,mBAAQ,kBAAMvL,EAAW,eAAc,CAACA,IAczD,OAXA3C,qBAAU,WACR,IAAMmO,EAAeH,GAAM,SAACxN,EAAD,GAA2B,EAAjBzD,KAAiB,EAAXwB,KACzC8L,GACEA,OAASzM,EAAW,CAClB4C,QACA2K,WAAYV,EAAS5D,gBAG3B,OAAO,kBAAMsH,EAAaC,iBACzB,CAACJ,IAGF,qBAAK3S,UAAWa,KAAO2R,gBAAvB,SACE,cAAC,GAAD,CACE1B,SAAQ,OAAE1B,QAAF,IAAEA,OAAF,EAAEA,EAAU0B,SACpBC,OAAM,OAAE3B,QAAF,IAAEA,OAAF,EAAEA,EAAU2B,OAClBtB,UAAWA,EACXF,gBAAiBA,EACjBD,kBAAmBA,EACnB0B,UAAWA,EACXC,SAAUA,EACVX,YAAasC,O,qECkDNI,OAxEf,YAYwB,IAXtBC,EAWqB,EAXrBA,YACAC,EAUqB,EAVrBA,cACAC,EASqB,EATrBA,MACAC,EAQqB,EARrBA,WACAC,EAOqB,EAPrBA,eAOqB,IANrBrT,iBAMqB,MANT,GAMS,EALrBwO,EAKqB,EALrBA,QACAC,EAIqB,EAJrBA,UACAvF,EAGqB,EAHrBA,SACAoK,EAEqB,EAFrBA,UACAnK,EACqB,EADrBA,QAEA,EAAkCS,qBAAlC,mBAAO2J,EAAP,KAAkBC,EAAlB,KAWA,SAASC,EAAaC,GACpB,MAAO,CACL7S,KAAO8S,KACP9S,KAAO+S,cACP5T,GACQ,OAAR0T,QAAQ,IAARA,OAAA,EAAAA,EAAUG,YAAahT,KAAOiT,eAAiB,GAC/CT,EAAiBxS,KAAOkT,mBAAqB,GAC7CvF,EAAU3N,KAAOmT,cAAgB,GACjCvF,EAAY5N,KAAOoT,gBAAkB,IACrCxN,KAAK,KAGT,OArBA9B,qBAAU,WACJ4O,GAAapK,GAASA,EAAQoK,KACjC,CAACA,IAqBF,cADA,CACA,OACEvT,UAAWa,KAAOqT,YAElBzK,IAtBJ,SAAmBxC,IACbsM,IAAa,OAACtM,QAAD,IAACA,OAAD,EAACA,EAAIkN,eACtBX,EAAa,CAAEhL,OAAM,OAAEvB,QAAF,IAAEA,OAAF,EAAEA,EAAIkN,gBAqBzB9S,MAAO,CAAEiS,aAJX,UAME,cAAC,KAAD,CACEL,YAAaA,EACbE,MAAOA,EACPiB,eAAgBlL,EAHlB,SAKG,SAACmL,EAAUX,GAAX,OACC,0DACEjK,IAAK4K,EAASC,UACVD,EAASE,gBACTF,EAASG,iBAHf,IAIExU,UAAWyT,EAAaC,GACxBrS,MAAK,2BACAgT,EAASE,eAAelT,OADxB,IAGHuL,QAASwG,EAAa,YAAS7Q,IARnC,WAWI2G,GAAY,cAAC,IAAD,CAAiBnJ,KAAM0U,MACrC,qBAAKpT,MAAO,CAAEqT,KAAM,EAAGC,UAAW,UAAlC,SAA+CzB,WAKpDE,GAAc,qBAAKpT,UAAWyT,IAAhB,SAAiCP,MA3B3CD,IC8CI2B,OAxFf,YAYwB,IAXtBC,EAWqB,EAXrBA,YACAC,EAUqB,EAVrBA,cACA7B,EASqB,EATrBA,YACAC,EAQqB,EARrBA,cACAhQ,EAOqB,EAPrBA,KACAsL,EAMqB,EANrBA,QACAC,EAKqB,EALrBA,UACAvF,EAIqB,EAJrBA,SACAoK,EAGqB,EAHrBA,UACA5K,EAEqB,EAFrBA,MACAS,EACqB,EADrBA,QAEA,EAAkCS,qBAAlC,mBAAO2J,EAAP,KAAkBC,EAAlB,KACMvH,IAAuB6I,KAAmB5B,EAMhD,SAAS6B,EAAU9N,IACbsM,IAAa,OAACtM,QAAD,IAACA,OAAD,EAACA,EAAIkN,eACtBX,EAAa,CAAEhL,OAAM,OAAEvB,QAAF,IAAEA,OAAF,EAAEA,EAAIkN,eAG7B,OATAxP,qBAAU,WACJ4O,GAAapK,GAASA,EAAQoK,KACjC,CAACA,IAQF,cAAC,KAAD,CAAWsB,YAAaA,EAAaG,UAAU,aAA/C,SACG,SAACX,EAAUX,GAAX,OACC,sBACEjK,IAAK4K,EAASC,SACdtU,UAAW,CACTa,KAAOoU,SACPpU,KAAO,YAAD,OAAaqC,IACnBwQ,EAASL,eAAiBxS,KAAOqU,mBAAqB,IACtDzO,KAAK,KACPpF,MAAO,CACLiS,YACA5K,MAAOA,EACH,UAAS,WAATxF,EACKwF,EACQ,EAARA,EAFL,WAGAnG,GAbR,UAgBG0Q,GAAeC,GACd,cAAC,GAAD,CACED,YAAaA,EACbC,cAAeA,EACfC,MAAO,EACPE,eACEK,EAASL,gBAETK,EAASyB,mBAAqBzB,EAAS0B,qBAEzCpV,UAAWa,KAAOuD,KAClBoK,QAASvC,KAAeuC,EACxBC,UAAWxC,KAAewC,EAC1BvF,SAAUA,EACVC,QAASA,EACTmK,UAAWA,IAGdwB,GACC,qBACE9U,UAAW,CACTa,KAAOwU,qBACPxU,KAAOyU,8BACPrC,GAAeC,EACXrS,KAAO0U,iCACP,GACJtJ,GAAauC,EAAU3N,KAAO2U,4BAA8B,GAC5DvJ,GAAawC,EACT5N,KAAO4U,8BACP,IACJhP,KAAK,KACPgD,IAAKsL,EACL1T,MAAO,CAAEiS,aAbX,SAeE,qBAAKtT,UAAWa,KAAOuD,KAAvB,SAA8B0Q,MAGlC,qBAAKzT,MAAO,CAAEuL,QAAS,QAAvB,SAAkCyH,EAAS/D,qBC+ItCoF,OA1Mf,YAQmB,IAPjBC,EAOgB,EAPhBA,cACAC,EAMgB,EANhBA,iBACAC,EAKgB,EALhBA,aACA3M,EAIgB,EAJhBA,SACA4M,EAGgB,EAHhBA,WACApN,EAEgB,EAFhBA,MACAsG,EACgB,EADhBA,SAEA,EAA0BpF,qBAA1B,mBAAOmM,EAAP,KAAcC,EAAd,KACA,EAAgCpM,qBAAhC,mBAAOqM,EAAP,KAAiBC,EAAjB,KACA,EAAkDtM,qBAAlD,mBAAOuM,EAAP,KAA0BC,EAA1B,KACA,EAAkCxM,qBAAlC,mBAAO0J,EAAP,KAAkB+C,EAAlB,KACA,EAA8BzM,oBAAkB,GAAhD,mBAAO0M,EAAP,KAAgBC,EAAhB,KAqEA,SAASC,EAAc3B,EAAqB5B,GAAsB,IAAD,IAEzDwD,EAAwBpT,IAAE4C,QAC9B4O,EACA,yBACA,IAEI6B,EAAwBrT,IAAE4C,QAAQgN,EAAa,aAAc,IAC7D0D,EAAWF,IAA0BC,EAIrCE,EAAgC,UAAGvT,IAAEwT,KACzCd,GACA,SAACzD,GAAD,OAAOA,EAAEuC,cAAF,gCAA2C6B,aAFd,aAAG,EAGtC5B,cACGA,EAAa,UAAGzR,IAAEwT,KACtBd,GACA,SAACzD,GAAD,OAAOA,EAAEuC,cAAgBA,YAFR,aAAG,EAGnBC,cAIH,OAAO6B,GAHYC,IAAqC9B,EAyC1D,SAASgC,EAAiB5T,GACxB,IAAM6T,EAAU1T,IAAE2T,QAAQjB,EAAO,SAE3BkB,EAAS5T,IAAEyD,IAAIiQ,GAAS,SAACpD,GAAU,IAAD,EACtC,IAAKsC,EAAU,OAAOtC,EACtB,IAAMuD,EAAsBjB,EAAStC,EAAKkB,aAC1C,OAAO,2BACFlB,GADL,IAEEV,YAAaiE,EACbhE,cAAegE,EAAmB,UAC9B7T,IAAEwT,KAAKd,GAAO,SAACpC,GAAD,OAAUA,EAAKV,cAAgBiE,YADf,aAC9B,EACIhE,mBACJ3Q,OAIF4U,EAAW9T,IAAE+D,OAAO6P,GAAQ,SAACtD,GAAD,OAAUA,EAAKzQ,OAASA,KAE1D,OAAOG,IAAEyD,IAAIqQ,GAAU,SAACxD,GACtB,IAAMyD,EAAoBZ,EACxB7C,EAAKkB,YACLlB,EAAKV,aAEP,OACE,cAAC,GAAD,aAEEzE,QAASqH,GAAgBuB,EACzB3I,UAAWoH,IAAiBuB,EAC5BlO,SAAUA,EACVC,QAAS,SAACkO,GACHvB,IACDQ,GACJD,GAAa,eAACiB,EAAD,uDAAiB,EAAjB,OACXD,EAAK7O,OAAS8O,EAAgBD,EAAK7O,OAAS8O,OAGhDhE,UAAWA,EACX5K,MAAOA,GACHiL,GAbCA,EAAKkB,gBAmBlB,OA5KAlQ,qBAAU,WAIR,IAHA,IAAM4S,EAAuB,GAEvBC,EAAkB,GACflF,EAAI,EAAGA,EAAIjP,IAAEoU,KAAK9B,GAAgBrD,IAAKkF,EAAMxR,KAAKsM,GAC3D,IAAMoF,EAAUrU,IAAEqU,QAAQF,GAE1BnU,IAAEE,QACAoS,GACA,WAAuCxC,GAAmB,IAAvD3H,EAAsD,EAAtDA,WAAYmM,EAA0C,EAA1CA,UAAWC,EAA+B,EAA/BA,UACxBL,EAAavR,KAAK,CAChBiN,YAAY,aAAD,OAAezH,GAC1B0H,cAAeyE,EACf9C,YAAY,oBAAD,OAAsBrJ,GACjCsJ,mBAAevS,EACfW,KAAM,SACNsU,MAAOE,EAAQvE,KAEjBoE,EAAavR,KAAK,CAChBiN,iBAAa1Q,EACb2Q,mBAAe3Q,EACfsS,YAAY,yBAAD,OAA2BrJ,GACtCsJ,cAAe8C,EACf1U,KAAM,mBAIZ8S,EAASuB,KACR,CAAC5B,IAEJhR,qBAAU,WAKR,IAJKtB,IAAEwB,QAAQ+Q,IAAqBvS,IAAEwB,QAAQoR,IAC5CC,EAAYN,IAGTvS,IAAEwB,QAAQoR,GAAW,CACxB,IAAIhK,GAAY,EACV4L,EAAelC,EAAc7H,OAC/BgK,EAAmB,EACvBzU,IAAEE,QAAQF,IAAEG,KAAKyS,IAAW,SAACxS,GACvBJ,IAAEM,SAASF,EAAK,sBACIlB,IAAlB0T,EAASxS,GACXwI,GAAY,EAERuK,EAAc/S,EAAKwS,EAASxS,KAAOqU,QAK7C,IAAMC,EAA2B,CAC/B9L,YACAgK,WACA+B,MAAOF,EAAmBD,GAG5BzB,GAAqB,SAAC6B,GAEpB,IAAI5U,IAAE6U,QAAQD,EAAWF,GACzB,OAAOA,QAGV,CAACnC,EAAkBK,EAAUN,IAEhChR,qBAAU,WACRqK,GAAYmH,GAAqBnH,EAASmH,KACzC,CAACA,IA4GF,cAAC,KAAD,CACEgC,UAjFJ,SAAyBC,EAAoB/D,GAA8B,IAAD,IAKxE,GAAI,UAAC+D,EAAOC,mBAAR,aAAC,EAAoBxD,YAIzB,GAAIuD,EAAOE,OAAOzD,eAAd,UAA8BuD,EAAOC,mBAArC,aAA8B,EAAoBxD,aAAtD,CAKA,IAAI0D,EAAkBlV,IAAEC,UAAU2S,GAG7BsC,GACHlV,IAAEE,QAAQwS,GAAO,SAACpC,GAChB4E,EAAe,2BACVA,GADU,kBAEZ5E,EAAKkB,YAAclB,EAAKV,iBAM/B,IAAMuF,EAAsBnV,IAAEC,UAAUiV,GACxCA,EAAgBH,EAAOC,YAAYxD,aAAeuD,EAAOnF,YACzDsF,EAAgBH,EAAOE,OAAOzD,aAC5B2D,EAAoBJ,EAAOC,YAAYxD,aAEzCqB,EAAYqC,QAtBVxU,QAAQ0U,KAAK,4CAJb1U,QAAQ0U,KAAK,6BA4EbC,YAAa,kBAAMnC,GAAW,IAFhC,SAIE,iCACE,yBAASvW,UAAWa,KAAO8X,KAA3B,SAAkC7B,EAAiB,YACnD,yBAAS9W,UAAWa,KAAO+X,MAA3B,SACG9B,EAAiB,uBCtMb+B,OA5Bf,SAAyBrU,GACvB,IAAQ4K,EAAyC5K,EAAzC4K,SAAUC,EAA+B7K,EAA/B6K,SAAUjN,EAAqBoC,EAArBpC,OAAQ4M,EAAaxK,EAAbwK,SAC5BM,EAAuClN,EAAvCkN,kBAAmBC,EAAoBnN,EAApBmN,gBACnBC,EAAsBH,EAAtBG,OAAQC,EAAcJ,EAAdI,UAUhB,OACE,qBAAKpO,MAAO,CAAEyX,UAAW,QAAzB,SACE,cAAC,GAAD,CACEnD,cAAa,OAAEvG,QAAF,IAAEA,OAAF,EAAEA,EAAUuG,cACzBC,iBAAkBnG,EAAS,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAQyG,cAAW1T,EACjDuT,YAAU,EACVpN,MAAO,IACPsG,SAfN,SAAwB7L,GACtB6L,GACEA,OAASzM,EAAW,CAClB4C,MAAOhC,EAAQ8I,UAAY9I,OAAUZ,EACrCuN,WAAYV,EAAS5D,cAYrBqK,aAAcpG,IAAcH,GAAqBC,GACjDrG,SAAUuG,OCqGHsJ,OAzHf,YASI,IAAD,sBARD3J,gBAQC,MARU,GAQV,EAPDC,EAOC,EAPDA,SAOC,IANDjN,cAMC,MANQ,GAMR,EALD4M,EAKC,EALDA,SACAgK,EAIC,EAJDA,IACAC,EAGC,EAHDA,IACAjY,EAEC,EAFDA,YACAhB,EACC,EADDA,UAEQmB,EAAWH,EAAXG,OACAC,EAAYJ,EAAYE,iBAAxBE,QACA+O,EAAiCd,EAAjCc,kBAAmBV,EAAcJ,EAAdI,UACrBnF,EAAgBhF,YAAmBqF,IAAW,SAACpF,GAAD,OAAOA,EAAE+E,iBACvDC,EAAkBjF,YACtBqF,IACA,SAACpF,GAAD,OAAOA,EAAEgF,mBAGX5F,qBAAU,WACR,IAAMuU,GAAqB7V,IAAEwB,QAAF,OAAUzC,QAAV,IAAUA,OAAV,EAAUA,EAAQgI,YAU7C,OAPK/G,IAAEwB,QAAQuK,EAAShF,cAAe,OAAChI,QAAD,IAACA,OAAD,EAACA,EAAQ+W,wBAI9CD,GAAqB5O,EAAclI,EAAOgI,YAH1CE,EAAc8E,EAAShF,YAMlB,WACA8O,GACH3O,OAGH,CAAC6E,EAAShF,WAAYhI,EAAOgI,WAAYhI,EAAO+W,yBAEnD,IAAMvR,EAAa,CAAC/G,KAAOkY,UAC3B/Y,GAAa4H,EAAW5B,KAAKhG,GAE7B,IAAMoZ,EAAuBvG,mBAAQ,WACnC,OAAQzD,EAASiK,cACf,IAAK,QACH,OACE,cAAC,GAAD,CACEjK,SAAUA,EACVC,SAAUA,EACVjN,OAAQA,EACR4M,SAAUA,IAGhB,IAAK,iBACH,OACE,cAAC,GAAD,CACEI,SAAUA,EACVC,SAAUA,EACVjN,OAAQA,EACR4M,SAAUA,IAGhB,IAAK,WACH,OACE,cAAC,GAAD,CACEI,SAAUA,EACVC,SAAUA,EACVjN,OAAQA,EACR4M,SAAUA,IAGhB,IAAK,WACL,IAAK,iBACH,OACE,cAAC,GAAD,CACEI,SAAUA,EACVC,SAAUA,EACVjN,OAAQA,EACR4M,SAAUA,IAGhB,QACE,OAAO,QAEV,CAAC5M,EAAQiN,EAAUD,EAAUJ,IAEhC,OACE,sBAAKhP,UAAW4H,EAAWnB,KAAK,KAAhC,UACE,qBAAKzG,UAAWa,KAAOyY,kBAAvB,SACE,uBAAMjY,MAAO,CAAEkH,MAAOnH,GAAtB,UACE,cAAC,EAAD,uBADF,IAC2B4X,EAD3B,IACiCC,QAG1B,OAAR7J,QAAQ,IAARA,GAAA,UAAAA,EAAUmK,iBAAV,mBAAqBC,aAArB,eAA4B9X,QAA5B,OAAoCP,QAApC,IAAoCA,OAApC,EAAoCA,EAAQY,UAC3C,qBACE/B,UAAWa,KAAO4Y,gBAClBpY,MAAK,aACHQ,gBAAgB,QAAD,cAAUV,QAAV,IAAUA,OAAV,EAAUA,EAAQY,QAAlB,mBAA6BqN,QAA7B,IAA6BA,GAA7B,UAA6BA,EAAUmK,iBAAvC,iBAA6B,EAAqBC,aAAlD,aAA6B,EAA4B9X,KAAzD,OADZ,OAEA0N,QAFA,IAEAA,GAFA,UAEAA,EAAUmK,iBAFV,aAEA,EAAqBlY,SAI9B,qBAAKrB,UAAWa,KAAO6Y,mBAAvB,SAA4CtK,EAAShL,OACpDgV,IACE3J,KACEpM,IAAEwB,QAAF,OAAUuK,QAAV,IAAUA,GAAV,UAAUA,EAAUuK,gBAApB,aAAU,EAAoBC,eACT,IAAtBzJ,IACE9M,IAAEwB,QAAF,OAAUuK,QAAV,IAAUA,GAAV,UAAUA,EAAUuK,gBAApB,aAAU,EAAoBE,iBACR,IAAtB1J,IACF,cAAC,GAAD,CACE1B,WAAiC,IAAtB0B,EACX3B,SAA+B,IAAtB2B,EACTnQ,UAAWa,KAAOiZ,mBAHpB,SAKG3J,EAAiB,OACdf,QADc,IACdA,GADc,UACdA,EAAUuK,gBADI,aACd,EAAoBC,YADN,OAEdxK,QAFc,IAEdA,GAFc,UAEdA,EAAUuK,gBAFI,aAEd,EAAoBE,oBC/GrBE,OAdf,SAAqB5U,GAGnB,IAAMsE,EAAMF,mBAQZ,OALA5E,qBAAU,WACR8E,EAAID,QAAUrE,IACb,CAACA,IAGGsE,EAAID,SCTAwQ,GAAoB,WAC/B,IAAMC,EAAI/V,OACRgW,EAAIC,SACJC,EAAkBF,EAAEE,gBACpBC,EAAOH,EAAEI,qBAAqB,QAAQ,GAWxC,MAAO,CACL5R,MAXSuR,EAAEM,YAAcH,EAAgBI,aAAeH,EAAKG,YAY7DhS,OAVEyR,EAAEQ,aAAeL,EAAgBjG,cAAgBkG,EAAKlG,aAWxDuG,UAVaT,EAAES,WAAaN,EAAgBM,WAAaL,EAAKK,UAW9DC,WAVcV,EAAEU,YAAcP,EAAgBO,YAAcN,EAAKM,WAWjEC,YATEX,EAAEW,aAAeR,EAAgBQ,aAAeP,EAAKO,YAUvDC,aAREZ,EAAEY,cAAgBT,EAAgBS,cAAgBR,EAAKQ,eAoBhDC,GAAgB,SAAhBA,EAAiBC,GAa5B,OATAC,OAAOxX,KAAKuX,GAAKxX,SAAQ,SAACE,IAH1B,SAA0BsX,GACxB,QAASA,KAASA,EAAIE,UAGlBC,CAAiBH,EAAItX,IAEdsX,EAAItX,IAA4B,kBAAbsX,EAAItX,GAChCqX,EAAcC,EAAItX,SACIlB,IAAbwY,EAAItX,WACNsX,EAAItX,UAJJsX,EAAItX,MAORsX,GCgaMI,OApcf,YAAkD,IAAlCjN,EAAiC,EAAjCA,MAAiC,IAA1BkN,YAA0B,MAAnB,GAAmB,EAAfpa,EAAe,EAAfA,YAChC,EAAwCoa,EAAhCC,iBAAR,MAAoB,GAApB,IAAwCD,EAAhBhZ,cAAxB,MAAiC,GAAjC,EACA,EAAsCwH,mBAAS,GAA/C,mBAAO0R,EAAP,KAAoBC,EAApB,KACA,EAAoC3R,oBAAS,GAA7C,mBAAO4R,EAAP,KAAmBC,EAAnB,KACMC,EAAcL,EAAUvN,OAC9B,EAA0BlE,mBACxB+R,GAAUD,EAAatZ,EAAOwZ,qBADhC,mBAAOpE,EAAP,KAAcqE,EAAd,KAGM1C,GAA2D,IAAlC/W,EAAO+W,uBAChC2C,GAAuD,IAAhC1Z,EAAO0Z,qBAC5BC,EAAiB3Z,EAAjB2Z,aAGN7Q,EAYElK,EAZFkK,YACA8Q,EAWEhb,EAXFgb,cACAC,EAUEjb,EAVFib,cACA1P,EASEvL,EATFuL,gBACA2P,EAQElb,EARFkb,cACAjR,EAOEjK,EAPFiK,eACAkR,EAMEnb,EANFmb,eACAC,EAKEpb,EALFob,gBACAC,EAIErb,EAJFqb,gBACAC,EAGEtb,EAHFsb,gBACAC,EAEEvb,EAFFub,YACAC,EACExb,EADFwb,OAEIlR,EAAcL,IACdM,EAAeL,EAAYI,EAAYE,YACvC0B,EAAa,OAAG3B,QAAH,IAAGA,OAAH,EAAGA,EAAcU,UAC9BwQ,EAAW,OAAGlR,QAAH,IAAGA,OAAH,EAAGA,EAAcmR,QAC5BtE,GAAqB,OAAZ7M,QAAY,IAAZA,OAAA,EAAAA,EAAc6M,SAAU,GACjCuE,EAAsB5C,GAAYuC,GAClChS,EAAgBhF,YAAmBqF,IAAW,SAACpF,GAAD,OAAOA,EAAE+E,iBACvDC,EAAkBjF,YACtBqF,IACA,SAACpF,GAAD,OAAOA,EAAEgF,mBAELC,EAAiBlF,YAAmBqF,IAAW,SAACpF,GAAD,OAAOA,EAAEiF,kBAE9D,SAASmR,GAAU1C,EAAK2D,GACtB,IAAMC,EAAUxZ,IAAEyD,IAAI,IAAIC,MAAMkS,IAAM,SAAC/G,EAAGI,GAAJ,OAAUA,KAEhD,OADiBsK,EAAYvZ,IAAEqU,QAAQmF,GAAWA,EAIpDlY,qBAAU,YAEI,OAAN6X,QAAM,IAANA,OAAA,EAAAA,EAAQ9Z,WAAYwK,IACtBnJ,QAAQ0U,KAAK,2DACbqE,QAIH,CAACzB,IAEJ1W,qBAAU,YACR,WACE,UAAI6X,QAAJ,IAAIA,OAAJ,EAAIA,EAAQ9Z,SAAU,CACpBqB,QAAQ0U,KACN,yEAGF,IAAMsE,EAAWpB,GAAUD,EAAatZ,EAAOwZ,oBAC/CC,EAASkB,GACTD,MAGJE,KACC,CAACtB,IAEJ/W,qBAAU,WAKR,OAJKtB,IAAEwB,QAAF,OAAUzC,QAAV,IAAUA,OAAV,EAAUA,EAAQgI,aACrBE,EAAa,OAAClI,QAAD,IAACA,OAAD,EAACA,EAAQgI,YAGjB,WACLG,OAED,CAACnI,EAAOgI,aAEXzF,qBAAU,WACRuI,GAqOF,WAEE,IAAK7J,IAAEwB,QAAQuT,GAAS,OAGxB,IAAI6E,EAAyB,EACzBC,EAA2B,EAE/B7Z,IAAEE,QAAQ8X,GAAW,YAAqB,IAAlB7P,EAAiB,EAAjBA,WACQN,EAAYM,GAAlC2E,kBACY8M,IAA2BC,OAGjD,IAAMlF,EAAQmF,KAAKC,MAAOH,EAAyB5B,EAAUvN,OAAU,KACvEkO,EAAc1Q,EAAYE,WAAY,CACpC4M,OAAQ,CACNJ,QACAiF,yBACAC,2BACAG,cAAeJ,EAAyBC,KAxP3BI,KAChB,CAACpQ,IAEJ,IAAMqQ,GAAY1K,mBAAQ,WAExB,QAAQ2K,MAAMzB,KAAiB3D,EAAOJ,QAAU+D,IAC/C,CAACA,EAAc3D,EAAOJ,QAEzBrT,qBAAU,WACR,QAC0BpC,IAAxBoa,GACEL,IACDkB,MAAMpF,EAAOJ,OAEd,IACEuF,GAAYlB,IAAoBD,IAChC,MAAOtY,GACPC,QAAQC,MAAMF,GACdyY,EAAYzY,MAGf,CACD6Y,EACAL,EACAlE,EAAOJ,MACPuF,GACApB,EACAC,EACAC,EACAE,IAGF,IAAMkB,GAAmB5K,mBAAQ,WAC/B,IAAIyD,GAAU,EAId,OAHAjT,IAAEE,QAAQ8X,GAAW,YAAqB,IAAlB7P,EAAiB,EAAjBA,WACjBnI,IAAEwB,QAAQqG,EAAYM,MAAc8K,GAAU,MAE9CA,IACN,CAACpL,EAAamQ,IAEjB,SAASzL,GAAa5H,EAAGqP,GACvB,IAAQlS,EAAqCkS,EAArClS,MAAOjC,EAA8BmU,EAA9BnU,KAAM4M,EAAwBuH,EAAxBvH,WAAYf,EAAYsI,EAAZtI,QAC3BS,EAAWtE,EAAY4E,GAAvBN,OACO,aAATtM,GACG6D,MAAMC,QAAQwI,KAASA,EAAS,IAEnCA,GADGnM,IAAEM,SAAS6L,EAAQrK,IAAU4J,EAC1B,uBAAOS,GAAP,CAAerK,IAEZ9B,IAAE+D,OAAOoI,GAAQ,SAAC0C,GAAD,OAAOA,IAAM/M,MAGzCqK,EAASrK,EAIXqK,EAASwM,EAAclM,EAAY,CAAEN,WAAYyM,EAAcnM,GA0FjE,SAAS4N,MACFvE,GAA0BmC,EAAcI,EAC3CH,EAAeD,EAAc,GACnBpO,EAEDsO,GACTC,GAAc,GAFdlP,GAAgB,kBAAM/B,OAM1B,SAASmT,KACP,IAAMvO,EAAWiM,EAAU7D,EAAM8D,EAAc,KAAO,GAChDsC,EAAaxb,EAAOwZ,mBACtBvY,IAAEyD,IAAI0Q,GAAO,SAACqG,GAAD,OAAOxC,EAAUwC,MAC9BxC,EACJ,OAAOlC,EAAyByE,EAAa,CAACxO,GAqChD,SAAS0O,KACP,IAAMF,EAAaD,KACfI,GAAuB1a,IAAEwB,QAAQ+Y,GAIrC,OAHAva,IAAEE,QAAQqa,GAAY,SAACI,GAAO,IAAD,GACvB,UAAC9S,EAAY8S,EAAExS,mBAAf,aAAC,EAA2BiE,aAAWsO,GAAuB,MAE7DA,EAQT,SAASjB,KAQPb,EAAc3Q,EAAYE,YAK1BnI,IAAEE,QAAQ8X,GAAW,SAAC2C,GACpB/B,EAAc+B,EAAExS,eAZlB+P,EAAe,GACfE,GAAc,GA6FhB,IAAMwC,GAAWpL,mBAAQ,WACvB,OAAO3F,IAAkBsO,GAAcM,IAAyByB,KAC/D,CAACzB,EAAsByB,GAAWrQ,EAAesO,IAEpD,SAAS0C,GAAoBjX,GACvBiG,GDjW4B,SAACjG,IAC/B,OAACA,QAAD,IAACA,OAAD,EAACA,EAAIkX,iBACTC,YAAW,WACT,IACEnX,EAAGkX,eAAe,CAAEE,SAAU,WAC9B,MAAOva,GACPC,QAAQ0U,KAAK,gCACb1U,QAAQC,MAAMF,MAEf,KCyVDwa,CAAqBrX,GAGvB,OACE,eAAC,GAAD,CACEjH,UAAWa,KAAOsa,KAClBjN,MAAOA,EACPlN,YAAaA,EAHf,UArBF,WACE,IAAIyb,EACJ,OACE,qBAAKzc,UAAWa,KAAO0d,YAAvB,SACE,6BACE,cAAC,EAAD,yDAqBHC,GA/JL,WACE,KAAKtR,GAAkBsO,IAAgBiB,EAAvC,CACA,IAAMmB,EAAaD,KACnB,OAAOta,IAAEyD,IAAI8W,GAAY,SAACI,EAAG1L,GAC3B,IAAQ9G,EAAewS,EAAfxS,WACF6D,EAAWnE,EAAYM,GAC7B,OAAQnI,IAAEwB,QAAQmZ,GAYd,KAXF,cAAC,GAAD,CAEE5O,SAAU4O,EACV3O,SAAUA,EACVjN,OAAQA,EACR4M,SAAUY,GACVoJ,IAAKG,EAAyB7G,EAAI,EAAIgJ,EACtCrC,IAAKyC,EACL1a,YAAaA,EACbhB,UAAWa,KAAO4d,2BARbjT,OAwJRkT,GAtEL,WACE,IAAQtG,EAAW7M,EAAX6M,OACR,GAAKlL,IAAiBsO,GAAepD,EAIrC,OAFA+D,GAAgB/D,EAAOJ,OAGrB,sBAAKhY,UAAWa,KAAO8d,aAAvB,UACE,6BACE,cAAC,EAAD,wBAEF,sBAAK3e,UAAWa,KAAO+d,qBAAvB,UACE,+BACE,cAAC,EAAD,sBAEF,wCAAOxG,QAAP,IAAOA,OAAP,EAAOA,EAAQJ,MAAf,OACA,wCACGI,QADH,IACGA,OADH,EACGA,EAAQ6E,uBADX,IACmC,cAAC,EAAD,iBAAkB,IADrD,OAEG7E,QAFH,IAEGA,OAFH,EAEGA,EAAQiF,cAFX,IAE0B,cAAC,EAAD,yBAEzBtB,GACC,sBACE/b,UAAW,CACTa,KAAOge,2BACPtB,GACI1c,KAAOie,mCACPje,KAAOke,oCACXtY,KAAK,KANT,UAQE,iCACE,cAAC,EAAD,4BADF,KACiCsV,EADjC,OAGA,cAAC,EAAD,CACEhc,KAAMwd,GAAY,eAAiB,eACnCvd,UAAWa,KAAOme,4CAqC3BC,GACD,sBAAKjf,UAAWa,KAAOqe,aAAvB,UACGzC,IAAgBvP,IAAkB4Q,MA7IzC,WACE,IAAIqB,GAAuB,EAErBvB,EAAaD,KAMnB,OALAta,IAAEE,QAAQqa,GAAY,SAACI,GAAO,IAAD,EACvB3a,IAAEwB,QAAF,UAAUqG,EAAY8S,EAAExS,mBAAxB,aAAU,EAA2BgE,UACvC2P,GAAuB,MAGpBA,EAoIuDC,IACxD,cAAC,EAAD,CACEhe,SAAO,EACPnB,QA/QV,WACE,IAAM2d,EAAaD,KACnBta,IAAEE,QACAqa,GACA,YAOO,IANLpS,EAMI,EANJA,WACA6N,EAKI,EALJA,aACA1J,EAII,EAJJA,QACAe,EAGI,EAHJA,oBACAC,EAEI,EAFJA,cACAI,EACI,EADJA,OAEQvB,EAAWtE,EAAYM,GAAvBgE,OAEJW,GAAoB,EAExB,OAAQkJ,GACN,IAAK,WACL,IAAK,iBACH,IAAM/H,EAAavK,MAAMC,QAAQwI,GAAUA,EAAS,CAACA,GAC/CmC,EAAgBhC,EACnBvI,QAAO,SAAC7B,GAAD,OAAOA,EAAEiJ,WAChB1H,KAAI,SAACvB,GAAD,OAAOA,EAAEiG,cAChB2E,EAAoB9M,IAAE6U,QACpB7U,IAAEgc,OAAO/N,GAAYtB,WACrB3M,IAAEgc,OAAO1N,GAAe3B,YAE1B,MAEF,IAAK,QACH,IAAMsP,EAAkB,GACxBjc,IAAEE,QAAQmN,GAAqB,YAAe,IAAZtM,EAAW,EAAXA,KAChCkb,EAAgBtZ,KACd3C,IAAEM,SAASN,IAAEkc,UAAU/P,GAASnM,IAAEkc,UAAUnb,QAIhD+L,EAAoBQ,EAChBtN,IAAEoU,KAAKpU,IAAE+D,OAAOkY,GAAiB,SAAC1O,GAAD,OAAa,IAANA,QACxCvN,IAAEoU,KAAK6H,GACPjc,IAAEwT,KAAKyI,GAAiB,SAAC1O,GAAD,OAAa,IAANA,KAEnC,MAEF,IAAK,iBACH,IAAI4O,GAA6B,EACjCnc,IAAEE,QAAQwN,GAAQ,SAACc,EAAOS,IAGjB,OAALT,QAAK,IAALA,OAAA,EAAAA,EAAOzN,KAAKoN,iBACZnO,IAAEK,IAAI8L,EAAN,OAAcqC,QAAd,IAAcA,OAAd,EAAcA,EAAO/C,IAAI0C,gBAEzBgO,GAA6B,MAEjCrP,EAAoBqP,EACpB,MAEF,IAAK,WACHrP,EAAsC,KAAZ,OAANX,QAAM,IAANA,OAAA,EAAAA,EAAQwI,OAOhCgE,EAAcxQ,EAAY,CACxBiE,WAAW,EACXU,0BAMoB,OAAN/N,QAAM,IAANA,OAAA,EAAAA,EAAQmN,oBAKToO,KACC9G,MAAK,SAACmH,GAAO,IAAD,IAC9B,OACG3a,IAAEwB,QAAF,OAAUmZ,QAAV,IAAUA,GAAV,UAAUA,EAAGrE,gBAAb,aAAU,EAAaC,eACvBvW,IAAEwB,UAAQ,OAACmZ,QAAD,IAACA,GAAD,UAACA,EAAGrE,gBAAJ,aAAC,EAAaE,oBARX6D,MAsMVvU,QAAS+U,GACTld,YAAaA,EAJf,SAME,cAAC,EAAD,yBAGAkM,GAAiB4Q,MAAwBtC,IAC3C,cAAC,EAAD,CACEvS,WAAS,EACThJ,QAASyd,GACTvU,QAAS+U,GACTld,YAAaA,EAJf,SAME,cAAC,EAAD,qBAGHkM,IAAkBsO,IAAeyC,IAChC,cAAC,EAAD,CAAQhV,WAAS,EAAChJ,QA7I1B,WACEsb,EAAe,GACfE,GAAc,IA2IiCza,YAAaA,EAAtD,SACE,cAAC,EAAD,uBAGHid,IACC,cAAC,EAAD,CAAQhV,WAAS,EAAChJ,QAAS6c,GAAa9b,YAAaA,EAArD,SACE,cAAC,EAAD,uBAGFyc,KAAqBhB,GACrB,cAAC,EAAD,CACErb,SAAO,EACPnB,QAASic,EACThT,SAA0B,IAAhBwS,EACV1a,YAAaA,EAJf,SAME,cAAC,EAAD,kC,qBCzXGye,OA1Ef,YAAmE,IAAlDpT,EAAiD,EAAjDA,SAAUtK,EAAuC,EAAvCA,QAAuC,IAA9BiL,gBAA8B,MAAnB,GAAmB,EAAfhM,EAAe,EAAfA,YACzCuL,EAAyDvL,EAAzDuL,gBAAiBiQ,EAAwCxb,EAAxCwb,OAAQvR,EAAgCjK,EAAhCiK,eAAgBC,EAAgBlK,EAAhBkK,YACjD,EAA4BtB,qBAA5B,mBAAO8V,EAAP,KAAeC,EAAf,KACA,EAAkC/V,oBAAS,GAA3C,mBAAOgW,EAAP,KAAkBC,EAAlB,KACQ5S,EAAgBD,EAAhBC,YACF6S,EAAWvW,mBACXwW,EAAsBxW,mBAEtBgC,EAAeL,EADDD,IACyBO,YACvC0B,EAAa,OAAG3B,QAAH,IAAGA,OAAH,EAAGA,EAAcU,UAC9BzB,EAAiBlF,YAAmBqF,IAAW,SAACpF,GAAD,OAAOA,EAAEiF,kBAE9D7F,qBAAU,WAERgb,EAAUxC,KAAK6C,KAAqB,IAAhB7C,KAAKuC,aACxB,CAACrT,IAEJ1H,qBAAU,WACRkb,GAAa,GACbzB,YAAW,WACTyB,GAAa,KACZ,OACF,CAACH,IAEJ,IAAIxV,EAAG,UAAMnI,EAAN,YAAiBsK,GAIxB,OAFImQ,EAAO9Z,WAAUwH,GAAG,aAAUwV,IAE9BE,EAAkB,KAGpB,qBAAK5f,UAAWa,KAAO4e,MAAvB,SACE,wBACEhW,IAAKqW,EACL/V,UAAQ,EACRC,UAAQ,EACRC,aAAa,aACbgW,QAAS,SAACjY,GACRuE,GAAgB,kBAAM/B,OAEtBuV,EAAoBvW,QAAU,GAEhC0W,cAAe,SAAClY,GAAD,OAAOA,EAAEE,kBACxBiY,aAAc,SAACnY,GAAO,IAAD,GACf,OAAC8X,QAAD,IAACA,GAAD,UAACA,EAAUtW,eAAX,aAAC,EAAmB4W,WACtBL,EAAoBvW,QAAUsW,EAAStW,QAAQ6W,cAGnDC,UAAW,SAACtY,GAELiF,IAAeC,IAKlB4S,EAAStW,QAAQ6W,YAAcN,EAAoBvW,QAGzC,MAEVsW,EAAStW,QAAQ6W,YAAcN,EAAoBvW,WA5BzD,UAgCE,wBACEU,IAAKA,EACLhH,KAAI,gBAAWiH,kBAAQkC,GAAUpG,QAAQ,IAAK,OAlClD,qD,qBCvCFsa,GAAW,GACXC,GAAiB,KAYRC,GAAsB,SAACC,EAASC,GAC3CJ,GAASva,KAAK,CACZ0a,QAASA,EACTC,aAAcA,KAIZC,GAAmB,SAACC,GACxB,IACEC,KAAKC,MAAMF,EAAMxJ,MACjB,IAAM2J,EAAgBF,KAAKC,MAAMF,EAAMxJ,OAAS,GAC1C4J,EAAWD,EAAcN,SAAW,GACpCQ,EAASF,EAAcG,OAAS,GACjCX,KAAgBA,GAAiBK,GACtCO,GAAeH,EAAUC,GACzB,MAAOlZ,MAKLoZ,GAAiB,SAACV,EAASS,GAE/B,IAAME,EACJd,GAASnZ,QAAO,SAACmZ,GAAD,OAAcA,EAASG,UAAYA,MAAY,GAC7DW,GAAcA,EAAW,IAAMA,EAAW,GAAGV,cAC/CU,EAAW,GAAGV,aAAaQ,IAGlBG,GAAc,SAACZ,EAASS,EAAOI,GAC1C,IAAMC,EAAQ,CAAEd,QAASA,EAASS,MAAOA,GAErCI,EACFA,EAAaE,YAAYX,KAAKY,UAAUF,GAAQ,KACvChB,IAAkBA,GAAelI,OAC1CkI,GAAelI,OAAOmJ,YACpBX,KAAKY,UAAUF,GACfhB,GAAemB,QAGjB5d,QAAQ0U,KACN,6E,0CCxCSmJ,OARf,WACE,OACE,qBAAK5hB,UAAWa,KAAOghB,mBAAvB,SACE,cAAC,KAAD,CAAWtZ,MAAM,OAAOkP,KAAK,OAAOqK,SAAS,OC2DpCC,OA1Df,YAA2C,IAAD,IAA1BC,YAA0B,MAAnB,GAAmB,EAAfhhB,EAAe,EAAfA,YACjBuL,EAAwDvL,EAAxDuL,gBAAiBzB,EAAuC9J,EAAvC8J,WAAYqR,EAA2Bnb,EAA3Bmb,eAAgBK,EAAWxb,EAAXwb,OAC/CyF,EAAY1Y,mBACVuF,EAAakT,EAAblT,GAAIuI,EAAS2K,EAAT3K,KACN6K,EAAU3Y,iBAAO8N,GACvB6K,EAAQ1Y,QAAU6N,EAClB,MAA4BzN,qBAA5B,mBAAO8V,EAAP,KAAeC,EAAf,KACMnV,EAAiBlF,YAAmBqF,IAAW,SAACpF,GAAD,OAAOA,EAAEiF,kBAE9D7F,qBAAU,WAoBR,OFlCF4b,GAAW,GACXC,GAAiB,KACjBtc,OAAOie,iBAAiB,UAAWvB,IAAkB,GEcnDwB,GAA8B,qBAAqB,WAEjD,IAAMC,EAAcJ,EAAUzY,QAAQ8Y,eAAiB,KACvDF,GACE,qBLKgB,SAACG,GACvB,IAAMC,EAAU1B,KAAKY,UAAUa,GAC/B,OAAOE,mBAAmBD,GKNpBE,CAASR,EAAQ1Y,SACjB6Y,GAEFD,GAAsB,yBAGxBA,GAA8B,aAAa,SAAC/K,GAC1CtT,QAAQ4e,IAAI,CAAE3K,MAAOX,EAAKW,QAC1BmE,EAAe9E,EAAKW,OACpBzL,GAAgB,kBAAM/B,OACtBM,OAGK,WF5BT5G,OAAO0e,oBAAoB,UAAWhC,OE+BnC,CAACvJ,EAAMvM,EAAYyB,EAAiB4P,IAEvCxX,qBAAU,WAERgb,EAAUxC,KAAK6C,KAAqB,IAAhB7C,KAAKuC,aACxB,CAACrI,EAAMvI,IAEV,IAAI5E,EAAG,UAAM2Y,IAAN,yBAA6C/T,EAA7C,eAIP,OAFI0N,EAAO9Z,WAAUwH,GAAG,aAAUwV,IAE7B5Q,EAGH,wBACEZ,MAAOY,EACP5E,IAAKA,EACLxB,MAAM,OACNF,OAAO,OACPiB,IAAKwY,EACLa,YAAY,IACZ9iB,UAAWa,KAAOkiB,eAVN,cAAC,GAAD,KCyCHC,OAlFf,YAAgC,IAAD,IAAfhiB,EAAe,EAAfA,YACNiK,EAA2BjK,EAA3BiK,eAAgB9J,EAAWH,EAAXG,OAClB8hB,EAAOhY,IACb,EAA4CrB,oBAAS,GAArD,mBAAOsZ,EAAP,KAAuBC,EAAvB,KACMC,EAAU7Z,mBACVa,EAAa9E,YAAmBqF,IAAW,SAACpF,GAAD,OAAOA,EAAE6E,cAqD1D,GAnDAzF,qBAAU,WACHue,IACLG,aAAaD,EAAQ5Z,SACrB4Z,EAAQ5Z,QAAU4U,YAAW,kBAAM+E,GAAkB,KAAQ,OAC5D,CAACD,IAEJve,qBAAU,WACRwe,GAAkB,KACjB,CAACF,EAAKzX,aA2CL0X,EAAgB,OAAO,KAE3B,IAAMI,GACM,OAAVlZ,QAAU,IAAVA,OAAA,EAAAA,EAAYmZ,UAAW,IAAe,OAAVnZ,QAAU,IAAVA,OAAA,EAAAA,EAAYmZ,UAAW,EAC/C,EAAInZ,EAAWmZ,QACf,EAEN,OACE,qBACEvjB,UAAWa,KAAOmiB,KAClB3hB,MAAO,CACLQ,iBACY,OAAVuI,QAAU,IAAVA,GAAA,UAAAA,EAAYoP,aAAZ,eAAmB9X,QAAnB,OAA2BP,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAQY,SAAnC,8CAC2CuhB,EAD3C,kCACsFA,EADtF,2BACmHniB,QADnH,IACmHA,OADnH,EACmHA,EAAQY,QAD3H,mBACsIqI,QADtI,IACsIA,GADtI,UACsIA,EAAYoP,aADlJ,aACsI,EAAmB9X,KADzJ,WAIIa,GARV,SAjDF,WAAuB,IAAD,IACpB,cAAQ0gB,QAAR,IAAQA,OAAR,EAAQA,EAAM5J,cACZ,IAAK,QACH,OACE,cAAC,GAAD,CACEhN,SAAQ,OAAE4W,QAAF,IAAEA,OAAF,EAAEA,EAAM5W,SAChBtK,QAASZ,EAAOY,QAChBuK,UAAS,OAAE2W,QAAF,IAAEA,OAAF,EAAEA,EAAM3W,UACjBtL,YAAaA,IAGnB,IAAK,QACH,MAA0B,aAAlB,OAAJiiB,QAAI,IAAJA,GAAA,UAAAA,EAAMO,aAAN,eAAatgB,MAEb,cAAC,GAAD,CACEyG,IAAKsZ,EAAKO,MAAMC,WAChBzW,SAAQ,OAAEiW,QAAF,IAAEA,OAAF,EAAEA,EAAMjW,SAChBhM,YAAaA,IAGc,YAAlB,OAAJiiB,QAAI,IAAJA,GAAA,UAAAA,EAAMO,aAAN,eAAatgB,MAEpB,cAAC,GAAD,CACEmJ,SAAQ,OAAE4W,QAAF,IAAEA,GAAF,UAAEA,EAAMO,aAAR,aAAE,EAAa9hB,KACvBK,QAASZ,EAAOY,QAChBiL,SAAQ,OAAEiW,QAAF,IAAEA,OAAF,EAAEA,EAAMjW,SAChBhM,YAAaA,IAIV,KAVmC,IAAD,EAY7C,IAAK,OACH,OAAO,cAAC,GAAD,2BAAUiiB,GAAV,IAAgBjiB,YAAaA,KACtC,IAAK,OACH,OAAO,cAAC,GAAD,2BAAUiiB,GAAV,IAAgBjiB,YAAaA,KACtC,QACE,OAAO,sCAAOiiB,QAAP,IAAOA,OAAP,EAAOA,EAAM/f,QAuBrBwgB,M,wCCpDQC,OA/Bf,YAQI,IAPFve,EAOC,EAPDA,SACAwe,EAMC,EANDA,OACA3X,EAKC,EALDA,UACA/C,EAIC,EAJDA,SACAnJ,EAGC,EAHDA,KAGC,IAFDE,eAEC,MAFS,aAET,EACOmB,EADP,EADDJ,YAEgCE,iBAAxBE,QAEFpB,EAAY,CAACa,KAAO8iB,UAC1BC,GAAU5jB,EAAUgG,KAAKnF,KAAO,qBAChCqI,GAAYlJ,EAAUgG,KAAKnF,KAAO,uBAElC,IAAMQ,EAAQuiB,EAAS,CAAEC,gBAAiBziB,GAAY,GAEtD,OACE,sBAAKpB,UAAWA,EAAUyG,KAAK,KAAMpF,MAAOA,EAAOpB,QAAUiJ,EAAqB,aAAVjJ,EAAxE,UACE,cAAC,EAAD,CAAMF,KAAMA,EAAMC,UAAWa,KAAOijB,iBACpC,sBAAM9jB,UAAWa,KAAOkjB,gBAAxB,SAA0C3e,IAC1C,cAAC,EAAD,CACErF,KAAMkM,EAAY,eAAiB,SACnCjM,UAAS,UAAKa,KAAOijB,eAAZ,YACP7X,EAAYpL,KAAOmjB,oBAAsB,U,qBCSpCC,OAjCf,YAAwE,IAA/CC,EAA8C,EAA9CA,cAA+BljB,GAAe,EAA/BmjB,eAA+B,EAAfnjB,aACtD,EAAsC4I,oBAAS,GAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAA0BF,qBAA1B,mBAAO5F,EAAP,KAAcogB,EAAd,KACQjjB,EAAWH,EAAXG,OAUR,OARAwD,qBAAU,WACRmF,GAAe,KACd,CAACoa,IAEJvf,qBAAU,WACRkF,GAAeC,GAAe,KAC7B,CAACD,IAGF,qBAAK7J,UAAWa,KAAOojB,cAAvB,UACIpa,IAAgB7F,GAChB,uBACE+F,UAAQ,EACRC,UAAQ,EACRC,aAAa,aACbiW,cAAe,SAAClY,GAAD,OAAOA,EAAEE,kBACxB4E,QAAS,SAAChJ,GAAD,OAASsgB,EAAStgB,IAL7B,SAOE,wBACEoG,IAAG,UAAK/I,EAAOY,QAAZ,mBAAuBmiB,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAexiB,MACzCwB,KAAI,gBAAWiH,kBAAO,OAAC+Z,QAAD,IAACA,OAAD,EAACA,EAAexiB,MAAMuE,QAAQ,IAAK,YCLxDoe,G,OAAsBC,QCgDpBC,OAhEf,YAAgC,IAAhBvjB,EAAe,EAAfA,YAEZiK,EAMEjK,EANFiK,eACAuZ,EAKExjB,EALFwjB,SACAC,EAIEzjB,EAJFyjB,OACAvZ,EAGElK,EAHFkK,YACAsR,EAEExb,EAFFwb,OACAnR,EACErK,EADFqK,qBAEIqZ,EAAQF,IACRlZ,EAAcL,IAEpB,SAAS0Z,EAAQzhB,GACf,OAAQA,GACN,IAAK,QACL,IAAK,UACH,MAAO,QACT,IAAK,OACH,MAAO,OACT,QACE,MAAO,QAIb,OACE,sBAAKlD,UAAWa,KAAO0jB,KAAvB,WACIlhB,IAAEwB,QAAF,OAAUyG,QAAV,IAAUA,OAAV,EAAUA,EAAasZ,YAAcpI,EAAOqI,UAC5C,cAAC,GAAD,CACEX,cAAa,OAAE5Y,QAAF,IAAEA,OAAF,EAAEA,EAAasZ,UAC5BT,eAAc,OAAE7Y,QAAF,IAAEA,OAAF,EAAEA,EAAaE,WAC7BxK,YAAaA,IAGjB,qBAAKhB,UAAWa,KAAOikB,YAAvB,SACE,cAAC,EAAD,kCAEF,qBAAK9kB,UAAWa,KAAOkkB,WAAvB,SACG1hB,IAAEyD,IAAI4d,GAAO,SAACzB,EAAM3Q,GAAO,IAAD,EACnB0S,EAAoB9Z,EAAW,UAACwZ,EAAMpS,EAAI,UAAX,aAAC,EAAc9G,YAC9CyZ,EAAY/Z,EAAY+X,EAAKzX,YACnC,OACE,cAAC,GAAD,CAEES,UAAWgZ,EAAUhZ,UACrB2X,QAAmB,OAAXtY,QAAW,IAAXA,OAAA,EAAAA,EAAaE,cAAeyX,EAAKzX,WACzCtC,UACG8b,EAAkB/Y,YAClBgZ,EAAUhZ,YACVZ,EAEHtL,KAAM4kB,EAAQ1B,EAAK/f,MACnBjD,QAAS,kBAAMwkB,EAAOnS,EAAI,IAC1BtR,YAAaA,EAXf,SAaGiiB,EAAK/U,OAAL,eAAsBoE,EAAI,IAZtBA,QAiBb,qBAAKtS,UAAWa,KAAOqkB,aAAvB,SAAsCb,S,6CC7DvBc,G,oDACnB,WAAY3gB,GAAQ,IAAD,+BACjB,cAAMA,IAED4gB,cAAgB,EAAKA,cAAcC,KAAnB,iBACrB,EAAKC,mBAAqB,EAAKA,mBAAmBD,KAAxB,iBAJT,E,sDAOnB,WACElL,SAASgI,iBAAiB,YAAaoD,KAAKD,sB,kCAG9C,WACEnL,SAASyI,oBAAoB,YAAa2C,KAAKD,sB,2BAMjD,SAAcE,GACZD,KAAKE,WAAaC,IAASC,YAAYH,K,gCAMzC,SAAmB3E,GACjB,IACE,IAAQ+E,EAAmBL,KAAK/gB,MAAxBohB,eAENL,KAAKE,YACLF,KAAKE,WAAWI,WACfN,KAAKE,WAAWI,SAAShF,EAAMhR,SAE5B+V,GAAgBA,IAEtB,MAAO9hB,O,oBAKX,WACE,IAAMgiB,EAAeC,IAAMC,SAASC,KAAKV,KAAK/gB,MAAMY,UAEpD,OAAO2gB,IAAMG,aAAaJ,EAAc,CAAErc,IAAK8b,KAAKH,oB,GA5CZe,a,SCmM7BC,OAtMf,WACE,MAAgCxc,mBAAS,IAAzC,mBAAOyc,EAAP,KAAiBC,EAAjB,KADkB,4CAkClB,4BAAApU,EAAA,6DACEnO,QAAQ4e,IAAI,wBADd,kBAIS,IAAI4D,SAAQ,SAACC,EAASC,GAE3B,IACEC,EAAYC,IACZH,EAAQE,GACR,MAAO5iB,GAEPC,QAAQC,MAAMF,GACdC,QAAQ0U,KAAR,uCAIF,IAEImO,EADAC,EAAW,EAETC,EAAWC,aAAY,WACvBF,GAJW,IAKbG,cAAcF,GACdL,EAAOG,IAET,IACEF,EAAYC,IACZK,cAAcF,GACdN,EAAQE,GACR,MAAO5iB,GACPC,QAAQC,MAAMF,GACdC,QAAQ0U,KAAR,kBAAwBoO,EAAxB,YAda,EAcb,YACAD,EAAY9iB,EACZ+iB,OAED,SAlCP,4CAlCkB,sBAgGlB,SAASF,IAGP,IAEE,IAAKziB,OAAO+iB,eACV,MAAMrjB,MAAM,iDAGdM,OAAOgjB,WAGP,IAAMC,EAAiBjjB,OAAOkjB,cAAc,4BACtCC,EAAcnjB,OAAOkjB,cAAc,oBACnCE,EAAepjB,OAAOkjB,cAAc,0BACpCG,EAAWrjB,OAAOkjB,cAAc,sBAMtC,OAHAljB,OAAOie,iBAAiB,UAAU,SAACtB,GAAD,OAAW3c,OAAOsjB,gBACpDtjB,OAAOie,iBAAiB,gBAAgB,SAACtB,GAAD,OAAW3c,OAAOsjB,gBAEnD,CACLL,iBACAE,cACAC,eACAC,YAEF,MAAOzjB,GACP,MAAM,IAAIF,MAAME,EAAI4c,SAAW5c,IAgBnC,SAAS2jB,EAAgBH,GACnBA,IAAiBjB,EAASiB,eAC9BpjB,OAAOwjB,cAAc,yBAA0BJ,GAC/CK,IACArB,EAAY,2BAAKD,GAAN,IAAgBiB,mBAoC7B,SAASK,IACPzjB,OAAO0jB,cAGT,MAAO,CACLC,kBArLF,WACE,OAAO,IAAItB,SAAQ,SAACC,EAASC,GAC3B,IAEMqB,EAAiB,GAFP,CAAC,wBAAyB,0BAIlCvkB,SAAQ,SAACwkB,GACf,IAAIC,EAAS7N,SAAS8N,cAAc,UACpCD,EAAO9kB,KAAO,kBACd8kB,EAAOE,OAAQ,EAEfF,EAAO9d,IAAM6d,EACbD,EAAe9hB,KACb,IAAIugB,SAAQ,SAACC,EAASC,GACpBuB,EAAOG,OAAS,WACd3B,SAINrM,SAASE,KAAK+N,YAAYJ,MAG5BzB,QAAQ8B,IAAIP,GACTQ,MAAK,SAACC,GACL/B,OAEDgC,OAAM,SAAC1kB,GAAD,OAAS2iB,EAAO3iB,UA4J3B6iB,kBACA8B,qBA3LgB,2CA4LhBC,aA5DF,WACEjB,EAAgB,cA4DhBkB,UAzDF,WACElB,EAAgB,WAyDhBmB,UAtDF,WACEnB,EAAgB,WAsDhBoB,kBA5CF,SAA2B1B,GACrBA,IAAmBd,EAASc,iBAChCjjB,OAAOwjB,cAAc,2BAA4BP,GACjDQ,IACArB,EAAY,2BAAKD,GAAN,IAAgBc,sBAyC3B2B,eAtCF,SAAwBzB,GACtBA,EAAcvM,GAAcuM,GAC5BA,EAAc0B,oBAAS1B,IACvBA,EAAcvG,KAAKY,UAAU2F,MACThB,EAASgB,cAC7BnjB,OAAOwjB,cAAc,mBAAoBL,GACzCM,IACArB,EAAY,2BAAKD,GAAN,IAAgBgB,mBAgC3B2B,eA7BF,SAAwB3B,GAGtB,OAFAA,EAAcvG,KAAKC,MAAMsG,GACzBA,EAAc4B,sBAAW5B,IA4BzB6B,SAxBF,SAAkBlR,GACZA,IAAUqO,EAASrO,QACvB9T,OAAOwjB,cAAc,wBAAyB1P,EAAQ,KACtD9T,OAAOwjB,cAAc,qBAAsB1P,GAC3C9T,OAAOwjB,cAAc,qBAAsB,GAC3CxjB,OAAOwjB,cAAc,qBAAsB,KAC3CC,IACArB,EAAY,2BAAKD,GAAN,IAAgBrO,eCqOhBmR,OAnZf,WAAsB,IAAD,IACnB,EAOI/C,KANFsC,EADF,EACEA,aACAE,EAFF,EAEEA,UACAD,EAHF,EAGEA,UACAG,EAJF,EAIEA,eACAD,EALF,EAKEA,kBACAK,EANF,EAMEA,SAEIE,EAAgB7f,mBAChB8f,EAA0B9f,mBAuIhC,EAA0B9E,sBArI1B,SAAiBzB,EAAOC,GAAS,IAAD,EAC9B,OAAQA,EAAOC,MACb,IAAK,aACH,IAAM/B,EAAS8B,EAAOE,QACtB,OAAO,2BACFH,GADL,IAEE7B,OAAQ8B,EAAOE,QACfqZ,OAAO,2BACFxZ,EAAMwZ,QADL,IAEJ8M,SAAe,OAANnoB,QAAM,IAANA,GAAA,UAAAA,EAAQujB,aAAR,eAAe5W,SAAU,MAGxC,IAAK,YACH,OAAO,2BACF9K,GADL,IAEEwZ,OAAO,2BACFxZ,EAAMwZ,QADL,IAEJ+M,QACEvmB,EAAMwZ,OAAO+M,QAAUvmB,EAAMwZ,OAAO8M,QAChCtmB,EAAMwZ,OAAO+M,QAAU,EACvBvmB,EAAMwZ,OAAO+M,YAGzB,IAAK,YACH,OAAO,2BACFvmB,GADL,IAEEwZ,OAAO,2BACFxZ,EAAMwZ,QADL,IAEJ+M,QACEvmB,EAAMwZ,OAAO+M,QAAU,EACnBvmB,EAAMwZ,OAAO+M,QAAU,EACvBvmB,EAAMwZ,OAAO+M,YAGzB,IAAK,UACH,OAAO,2BACFvmB,GADL,IAEEwZ,OAAO,2BACFxZ,EAAMwZ,QADL,IAEJ+M,QAAStmB,EAAOE,YAGtB,IAAK,cACH,OAAO,2BACFH,GADL,IAEEwZ,OAAO,2BACFxZ,EAAMwZ,QADL,IAEJqI,UAAW7hB,EAAMwZ,OAAOqI,aAG9B,IAAK,mBACH,OAAO,2BACF7hB,GADL,IAEEqM,SAAUpM,EAAOE,UAErB,IAAK,iBACH,MAA6BF,EAAOE,QAA5BqI,EAAR,EAAQA,WAAY6L,EAApB,EAAoBA,KACdmS,EAAY,2BACbxmB,GADa,IAEhBqM,SAAS,2BACJrM,EAAMqM,UADH,kBAEL7D,EAFK,2BAGDxI,EAAMqM,SAAS7D,IACf6L,OAKT,OADAoS,EAA0BD,GACnBA,EACT,IAAK,iBACH,IAAME,EAAa,2BACd1mB,GADc,IAEjBqM,SAAS,2BACJrM,EAAMqM,UADH,kBAELpM,EAAOE,QAAQqI,WAAa,OAIjC,OADAie,EAA0BC,GACnBA,EACT,IAAK,cACH,OAAO,2BACF1mB,GADL,IAEEwZ,OAAO,2BACFxZ,EAAMwZ,QADL,IAEJmN,SAAS,2BACJ3mB,EAAMwZ,OAAOmN,UADV,kBAEL1mB,EAAOE,QAAQM,IAAMR,EAAOE,QAAQgC,YAI7C,IAAK,kBACH,OAAO,2BACFnC,GADL,IAEEwZ,OAAO,2BACFxZ,EAAMwZ,QADL,IAEJoN,WAAY3mB,EAAOE,YAGzB,IAAK,oBACH,OAAO,2BACFH,GADL,IAEEwZ,OAAO,2BACFxZ,EAAMwZ,QADL,IAEJqN,aAAc5mB,EAAOE,YAG3B,IAAK,gBACH,OAAO,2BACFH,GADL,IAEEwZ,OAAO,2BACFxZ,EAAMwZ,QADL,IAEJ9Z,SAAUO,EAAOE,YAGvB,QACEoZ,EAAY,IAAI3Y,MAAJ,sCAAyCX,EAAOC,WAI7C,CACnBsZ,OAAQ,CACNqI,UAAU,EACV0E,QAAS,EACTD,QAAS,EACTM,YAAY,EACZC,cAAc,EACdF,SAAU,CACRrN,gBAAiB,qBAGrBjN,SAAU,GACVlO,OAAQ,KAEV,mBAAO6B,EAAP,KAAc0B,EAAd,KAMA,SAASzD,IACPyD,EAAS,CAAExB,KAAM,gBAenB,SAAS+H,IAAkB,IAAD,EACxB,OAAO5H,IAAEK,IAAIV,EAAM7B,OAAZ,iBAA6B,UAAA6B,EAAMwZ,cAAN,eAAc+M,SAAU,EAArD,OAA8D,GAGvE,IAAM/E,EAAWsF,uBAAY,WAAO,IAAD,EACjC,OAAO,UAAA9mB,EAAM7B,cAAN,eAAcujB,QAAS,KAC7B,CAAC1hB,EAAM7B,SAcJ+J,EAAc4e,uBAClB,SAACte,GACC,OAAOnI,IAAEK,IAAIV,EAAMqM,SAAU7D,IAAe,KAE9C,CAACxI,EAAMqM,WAOT,SAAS2M,EAAcxQ,EAAY6L,GACjC3S,EAAS,CAAExB,KAAM,iBAAkBC,QAAS,CAAEqI,aAAY6L,UA0C5D,SAASjM,IACP,OAAOpI,EAAMwZ,OAAO+M,UAAYvmB,EAAMwZ,OAAO8M,QAG/C,SAASG,EAA0BD,GAEjC,IACE,IAAKA,EAAahN,OAAOqN,aAAc,CAAC,IAAD,EAErC,IAAKR,EAAyB,QAC9B,UAAAA,EAAwB7f,eAAxB,eAAiCugB,SAC/BV,EAAwB7f,QAAQugB,SAClCV,EAAwB7f,QAAUnG,IAAE2mB,UAClC,kBAAMlB,EAAeU,EAAana,YAClC,KAEFga,EAAwB7f,WAE1B,MAAO1F,GACPyY,EAAYzY,IAIhB,IAAMmmB,EAAoBH,uBAAY,WACpC,IAAMpF,EAAQF,IACV0F,EAAiB,EAKrB,OAJA7mB,IAAEE,QAAQmhB,GAAO,YAAqB,IAAlBlZ,EAAiB,EAAjBA,YAEJ,IADQN,EAAYM,GAA1BS,WACcie,OAEjBA,IACN,CAAC1F,EAAUtZ,IAORif,EAAoBL,uBAAY,WACpC,QAAS5e,EAAYlI,EAAM7B,OAAO2N,IAAI7C,YACrC,CAACf,EAAalI,EAAM7B,OAAO2N,KAExBsb,EAAoBN,uBAAY,WACpC,IAAIK,IAAJ,EACCnnB,EAAMwZ,OAAOqN,cACZQ,IAAMC,QAAQtnB,EAAMwZ,OAAOmN,SAASrN,iBAEtC,MAAsBtZ,EAAM7B,OAApB2N,EAAR,EAAQA,GAAI4V,EAAZ,EAAYA,MAKZ,GAHA1I,EAAclN,EADD,CAAE7C,WAAW,KAIrBjJ,EAAMwZ,OAAOqN,aAChBnB,MAG4BrlB,IAAEwT,KAC5B6N,GACA,gBAAGrL,EAAH,EAAGA,aAAH,MAAuC,SAAjBA,GAA4C,SAAjBA,MAI3BsP,OAEzB,CACDwB,EACAzB,EACAC,EACA3lB,EAAM7B,OACN6B,EAAMwZ,OAAOqN,aACb7mB,EAAMwZ,OAAOmN,SAASrN,kBA+BlBjR,EACwC,UAAvC,OAALrI,QAAK,IAALA,GAAA,UAAAA,EAAO7B,cAAP,mBAAe6L,gBAAf,eAAyBud,gBAmB3B,SAAShO,EAAYzY,GACnBC,QAAQC,MAAMF,GACdumB,IAAMrmB,MAAMF,EAAI4c,SAAW5c,GAG7B,OArBAa,qBAAU,WACR,IACE,GAA6B,IAAzB3B,EAAMwZ,OAAO+M,QAAe,QAC/BvmB,EAAMwZ,OAAOqN,cACZhB,EAAkB/H,KAAKY,UAAU,CAAE6H,QAASvmB,EAAMwZ,OAAO+M,WAC3D,MAAOzlB,GACPyY,EAAYzY,MAEb,CAAC+kB,EAAmB7lB,EAAMwZ,OAAO+M,QAASvmB,EAAMwZ,OAAOqN,eAE1DllB,qBAAU,WAAO,IAAD,EACVslB,OAAiB,UAAOjnB,EAAMwZ,cAAb,aAAO,EAAc8M,UACxCc,MAED,CAACH,EAAmBG,EAAmBpnB,EAAMwZ,SAOzC,CACLA,OAAQxZ,EAAMwZ,OACdrb,OAAQ6B,EAAM7B,OACdkO,SAAUrM,EAAMqM,SAChBmb,eAhOF,SAAwBrpB,GACtBuD,EAAS,CAAExB,KAAM,aAAcC,QAAShC,KAgOxCF,aACA6J,WA1NF,WACEpG,EAAS,CAAExB,KAAM,eA0NjB6H,WAvNF,WACErG,EAAS,CAAExB,KAAM,eAuNjBuhB,OApNF,SAAgBrT,GACd1M,EAAS,CAAExB,KAAM,UAAWC,QAASiO,KAoNrCnG,iBACAuZ,WACAtjB,eA3MF,WAA2B,IAAD,EACxB,OAAO,UAAA8B,EAAM7B,cAAN,eAAciI,cAAe,IA2MpC8B,cACA8Q,gBACAyO,gBA3LF,SAAyBpT,GACvB3S,EAAS,CAAExB,KAAM,mBAAoBC,QAASkU,KA2L9C4E,cApLF,SAAuBzQ,GACrB9G,EAAS,CAAExB,KAAM,iBAAkBC,QAAS,CAAEqI,iBAoL9Ckf,0BA7KF,SAAmChK,GAJnC,IAAoBjd,EAAK0B,EAAL1B,EAMhB,kBANqB0B,EAOrBub,GAAW1d,EAAMwZ,OAAOmN,SAASrN,gBANnC5X,EAAS,CAAExB,KAAM,cAAeC,QAAS,CAAEM,MAAK0B,YAiLhD+W,cAvKF,WAGEF,EAFuB/Q,IAAfO,WACK,CAAEkR,SAAS,KAsKxBnQ,gBAlKF,WAA+C,IAAD,EAArBoe,EAAqB,uDAAV,aAClC,EAAuB1f,IAAfO,EAAR,EAAQA,WAGFof,EAAkB,UAAG1f,EAAYM,UAAf,aAAG,EAAyBS,UACpD,IAAI2e,EAAJ,CAEA,IAAMvT,EAAO,CAAEpL,WAAW,GAC1B+P,EAAcxQ,EAAY6L,GAG1BsT,GAAgC,oBAAbA,IAA4Bvf,KAAkBuf,MAwJjE3f,oBA/MF,WAAgC,IAAD,EAC7B,OAAOmS,KAAKC,MAAO6M,KAAiB,UAAKjnB,EAAMwZ,cAAX,aAAK,EAAc8M,SAAW,MA+MlEuB,cAjHF,SAAuBvf,MACC,OAACA,QAAD,IAACA,OAAD,EAACA,EAAasZ,aACf5hB,EAAMwZ,OAAOqI,UAAU5jB,KAgH5C6pB,gBA1DF,SAAyBC,GACvBrmB,EAAS,CAAExB,KAAM,oBAAqBC,QAAS4nB,KA0D/CC,cA/DF,SAAuBC,GACrBvmB,EAAS,CAAExB,KAAM,kBAAmBC,QAAS8nB,KA+D7CC,YAxDF,SAAqBxoB,GACnBgC,EAAS,CAAExB,KAAM,gBAAiBC,QAAST,KAwD3C6Z,cACAJ,eA9EF,SAAwBnE,IACrBhV,EAAMwZ,OAAOqN,cAAgBX,EAASlR,IA8EvCqE,gBA3EF,YACGrZ,EAAMwZ,OAAOqN,cAAgBlB,KA2E9BvM,gBAxEF,YACGpZ,EAAMwZ,OAAOqN,cAAgBjB,KAwE9Bzd,cA9JF,WACE,OAAgC,IAAzBnI,EAAMwZ,OAAO+M,SA8JpBne,eACA+f,iBA3DF,SAA0BC,GACxBhC,EAAc5f,QAAU4hB,GA2DxB9O,gBAAiB6N,IACjB9e,yBCzUWggB,OA1Ef,YASI,IAAD,MARDlqB,cAQC,MARQ,GAQR,MAPDooB,eAOC,MAPS,EAOT,EAMD,EAAqCpoB,EAA7BujB,aAAR,MAAgB,GAAhB,IAAqCvjB,EAAjBY,eAApB,MAA8B,GAA9B,EACA,EAA0B6H,mBAAsB,IAAhD,mBAAO0hB,EAAP,KAAcC,EAAd,KAGA5mB,qBAAU,WACR,IAAM6mB,EAA4B,GAClCnoB,IAAEE,QAAQmhB,GAAO,WAAqB,IAApBzB,EAAmB,uDAAZ,GAAI7R,EAAQ,uCAC/B6R,EAAK5W,UACPmf,EAAaxlB,KAAK,CAChBylB,QAASra,EACTzH,IAAI,GAAD,OAAK5H,EAAL,YAAgBkhB,EAAK5W,eAO1BhJ,IAAEwB,QAAQ2mB,IAEdD,EAASC,KACR,CAACzpB,EAAS2iB,IAEb,IAAMgH,EAAgB7Y,mBACpB,kBACExP,IAAE+D,OACAkkB,GACA,SAACK,GAAD,OACEA,EAAEF,QAAUlC,EAAO,GAAkBoC,EAAEF,QAAUlC,EAAO,OAE9D,CAAC+B,EAAO/B,IAOV,SAASqC,EAAT,GAAsE,IAArD1hB,EAAoD,EAApDA,IAAK2C,EAA+C,EAA/CA,OACpB,OAAK3C,EAKH,aADA,CACA,OACEA,IAAKA,EACL2C,OAAQ,WAENA,GAAUA,EAAO3C,MARd,KAcX,OACE,qBAAK7I,MAAO,CAAEuL,QAAS,QAAvB,SACE,cAACgf,EAAD,CAAO1hB,IAAG,UAAEwhB,EAAc,UAAhB,aAAE,EAAkB/hB,IAAKkD,OAtBvC,SAAgC3C,GAC9BqhB,EAASloB,IAAE+D,OAAOkkB,GAAO,SAACK,GAAD,OAAOA,EAAEhiB,MAAQO,Y,SC1B9C,SAAS2hB,GAAarnB,GAAQ,IAAD,EAEzBrD,EAOEqD,EAPFrD,OACA0pB,EAMErmB,EANFqmB,cACAtB,EAKE/kB,EALF+kB,QACAM,EAIErlB,EAJFqlB,aAJF,EAQIrlB,EAHF9B,gBALF,SAMEsC,EAEER,EAFFQ,aACA6H,EACErI,EADFqI,OAEI7L,EAAcmoB,KAElB3M,EAWExb,EAXFwb,OACAvb,EAUED,EAVFC,WACAupB,EASExpB,EATFwpB,eACAvf,EAQEjK,EARFiK,eACAwZ,EAOEzjB,EAPFyjB,OACAuG,EAMEhqB,EANFgqB,cACAF,EAKE9pB,EALF8pB,gBACAL,EAIEzpB,EAJFypB,gBACAlO,EAGEvb,EAHFub,YACAmO,EAEE1pB,EAFF0pB,0BACAQ,EACElqB,EADFkqB,YAEI5f,EAAcL,IACd6gB,EAAkB/R,GAAYzO,GACpC,EAAiD8a,KAAzCqC,EAAR,EAAQA,qBAAsBO,EAA9B,EAA8BA,eAiE9B,SAAS1D,IfnHFtL,KAAoBtR,MAAQ,MeoHjB,OAAM8T,QAAN,IAAMA,OAAN,EAAMA,EAAQqI,WAAY5jB,IAwB5C,OAxFA0D,qBAAU,WAAM,4CAed,gCAAAuN,EAAA,+EAG4BuW,IAH5B,OAGU/B,EAHV,OAII3iB,QAAQ4e,IAAI,kCAAmC+D,GAE1CrjB,IAAEwB,QAAQ6hB,EAAUW,cACvBoD,EAAgBzB,EAAetC,EAAUW,cAC3C2D,GAAc,GAET3nB,IAAEwB,QAAQ6hB,EAAUS,kBACjB4E,EADkC,UAChBjL,KAAKC,MAAM2F,EAAUS,uBADL,aAChB,EAAsCoC,SACxC,GAChBrlB,OAAO8nB,QAAQ,qCACjBvH,EAAOsH,GAdjB,kDAmBIxP,EAAY,EAAD,IACXuO,GAAgB,GApBpB,2DAfc,sBAEdI,IAAcxoB,GAGdmK,GAAUA,EAAO,CAAE5K,YAAQO,UAAWJ,KAAOI,YAGzCqnB,EACFiB,GAAgB,GATJ,mCAadmB,KAyBC,IAEHtnB,qBAAU,WACR6lB,EAAerpB,KACd,CAACA,IAEJwD,qBAAU,WAGL2G,GACAwgB,GACDxgB,EAAYE,aAAesgB,EAAgBtgB,YAM7Cqf,GAAiBA,EAAcvf,GAC/BtK,EAAY6pB,cAAcvf,KALT,OAAXA,QAAW,IAAXA,OAAA,EAAAA,EAAasZ,cAAa,OAACpI,QAAD,IAACA,OAAD,EAACA,EAAQqI,WAAU5jB,MAMlD,CAACqK,IAEJ3G,qBAAU,YACP6Y,MAAM+L,IAAY9E,EAAO8E,KACzB,CAACA,MAyBApoB,IAAWqb,EAAOoN,YAAcpN,EAAOqN,cAKzC,cAACtlB,EAAD,CACEtC,OAAQA,KACRK,SAAQ,OAAEnB,QAAF,IAAEA,OAAF,EAAEA,EAAQmB,SAClBE,UAAWJ,KAAOI,UAClBwC,aAAcA,EACdJ,kBAfJ,SAA+BtC,GAC7BooB,EAA0BrnB,IAAEK,IAAIzB,KAAN,2BAAkCK,MAS5D,SAOE,cAACsI,GAAD,UACE,sBAAK5K,UAAWa,IAAOgrB,aAAvB,UACE,cAAC,IAAD,CAAgBK,WAAY9f,OAC1B1J,GACA,cAAC,GAAD,CAAWvB,OAAQA,EAAQooB,QAAO,OAAEvoB,QAAF,IAAEA,GAAF,UAAEA,EAAawb,cAAf,aAAE,EAAqB+M,UAnCnE,WACE,IAAMvpB,EAAY,CAACa,IAAOsrB,oBAI1B,QAFA,OAAC3P,QAAD,IAACA,OAAD,EAACA,EAAQqI,WAAY7kB,EAAUgG,KAAKnF,IAAO,+BAGzC,cAAC,GAAD,CAAgB+kB,eAAgBN,EAAhC,SACE,qBAAKtlB,UAAWA,EAAUyG,KAAK,KAA/B,SACE,cAAC,GAAD,CAAMzF,YAAaA,QA6BlBorB,GACD,sBAAKpsB,UAAWa,IAAOwrB,mBAAvB,UACE,cAAC,EAAD,CAAQrrB,YAAaA,IACrB,cAAC,GAAD,CAAMA,YAAaA,IACnB,cAAC,GAAD,CAAWA,YAAaA,cApBL,cAAC,GAAD,IA4BhBmH,sBAAK0jB,ICvILS,OA3Bf,WACE,MAA4B1iB,mBAAS,IAArC,mBAAOzI,EAAP,KAAeorB,EAAf,KACA,EAAoC3iB,oBAAS,GAA7C,mBAAO4iB,EAAP,KAAmBC,EAAnB,KAYA,OAVA9nB,qBAAU,WAAM,4CACd,4BAAAuN,EAAA,sEACoBwa,IAAMhpB,IAAN,oBADpB,WACQ6kB,EADR,QAEWlR,KAFX,iDAGEkV,EAAUhE,EAAIlR,MACdoV,GAAc,GAJhB,4CADc,uBAAC,WAAD,wBAOdE,KACC,IAECH,EAAmB,cAAC,GAAD,IAGrB,qBAAKxsB,UAAU,MAAf,SACE,cAAC,GAAD,CACEmB,OAAQA,EAER6D,aAAY,OAAE7D,QAAF,IAAEA,OAAF,EAAEA,EAAQ6D,kBCdf4nB,GAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBxE,MAAK,YAAkD,IAA/CyE,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdnH,IAAS0H,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFlT,SAASmT,eAAe,SAM1BV,M,mBCfAhtB,EAAOC,QAAU,CAAC,KAAO,mBAAmB,OAAS,qBAAqB,eAAiB,6BAA6B,aAAe,2BAA2B,YAAc,0BAA0B,0BAA4B,wCAAwC,aAAe,2BAA2B,qBAAuB,mCAAmC,2BAA6B,yCAAyC,mCAAqC,iDAAiD,mCAAqC,iDAAiD,iCAAmC,iD,mBCAvoBD,EAAOC,QAAU,CAAC,SAAW,gCAAgC,gBAAkB,uCAAuC,qBAAuB,4CAA4C,mBAAqB,0CAA0C,qBAAuB,4CAA4C,8BAAgC,qDAAqD,iCAAmC,wDAAwD,4BAA8B,mDAAmD,8BAAgC,qDAAqD,KAAO,8B,mBCAxpBD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,iBAAmB,oCAAoC,sBAAwB,yCAAyC,oBAAsB,uCAAuC,yBAA2B,4CAA4C,QAAU,2BAA2B,QAAU,2BAA2B,kBAAoB,qCAAqC,sBAAwB,yCAAyC,OAAS,4B,mBCApgBD,EAAOC,QAAU,CAAC,YAAc,mCAAmC,KAAO,4BAA4B,cAAgB,qCAAqC,eAAiB,sCAAsC,mBAAqB,0CAA0C,QAAU,+BAA+B,cAAgB,qCAAqC,gBAAkB,yC,mBCAjYD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,mBAAmB,mCAAmC,qBAAqB,qCAAqC,eAAiB,iCAAiC,gBAAkB,kCAAkC,oBAAsB,sCAAsC,OAAS,2B,mBCAnVD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,aAAe,6BAA6B,aAAe,6BAA6B,cAAgB,8BAA8B,cAAgB,8BAA8B,aAAe,6BAA6B,OAAS,yB,mBCA3RD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,eAAiB,iCAAiC,eAAiB,iCAAiC,eAAiB,iCAAiC,YAAY,4BAA4B,cAAc,8BAA8B,OAAS,2B,mBCA3SD,EAAOC,QAAU,CAAC,kBAAoB,oCAAoC,mBAAqB,qCAAqC,mBAAqB,qCAAqC,gBAAkB,kCAAkC,OAAS,2B,mBCA3PD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,QAAU,0BAA0B,UAAY,4BAA4B,QAAU,0BAA0B,cAAgB,gCAAgC,OAAS,2B,kxLCAjOD,EAAOC,QAAU,CAAC,aAAe,mCAAmC,mBAAqB,yCAAyC,mBAAqB,yCAAyC,6BAA6B,mD,mBCA7ND,EAAOC,QAAU,CAAC,kBAAoB,oCAAoC,kBAAoB,sC,mBCA9FD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,YAAY,0BAA0B,cAAc,4BAA4B,aAAa,2BAA2B,OAAS,yB,mBCAnLD,EAAOC,QAAU,CAAC,cAAgB,qCAAqC,yBAA2B,gDAAgD,qBAAuB,4CAA4C,oBAAsB,2CAA2C,OAAS,gC,mBCA/RD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,YAAY,yBAAyB,cAAc,2BAA2B,eAAe,4BAA4B,OAAS,wB,mBCAjLD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,eAAiB,8BAA8B,iBAAmB,gCAAgC,oBAAsB,mCAAmC,OAAS,wB,mBCAnND,EAAOC,QAAU,CAAC,KAAO,mBAAmB,YAAc,0BAA0B,WAAa,yBAAyB,aAAe,2BAA2B,OAAS,uB,mBCA7KD,EAAOC,QAAU,CAAC,mBAAqB,kCAAkC,4BAA8B,2CAA2C,yCAA2C,0D,mBCA7LD,EAAOC,QAAU,CAAC,gBAAkB,8BAA8B,OAAS,uB,mBCA3ED,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,OAAS,iCAAiC,2BAA6B,qDAAqD,QAAU,oC,mBCAtND,EAAOC,QAAU,CAAC,eAAiB,uCAAuC,sBAAwB,gD,mBCAlGD,EAAOC,QAAU,CAAC,KAAO,uBAAuB,MAAQ,2B","file":"static/js/main.dfe70c0f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Audio\":\"Audio_Audio__3ArMX\",\"fadein\":\"Audio_fadein__1N7vR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Main\":\"Main_Main__1hvAK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Slide\":\"Slide_Slide__gTOmP\",\"fadein\":\"Slide_fadein__3cYmG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Youtube\":\"Youtube_Youtube__3wNeo\",\"fadein\":\"Youtube_fadein__2tLC0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FillInTheBlanks\":\"FillInTheBlanks_FillInTheBlanks__mKpzo\",\"fadein\":\"FillInTheBlanks_fadein__11y9B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Video\":\"Video_Video__R31ab\",\"fadein\":\"Video_fadein__1Bb0x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Game\":\"Game_Game__3C5yo\",\"fadein\":\"Game_fadein__3KgUi\",\"Game__iframe\":\"Game_Game__iframe__2NHmX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Spinner__container\":\"Spinner_Spinner__container__14khH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"VideoPlayback\":\"VideoPlayback_VideoPlayback__3O2xE\",\"fadein\":\"VideoPlayback_fadein__36idq\"};","import React from 'react';\n\nimport styles from './Icon.module.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport {\n  faCoffee,\n  faBars,\n  faCheckCircle,\n  faCircle,\n  faTimesCircle,\n  faVideo,\n  faEdit,\n  faTrash,\n  faTrashAlt,\n} from '@fortawesome/free-solid-svg-icons';\n\nfunction Icon({ icon, className = '', onClick }) {\n  library.add(\n    faCoffee,\n    faBars,\n    faCheckCircle,\n    faCircle,\n    faTimesCircle,\n    faVideo,\n    faEdit,\n    faTrash,\n    faTrashAlt,\n    faTimesCircle\n  );\n\n  function handleIconClick() {\n    onClick && onClick();\n  }\n\n  return (\n    <div\n      className={`${styles.Icon} ${\n        onClick ? styles.Icon__clickable : ''\n      } ${className}`}\n      onClick={handleIconClick}\n    >\n      <FontAwesomeIcon icon={icon} />\n    </div>\n  );\n}\n\nexport default Icon;\n","import React from 'react';\n\nimport styles from './Header.module.scss';\nimport Icon from '../UI/Icon/Icon';\n\nfunction Header({ globalState }) {\n  const { toggleMenu, getColorScheme, course } = globalState;\n  const { primary } = getColorScheme();\n\n  return (\n    <div className={styles.Header} style={{ backgroundColor: primary }}>\n      <div className={styles.Header__left}>\n        <Icon\n          icon=\"bars\"\n          onClick={toggleMenu}\n          className={styles.Header__icon}\n        />\n        <span className={styles.Header__title}>{course?.name}</span>\n      </div>\n      <div className={styles.Header__right}>\n        <div\n          className={styles.Header__logo}\n          style={{\n            backgroundImage: course?.logo?.name\n              ? `url('${course.baseURL}/${course?.logo?.name}')`\n              : null,\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Header;\n","// useReducer with Typescript:\n// https://github.com/hswolff/youtube/blob/master/videos/why-i-love-usereducer/src/LoginUseReducerTypeScript.tsx\n\nimport React, { useReducer, ReactNode, useEffect } from 'react';\nimport { createContext } from 'use-context-selector';\nimport _ from 'lodash';\n\nconst initialState: ILabelState = {\n  labels: {},\n  initialLabels: {}, // if reset needed\n  wildcards: {},\n  config: {\n    defaultLanguage: 'en-US',\n    language: undefined,\n    languages: ['en-US', 'pt-BR', 'es-ES'],\n  },\n  editing: {\n    editMode: false,\n    untrackedLabels: {},\n  },\n  setLanguage: () => {},\n  toggleEditMode: () => {},\n  addUntrackedLabel: () => {},\n};\n\ntype ILanguage = 'en-US' | 'pt-BR' | 'es-ES' | string;\n\ntype ILabelState = {\n  labels: object;\n  initialLabels: object;\n  wildcards: object;\n  config: {\n    defaultLanguage: ILanguage;\n    language?: ILanguage;\n    languages: ILanguage[];\n  };\n  editing: {\n    editMode: boolean;\n    untrackedLabels: object;\n  };\n  setLanguage: Function;\n  toggleEditMode: Function;\n  addUntrackedLabel: Function;\n};\n\ntype ILabelAction =\n  | { type: 'SET_LABELS'; payload: object }\n  | { type: 'APPEND_LABELS'; payload: object }\n  | { type: 'RESET_LABELS' }\n  | { type: 'SET_WILDCARDS'; payload: object }\n  | { type: 'SET_LANGUAGE'; payload: ILanguage }\n  | { type: 'SET_LANGUAGES'; payload: ILanguage[] }\n  | { type: 'DETECT_LANGUAGE' }\n  | { type: 'TOGGLE_EDIT_MODE' }\n  | { type: 'ADD_UNTRACKED_LABEL'; payload: { key: string; text: string } };\n\nfunction labelReducer(state: ILabelState, action: ILabelAction): ILabelState {\n  switch (action.type) {\n    case 'SET_LABELS':\n      return {\n        ...state,\n        labels: action.payload,\n        initialLabels: action.payload,\n      };\n    case 'APPEND_LABELS':\n      let updatedLabels = _.cloneDeep(state.initialLabels);\n\n      try {\n        _.forEach(_.keys(action.payload), (key) => {\n          _.forEach(_.keys(_.get(action.payload, key)), (language) => {\n            if (!_.includes(state.config.languages, language))\n              throw new Error(`Language invalid: ${language}`);\n            _.set(\n              updatedLabels,\n              `${key}.${language}`,\n              _.get(action.payload, `${key}.${language}`)\n            );\n          });\n        });\n      } catch (err) {\n        console.error(err);\n      }\n\n      return {\n        ...state,\n        labels: updatedLabels,\n      };\n    case 'RESET_LABELS':\n      return {\n        ...state,\n        labels: state.initialLabels,\n      };\n    case 'SET_WILDCARDS':\n      return {\n        ...state,\n        wildcards: action.payload,\n      };\n    case 'SET_LANGUAGE':\n      return {\n        ...state,\n        config: {\n          ...state.config,\n          language: action.payload,\n        },\n      };\n    case 'SET_LANGUAGES':\n      return {\n        ...state,\n        config: {\n          ...state.config,\n          languages: action.payload,\n        },\n      };\n    case 'DETECT_LANGUAGE':\n      const browserLanguage = window?.navigator?.language;\n      // check if browser language is an available language\n      return {\n        ...state,\n        config: {\n          ...state.config,\n          // @ts-ignore\n          language: _.includes(state.config.languages, browserLanguage)\n            ? browserLanguage\n            : state.config.defaultLanguage,\n        },\n      };\n    case 'TOGGLE_EDIT_MODE':\n      return {\n        ...state,\n        editing: {\n          ...state.editing,\n          editMode: !state.editing.editMode,\n        },\n      };\n    case 'ADD_UNTRACKED_LABEL':\n      const { key, text } = action.payload;\n      return {\n        ...state,\n        editing: {\n          ...state.editing,\n          untrackedLabels: {\n            ...state.editing.untrackedLabels,\n            [key]: {\n              [state.config.languages[0]]: text,\n              [state.config.languages[1]]: null,\n              [state.config.languages[2]]: null,\n            },\n          },\n        },\n      };\n    default:\n      return state;\n  }\n}\n\nexport const LabelContext = createContext(initialState as ILabelState);\n\nexport default function LabelProvider(props: {\n  children?: ReactNode;\n  labels?: object;\n  wildcards?: object;\n  customLabels?: object;\n  language?: ILanguage;\n  languages?: ILanguage[];\n  onLanguageChanged?: Function;\n}) {\n  const [state, dispatch] = useReducer(labelReducer, initialState);\n\n  // Actions\n  // reminder: always dispatch; otherwise, is a SELECTOR, not an ACTION\n  function setLabels(labels = {} as object) {\n    dispatch({\n      type: 'SET_LABELS',\n      payload: labels,\n    });\n  }\n\n  function appendLabels(labels = {} as object) {\n    dispatch({\n      type: 'APPEND_LABELS',\n      payload: labels,\n    });\n  }\n\n  function resetLabels() {\n    dispatch({\n      type: 'RESET_LABELS',\n    });\n  }\n\n  function setWildcards(wildcards = {} as object) {\n    dispatch({\n      type: 'SET_WILDCARDS',\n      payload: wildcards,\n    });\n  }\n\n  function setLanguage(language: ILanguage) {\n    dispatch({\n      type: 'SET_LANGUAGE',\n      payload: language,\n    });\n  }\n\n  function setLanguages(languages: ILanguage[]) {\n    dispatch({\n      type: 'SET_LANGUAGES',\n      payload: languages,\n    });\n  }\n\n  function detectLanguage() {\n    dispatch({\n      type: 'DETECT_LANGUAGE',\n    });\n  }\n\n  function toggleEditMode() {\n    dispatch({\n      type: 'TOGGLE_EDIT_MODE',\n    });\n  }\n\n  function addUntrackedLabel(key: string, text: string) {\n    dispatch({\n      type: 'ADD_UNTRACKED_LABEL',\n      payload: { key, text },\n    });\n  }\n\n  useEffect(() => {\n    !props.language && detectLanguage();\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    if (props.language) {\n      setLanguage(props.language);\n      props.onLanguageChanged && props.onLanguageChanged(props.language);\n    }\n  }, [props.language]); // eslint-disable-line\n\n  useEffect(() => {\n    props.languages && setLanguages(props.languages);\n  }, [props.languages]);\n\n  useEffect(() => {\n    !_.isEmpty(props.labels) && setLabels(props.labels);\n  }, [props.labels]);\n\n  useEffect(() => {\n    !_.isEmpty(props.wildcards) && setWildcards(props.wildcards);\n  }, [props.wildcards]);\n\n  useEffect(() => {\n    if (!_.isEmpty(props.customLabels)) {\n      appendLabels(props.customLabels);\n    } else {\n      resetLabels();\n    }\n  }, [props.customLabels]);\n\n  return (\n    <LabelContext.Provider\n      value={{\n        ...state,\n        setLanguage,\n        addUntrackedLabel,\n        toggleEditMode,\n      }}\n    >\n      {props.children}\n    </LabelContext.Provider>\n  );\n}\n","import { ReactNode } from 'react';\nimport slugify from 'slugify';\nimport { useContextSelector } from 'use-context-selector';\nimport _ from 'lodash';\nimport ReactHtmlParser from 'react-html-parser';\n\nimport { LabelContext } from './LabelContext';\n\nfunction useLabel() {\n  const { config, labels, wildcards } = useContextSelector(\n    LabelContext,\n    (c) => c\n  );\n\n  type IOptions = {\n    additionalWildcards?: object;\n  };\n\n  function label(text: string | ReactNode, options?: IOptions) {\n    return getLabel(text, options) || text;\n  }\n\n  function plainLabel(text: string | ReactNode, options?: IOptions): string {\n    const _label = label(text, options);\n    return Array.isArray(_label) ? _label.join('') : _label;\n  }\n\n  function getLabel(text: string | ReactNode, options?: IOptions) {\n    const defaultLanguage = config.language || config.defaultLanguage;\n    const key = getLabelKey(text);\n\n    let label;\n    try {\n      // get label from database (labels.json)\n      // for some reasons, must use || because sometimes comes undefined with _.get\n      label =\n        _.get(labels, `${key}.${defaultLanguage}`) ||\n        // @ts-ignore\n        labels[key][defaultLanguage];\n\n      // replace wildcards (if exists)\n      label = replaceWildcards(label, {\n        additionalWildcards: options?.additionalWildcards,\n      });\n    } catch (err) {}\n    return !!label ? ReactHtmlParser(label) : label;\n  }\n\n  function getLabelKey(text: string | ReactNode): string {\n    function replaceAll(text: string, search: string, replace: string): string {\n      return text.split(search).join(replace);\n    }\n\n    function sanitizeKey(text: string): string {\n      //const options = { remove: /[*+~.()'\"!:@<>]/g, strict: true };\n      const options = {};\n\n      text = text.replace(/<\\/?[^>]+(>|$)/g, ''); // remove html tags\n      text = slugify(text, options);\n      text = replaceAll(text, '\"', ''); // remove \"\n      text = replaceAll(text, '.', '_'); // replace . for _\n      text = replaceAll(text, ':', '_'); // replace : for _\n      text = replaceAll(text, '!', '_'); // replace ! for _\n      text = replaceAll(text, '?', '_'); // replace ? for _\n      return text;\n    }\n\n    try {\n      // @ts-ignore\n      return sanitizeKey(text);\n    } catch (err) {\n      // goes here if probably has JSX code\n      try {\n        let convertedText = jsxToString(text);\n        return sanitizeKey(convertedText);\n      } catch (err) {\n        // @ts-ignore\n        return text;\n      }\n    }\n  }\n\n  function replaceWildcards(text: string, options: IOptions) {\n    const { additionalWildcards = {} } = options;\n    if (!hasWildcards(text)) return text;\n    const allWildcards: object = { ...wildcards, ...additionalWildcards };\n    const wildcardsFound = getWildcards(text, { additionalWildcards });\n    _.forEach(wildcardsFound, (wildcard) => {\n      text = _.replace(text, wildcard, _.get(allWildcards, wildcard));\n    });\n    return text;\n  }\n\n  function hasWildcards(text: string): boolean {\n    return _.includes(text, '[[');\n  }\n\n  function getWildcards(text: string, options: any = {}) {\n    const { additionalWildcards = {} } = options;\n    const allWildcards = { ...wildcards, ...additionalWildcards };\n    const wildcardsFound: string[] = [];\n    _.forEach(_.keys(allWildcards), (wildcard) => {\n      while (_.includes(text, wildcard)) {\n        wildcardsFound.push(wildcard);\n        text = _.replace(text, wildcard, '');\n      }\n    });\n    return wildcardsFound;\n  }\n\n  function jsxToString(jsx: any): string {\n    try {\n      const string = _.map(Array.isArray(jsx) ? jsx : [jsx], (el) => {\n        return el?.type && el?.props?.children\n          ? `<${typeToTag(el.type, el?.props)}>${jsxToString(\n              el.props.children\n            )}</${typeToTag(el.type)}>`\n          : el;\n      });\n      return string.join('');\n    } catch (err) {\n      throw err;\n    }\n\n    function typeToTag(type: any, props: object = {}) {\n      function propsToAttr(props: any) {\n        const keys = _.filter(_.keys(props), (key) => key !== 'children');\n        return _.map(keys, (key) => `${key}=\"${props[key]}\"`).join(' ');\n      }\n      const tags = ['span', 'strong', 'div', 'a'];\n      return tags.includes(type) ? `${type} ${propsToAttr(props)}` : '';\n    }\n  }\n\n  return { label, plainLabel, getLabelKey, jsxToString };\n}\n\nexport default useLabel;\n","import React, { memo, ReactNode } from 'react';\nimport { useContextSelector } from 'use-context-selector';\nimport _ from 'lodash';\n\nimport styles from './Label.module.scss';\nimport { LabelContext } from './LabelContext';\nimport useLabel from './useLabel';\n\nfunction Label(props: { children: ReactNode; wildcards?: object }) {\n  const { labels, editing, addUntrackedLabel } = useContextSelector(\n    LabelContext,\n    (c) => c\n  );\n  const { label, getLabelKey, jsxToString } = useLabel();\n  const { editMode, untrackedLabels } = editing;\n\n  function hasLabel(text: string | ReactNode) {\n    const key = getLabelKey(text);\n    return !!_.get(labels, `${key}`);\n  }\n\n  const _label =\n    label(props.children, { additionalWildcards: props.wildcards }) ||\n    props.children;\n\n  if (!editMode) return _label || null;\n\n  const isLabelUntracked = editMode && !hasLabel(props.children);\n  const isLabelTrackedInContext = _.get(\n    untrackedLabels,\n    getLabelKey(props.children)\n  );\n\n  const _className = [styles.Label__highlighted];\n  !isLabelUntracked && _className.push(styles.Label__highlighted__tracked);\n  isLabelTrackedInContext &&\n    _className.push(styles.Label__highlighted__tracked__in__context);\n\n  function handleClick(e: React.MouseEvent) {\n    if (!isLabelUntracked) return;\n    e.stopPropagation();\n    e.preventDefault();\n    addUntrackedLabel(getLabelKey(props.children), jsxToString(props.children));\n  }\n\n  return (\n    <span className={_className.join(' ')} onClick={handleClick}>\n      {_label}\n    </span>\n  );\n}\n\nexport default memo(Label);\n","import React from 'react';\nimport { useSpring, animated } from 'react-spring';\nimport Label from '../../context/Label/Label';\n\nimport styles from './Progress.module.scss';\n\nfunction Progress({\n  percent,\n  showText,\n  color = '#333333',\n  height = '3px',\n  className,\n}) {\n  const props = useSpring({\n    width: `${percent}%`,\n    backgroundColor: color,\n    from: { width: '0%' },\n  });\n\n  const _className = [styles.Progress];\n  className && _className.push(className);\n\n  return (\n    <div className={_className.join(' ')}>\n      <div\n        className={styles.Progress__bar__bg}\n        style={{ backgroundColor: `${color}50`, height }}\n      >\n        <animated.div className={styles.Progress__bar__fg} style={props} />\n      </div>\n      {showText && (\n        <div className={styles.Progress__text} style={{ color }}>\n          {percent}% <Label>completed</Label>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Progress;\n","import React, { useEffect, useRef } from 'react';\n\nimport styles from './Button.module.scss';\n\nfunction Button({\n  children,\n  onClick,\n  primary,\n  secondary,\n  disabled,\n  className,\n  globalState,\n  onMount,\n}) {\n  const colorScheme = globalState.getColorScheme();\n\n  const _className = [styles.Button];\n  primary && _className.push(styles['--primary']);\n  secondary && _className.push(styles['--secondary']);\n  disabled && _className.push(styles['--disabled']);\n  className && _className.push(className);\n\n  let style = {};\n  if (!disabled && primary)\n    style = { ...style, backgroundColor: colorScheme.primary };\n  if (!disabled && secondary)\n    style = {\n      ...style,\n      color: colorScheme.primary,\n      borderColor: colorScheme.primary,\n    };\n\n  function handleClick() {\n    onClick && !disabled && onClick();\n  }\n\n  const buttonRef = useRef();\n  useEffect(() => {\n    onMount && onMount(buttonRef.current);\n  }, []); // eslint-disable-line\n\n  return (\n    <div\n      ref={buttonRef}\n      className={_className.join(' ')}\n      style={style}\n      onClick={handleClick}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport default Button;\n","import React, { useState, useEffect } from 'react';\nimport { extname } from 'path';\nimport { replace } from 'lodash';\n\nimport styles from './Audio.module.scss';\n\nfunction Audio({ url }) {\n  const [forceRender, setForceRender] = useState(false);\n\n  useEffect(() => {\n    setForceRender(true);\n  }, [url]);\n\n  useEffect(() => {\n    forceRender && setForceRender(false);\n  }, [forceRender]);\n\n  if (forceRender) return null;\n\n  return (\n    <audio controls autoPlay controlsList=\"nodownload\" className={styles.Audio}>\n      <source src={url} type={`audio/${replace(extname(url), '.', '')}`} />\n      Your browser does not support the audio element.\n    </audio>\n  );\n}\n\nexport default Audio;\n","// useReducer with Typescript:\n// https://github.com/hswolff/youtube/blob/master/videos/why-i-love-usereducer/src/LoginUseReducerTypeScript.tsx\n\nimport React, { useReducer, ReactNode } from 'react';\nimport { createContext } from 'use-context-selector';\n\nconst initialState: IUIState = {\n  background: {},\n  blinkNext: false,\n  setBackground: () => {},\n  clearBackground: () => {},\n  startBlinkNext: () => {},\n  stopBlinkNext: () => {},\n};\n\ntype IUIState = {\n  background: IBackground;\n  blinkNext: boolean;\n  setBackground: (background: IBackground) => void;\n  clearBackground: () => void;\n  startBlinkNext: () => void;\n  stopBlinkNext: () => void;\n};\n\ntype IBackground = {\n  image?: {\n    url: string;\n    name: string;\n    fullPath: string;\n  };\n  style?: object;\n  opacity?: number;\n};\n\ntype IUIAction =\n  | { type: 'SET_BACKGROUND'; payload: IBackground }\n  | { type: 'CLEAR_BACKGROUND' }\n  | { type: 'START_BLINK_NEXT' }\n  | { type: 'STOP_BLINK_NEXT' };\n\nfunction uiReducer(state: IUIState, action: IUIAction): IUIState {\n  switch (action.type) {\n    case 'SET_BACKGROUND':\n      return {\n        ...state,\n        background: action.payload,\n      };\n    case 'CLEAR_BACKGROUND':\n      return {\n        ...state,\n        background: {},\n      };\n    case 'START_BLINK_NEXT':\n      return {\n        ...state,\n        blinkNext: true,\n      };\n    case 'STOP_BLINK_NEXT':\n      return {\n        ...state,\n        blinkNext: false,\n      };\n    default:\n      return state;\n  }\n}\n\nexport const UIContext = createContext(initialState as IUIState);\n\nexport default function UIProvider(props: { children?: ReactNode }) {\n  const [state, dispatch] = useReducer(uiReducer, initialState);\n\n  // Actions\n  // reminder: always dispatch; otherwise, is a SELECTOR, not an ACTION\n  function setBackground(background = {} as IBackground) {\n    dispatch({\n      type: 'SET_BACKGROUND',\n      payload: background,\n    });\n  }\n\n  function clearBackground() {\n    dispatch({\n      type: 'CLEAR_BACKGROUND',\n    });\n  }\n\n  function startBlinkNext() {\n    dispatch({\n      type: 'START_BLINK_NEXT',\n    });\n  }\n\n  function stopBlinkNext() {\n    dispatch({\n      type: 'STOP_BLINK_NEXT',\n    });\n  }\n\n  return (\n    <UIContext.Provider\n      value={{\n        ...state,\n        setBackground,\n        clearBackground,\n        startBlinkNext,\n        stopBlinkNext,\n      }}\n    >\n      {props.children}\n    </UIContext.Provider>\n  );\n}\n","import React from 'react';\nimport _ from 'lodash';\n\nimport styles from './NavFooter.module.scss';\nimport Progress from '../UI/Progress/Progress';\nimport Button from '../UI/Button/Button';\nimport Audio from '../Audio/Audio';\nimport Label from '../context/Label/Label';\nimport { useContextSelector } from 'use-context-selector';\nimport { UIContext } from '../context/UI/UIContext';\n\nfunction NavFooter({ globalState }) {\n  const {\n    goNextPage,\n    goPrevPage,\n    getColorScheme,\n    getCoursePercentage,\n    getCurrentPage,\n    course,\n    getTracking,\n    isInFirstPage,\n    isInLastPage,\n    isNavigationModeFree,\n  } = globalState;\n  const { primary } = getColorScheme();\n  const currentPage = getCurrentPage();\n  const pageTracking = getTracking(currentPage.resourceId);\n  const stopBlinkNext = useContextSelector(UIContext, (c) => c.stopBlinkNext);\n  const blinkNext = useContextSelector(UIContext, (c) => c.blinkNext);\n\n  const hasAudio = !!currentPage?.audio && !_.isEmpty(currentPage?.audio?.name);\n\n  return (\n    <div className={styles.NavFooter} style={{ backgroundColor: primary }}>\n      <Progress\n        percent={getCoursePercentage()}\n        showText\n        color=\"#ffffff\"\n        className={styles.NavFooter__progress}\n      />\n      {hasAudio && (\n        <div className={styles.NavFooter__audio}>\n          <Audio url={`${course.baseURL}/${currentPage?.audio.name}`} />\n        </div>\n      )}\n      <div className={styles.NavFooter__navbuttons}>\n        <Button\n          onClick={() => {\n            goPrevPage();\n            stopBlinkNext();\n          }}\n          globalState={globalState}\n          className={styles.NavFooter__button}\n          disabled={isInFirstPage()}\n        >\n          <Label>previous</Label>\n        </Button>\n        <Button\n          onClick={() => {\n            goNextPage();\n            stopBlinkNext();\n          }}\n          globalState={globalState}\n          className={[\n            styles.NavFooter__button,\n            styles.NavFooter__nextButton,\n            blinkNext ? styles.NavFooter__button__blink : '',\n          ].join(' ')}\n          disabled={\n            (!pageTracking.completed && !isNavigationModeFree) || isInLastPage()\n          }\n        >\n          <Label>next</Label>\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default NavFooter;\n","import React from 'react';\n\nimport styles from './PlaceholderSlide.module.scss';\n\nfunction PlaceholderSlide({ children }) {\n  return (\n    <div className={styles.PlaceholderSlide}>\n      <div className={styles.PlaceholderSlide__activity}>{children}</div>\n    </div>\n  );\n}\n\nexport default PlaceholderSlide;\n","import React, { useEffect, useState } from 'react';\nimport PlaceholderSlide from './PlaceholderSlide';\n\nimport styles from './Slide.module.scss';\n\nfunction Slide({ filename, baseURL, hyperlink = {}, globalState }) {\n  const { onPageCompleted } = globalState;\n  const [loaded, setLoaded] = useState(false);\n\n  useEffect(() => {\n    if (loaded) onPageCompleted();\n  }, [filename, loaded]); //eslint-disable-line\n\n  function handleOpenHyperlink() {\n    hyperlink?.url && window.open(hyperlink?.url);\n  }\n\n  const src = `${baseURL}/${filename}`;\n\n  if (!loaded)\n    return (\n      <PlaceholderSlide>\n        {/* eslint-disable-next-line */}\n        <img\n          src={src}\n          style={{ display: 'none' }}\n          onLoad={() => setLoaded(true)}\n          onError={() => setLoaded(true)} // to not block to next return\n        />\n      </PlaceholderSlide>\n    );\n\n  return (\n    <div\n      className={styles.Slide}\n      style={{\n        backgroundImage: `url('${src}')`,\n        cursor: hyperlink?.url ? 'pointer' : undefined,\n      }}\n      onClick={handleOpenHyperlink}\n    ></div>\n  );\n}\n\nexport default Slide;\n","import React from 'react';\nimport ReactYoutube from 'react-youtube';\nimport { useContextSelector } from 'use-context-selector';\nimport { UIContext } from '../../context/UI/UIContext';\n\nimport styles from './Youtube.module.scss';\n\nfunction Youtube({ url, settings = {}, globalState }) {\n  const { onPageCompleted, getCurrentPage, getTracking } = globalState;\n  const { disableSeek } = settings;\n  const currentPage = getCurrentPage();\n  const pageTracking = getTracking(currentPage.resourceId);\n  const pageCompleted = pageTracking?.completed;\n  const startBlinkNext = useContextSelector(UIContext, (c) => c.startBlinkNext);\n\n  function getYoutubeVideoId(url) {\n    try {\n      var regExp =\n        /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#&?]*).*/;\n      var match = url.match(regExp);\n      return match && match[7].length === 11 ? match[7] : false;\n    } catch (err) {\n      return false;\n    }\n  }\n\n  const opts = {\n    height: '100%',\n    width: '100%',\n    playerVars: {\n      // https://developers.google.com/youtube/player_parameters\n      autoplay: 1,\n      iv_load_policy: 3,\n      playsinline: 1,\n      rel: 0,\n      showinfo: 0,\n      controls: disableSeek && !pageCompleted ? 0 : 1,\n      disablekb: disableSeek && !pageCompleted ? 1 : 0,\n    },\n  };\n\n  return (\n    <ReactYoutube\n      containerClassName={styles.Youtube}\n      videoId={getYoutubeVideoId(url)}\n      opts={opts}\n      onEnd={() => onPageCompleted(() => startBlinkNext())}\n    />\n  );\n}\n\nexport default Youtube;\n","import React from 'react';\n\nimport styles from './ContainerPage.module.scss';\n\nfunction ContainerPage({ title, children, className = '', globalState }) {\n  const { primary } = globalState.getColorScheme();\n\n  return (\n    <div className={`${styles.ContainerPage} ${className}`}>\n      <div className={styles.ContainerPage__container}>\n        {title && (\n          <div className={styles.ContainerPage__title}>\n            <h2 style={{ borderBottomColor: primary }}>{title}</h2>\n          </div>\n        )}\n        <div className={styles.ContainerPage__body}>{children}</div>\n      </div>\n    </div>\n  );\n}\n\nexport default ContainerPage;\n","import React from 'react';\n\nimport styles from './Feedback.module.scss';\nimport Icon from '../Icon/Icon';\nimport Label from '../../context/Label/Label';\n\nfunction Feedback({ children, correct, incorrect, className }) {\n  const _className = [styles.Feedback];\n  correct && _className.push(styles['--correct']);\n  incorrect && _className.push(styles['--incorrect']);\n  className && _className.push(className);\n\n  return (\n    <div className={_className.join(' ')}>\n      <div className={styles.Feedback__type}>\n        <Icon\n          icon={correct ? 'check-circle' : 'times-circle'}\n          className={styles.Feedback__icon}\n        />\n        <span>\n          {correct ? <Label>correct</Label> : <Label>incorrect</Label>}\n        </span>\n      </div>\n      <div className={styles.Feedback__text}>{children}</div>\n    </div>\n  );\n}\n\nexport default Feedback;\n","import React from 'react';\n//import { generateHash } from 'random-hash';\n\nimport styles from './Radio.module.scss';\n\nfunction Radio({\n  name,\n  id,\n  label,\n  value,\n  checked,\n  onChange,\n  correct,\n  incorrect,\n  showAnswer,\n  disabled,\n  type,\n  className,\n}) {\n  //const id = generateHash({ length: 6 });\n\n  function handleChange(e) {\n    onChange && onChange(e);\n  }\n\n  const _className = [styles.Radio];\n  correct && _className.push(styles['--correct']);\n  incorrect && _className.push(styles['--incorrect']);\n  showAnswer && _className.push(styles['--showAnswer']);\n  className && _className.push(className);\n\n  return (\n    <div className={_className.join(' ')}>\n      <input\n        name={name}\n        id={id}\n        type={type || 'radio'}\n        value={value}\n        checked={checked}\n        onChange={handleChange}\n        disabled={disabled}\n      />\n      <label htmlFor={id}>{label}</label>\n    </div>\n  );\n}\n\nexport default Radio;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport styles from './MultipleChoice.module.scss';\nimport Radio from '../../../../Form/Radio/Radio';\n\ntype MultipleChoiceProps = {\n  question: any;\n  tracking: any;\n  config: any;\n  onChange: Function;\n};\n\nfunction MultipleChoice(props: MultipleChoiceProps) {\n  const { question, tracking, config, onChange } = props;\n  const { showCorrectAnswer, showYourAnswers } = config;\n  const { answer, submitted } = tracking;\n\n  const allowMultipleAnswer =\n    _.filter(question.choices, (c) => c.correct).length > 1;\n\n  function handleChange(e: any) {\n    const { id, name, value, type, checked } = e.target;\n    onChange &&\n      onChange(e, {\n        id,\n        name,\n        value,\n        type,\n        checked,\n        questionId: question.resourceId,\n      });\n  }\n\n  return (\n    <div className={styles.MultipleChoice}>\n      {_.map(question.choices, (choice) => {\n        const checked = _.includes(answer, choice.resourceId.toString());\n        return (\n          <Radio\n            id={choice.resourceId}\n            type={allowMultipleAnswer ? 'checkbox' : null}\n            name={question.resourceId}\n            key={choice.resourceId}\n            label={choice.text}\n            value={choice.resourceId}\n            checked={checked}\n            onChange={handleChange}\n            disabled={submitted}\n            correct={showYourAnswers && checked && submitted && choice.correct}\n            incorrect={\n              showYourAnswers && checked && submitted && !choice.correct\n            }\n            showAnswer={showCorrectAnswer && submitted && choice.correct}\n            className={styles.MultipleChoice__radio}\n          />\n        );\n      })}\n    </div>\n  );\n}\n\nexport default MultipleChoice;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport styles from './Essay.module.scss';\nimport Label from '../../../../context/Label/Label';\nimport useLabel from '../../../../context/Label/useLabel';\n\ntype EssayProps = {\n  question: any;\n  tracking: any;\n  config: any;\n  onChange: Function;\n};\n\nfunction Essay(props: EssayProps) {\n  const { question, tracking, config, onChange } = props;\n  const { showCorrectAnswer, showYourAnswers } = config;\n  const { answer, submitted, answeredCorrectly } = tracking;\n  const { plainLabel } = useLabel();\n\n  function handleChange(e: any) {\n    const { id, name, value, type } = e.target;\n    onChange &&\n      onChange(e, {\n        id,\n        name,\n        value,\n        type,\n        questionId: question.resourceId,\n      });\n  }\n\n  const _className = [styles.Essay];\n  submitted &&\n    showYourAnswers &&\n    answeredCorrectly &&\n    _className.push(styles.Essay__correct);\n  submitted &&\n    showYourAnswers &&\n    !answeredCorrectly &&\n    _className.push(styles.Essay__incorrect);\n\n  return (\n    <div className={_className.join(' ')}>\n      <textarea\n        id={question.resourceId}\n        name={question.resourceId}\n        placeholder={plainLabel('Type your answer here')}\n        onChange={handleChange}\n        disabled={submitted}\n        rows={3}\n        maxLength={240}\n        defaultValue={submitted ? answer : undefined}\n      />\n\n      {showCorrectAnswer && submitted && (\n        <p className={styles.acceptableResponses}>\n          {question.exactResponse ? (\n            <Label>Acceptable response (must contain all words)</Label>\n          ) : (\n            <Label>Acceptable responses</Label>\n          )}\n          {': '}\n          {_.map(question.acceptableResponses, (r) => r.text).join(', ')}\n        </p>\n      )}\n    </div>\n  );\n}\n\nexport default Essay;\n","import React, { memo } from 'react';\nimport _ from 'lodash';\n\nimport styles from './Sentence.module.scss';\n\ntype SentenceProps = {\n  sentence: string;\n  blanks: any[];\n  submitted?: boolean;\n  showYourAnswers?: boolean;\n  showCorrectAnswer?: boolean;\n  getValues?: Function;\n  register?: Function;\n  className?: string;\n  preview?: boolean;\n  style?: object;\n  placeholder?: string;\n  onClick?: React.MouseEventHandler<HTMLParagraphElement>;\n};\n\nfunction Sentence({\n  sentence = '',\n  blanks,\n  submitted,\n  showYourAnswers,\n  showCorrectAnswer,\n  getValues = () => {},\n  register = () => {},\n  className = '',\n  preview,\n  style,\n  placeholder,\n  onClick = () => {},\n}: SentenceProps) {\n  function Blank({ idx }: { idx: number }) {\n    const id = blanks[idx]?.id;\n    const expectedResponse = blanks[idx]?.text;\n    const userAnswer = getValues(id) || '';\n\n    if (preview)\n      return <span className={styles.preview}>{expectedResponse}</span>;\n\n    // warning: DO NOT use _.lowerCase (was crashing when using caps in mid string: ex: SuPeRHeRo)\n    const filledCorrectly =\n      submitted && expectedResponse.toLowerCase() === userAnswer.toLowerCase();\n\n    return (\n      <span>\n        <input\n          id={id}\n          type=\"text\"\n          autoComplete=\"off\"\n          placeholder={placeholder}\n          {...register(id)}\n          className={\n            showYourAnswers && submitted\n              ? filledCorrectly\n                ? styles.correct\n                : styles.incorrect\n              : undefined\n          }\n          style={{ minWidth: `${expectedResponse.length * 10}px` }}\n          disabled={submitted}\n        />\n        {submitted && showCorrectAnswer && !filledCorrectly && (\n          <span className={styles.correctAnswer}>({expectedResponse})</span>\n        )}\n      </span>\n    );\n  }\n\n  const wildcard = '[*]';\n\n  let _sentence = sentence;\n  _.forEach(blanks, (blank) => {\n    _sentence = _.replace(_sentence, blank?.text, wildcard);\n  });\n\n  const startsWithBlank = _sentence.substr(0, wildcard.length) === wildcard;\n  const endsWithBlank =\n    _sentence.substr(_sentence.length - wildcard.length, wildcard.length) ===\n    wildcard;\n\n  const textBlocks = _.map(\n    _.filter(_.split(_sentence, wildcard), (a) => !_.isEmpty(a)),\n    (block) => block\n  );\n\n  const sentenceWithBlanks: any[] = [];\n  startsWithBlank && sentenceWithBlanks.push(<Blank key={0} idx={0} />);\n\n  _.forEach(textBlocks, (textBlock, i) => {\n    const isLastTextBlock = i === textBlocks.length - 1;\n    sentenceWithBlanks.push(textBlock);\n    const key = startsWithBlank ? i + 1 : i;\n    if (!isLastTextBlock || (isLastTextBlock && endsWithBlank))\n      sentenceWithBlanks.push(<Blank key={key} idx={key} />);\n  });\n\n  return (\n    <p\n      className={[styles.Sentence, className].join(' ')}\n      style={style}\n      onClick={onClick}\n    >\n      {sentenceWithBlanks}\n    </p>\n  );\n}\n\nexport default memo(Sentence);\n","import React, { useEffect, useMemo } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport useLabel from '../../../../context/Label/useLabel';\nimport styles from './FillInTheBlanks.module.scss';\nimport Sentence from './Sentence';\n\ntype FillInTheBlanksProps = {\n  question: any;\n  tracking: any;\n  config: any;\n  onChange: Function;\n};\n\nfunction FillInTheBlanks(props: FillInTheBlanksProps) {\n  const { question, tracking, config, onChange } = props;\n  const { showCorrectAnswer, showYourAnswers } = config;\n  const { answer, submitted } = tracking;\n  const { register, watch, getValues } = useForm({ defaultValues: answer });\n  const { plainLabel } = useLabel();\n  const typeHere = useMemo(() => plainLabel('type here'), [plainLabel]);\n\n  // this is HOW you detect changes using react-hook-form\n  useEffect(() => {\n    const subscription = watch((value, { name, type }) => {\n      onChange &&\n        onChange(undefined, {\n          value,\n          questionId: question.resourceId,\n        });\n    });\n    return () => subscription.unsubscribe();\n  }, [watch]); // eslint-disable-line\n\n  return (\n    <div className={styles.FillInTheBlanks}>\n      <Sentence\n        sentence={question?.sentence}\n        blanks={question?.blanks}\n        submitted={submitted}\n        showYourAnswers={showYourAnswers}\n        showCorrectAnswer={showCorrectAnswer}\n        getValues={getValues}\n        register={register}\n        placeholder={typeHere}\n      />\n    </div>\n  );\n}\n\nexport default FillInTheBlanks;\n","import React, { useEffect, useState } from 'react';\nimport { Draggable, DraggableStateSnapshot } from 'react-beautiful-dnd';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGripVertical } from '@fortawesome/free-solid-svg-icons';\n\nimport styles from './DraggableItem.module.scss';\nimport { MountData } from './DroppableArea';\n\ntype DraggableItemProps = {\n  draggableId: string;\n  draggableText: string;\n  index: number;\n  cannotDrag?: boolean;\n  isDraggingOver?: boolean;\n  className?: string;\n  correct?: boolean;\n  incorrect?: boolean;\n  disabled?: boolean;\n  minHeight?: number;\n  onMount?: (data: MountData) => void;\n};\n\nfunction DraggableItem({\n  draggableId,\n  draggableText,\n  index,\n  cannotDrag,\n  isDraggingOver,\n  className = '',\n  correct,\n  incorrect,\n  disabled,\n  minHeight,\n  onMount,\n}: DraggableItemProps) {\n  const [mountData, setMountData] = useState<MountData>();\n\n  useEffect(() => {\n    if (mountData && onMount) onMount(mountData);\n  }, [mountData]); // eslint-disable-line\n\n  function handleRef(el: HTMLDivElement) {\n    if (mountData || !el?.clientHeight) return;\n    setMountData({ height: el?.clientHeight });\n  }\n\n  function getClassName(snapshot?: DraggableStateSnapshot): string {\n    return [\n      styles.item,\n      styles.itemWithArrow,\n      className,\n      snapshot?.isDragging ? styles.itemIsDragging : '',\n      isDraggingOver ? styles.itemIsDraggingOver : '',\n      correct ? styles.itemIsCorrect : '',\n      incorrect ? styles.itemIsIncorrect : '',\n    ].join(' ');\n  }\n\n  return (\n    // ATENTION: keep the key, otherwise the swap will not work\n    <div\n      className={styles.itemWrapper}\n      key={draggableId}\n      ref={handleRef}\n      style={{ minHeight }}\n    >\n      <Draggable\n        draggableId={draggableId}\n        index={index}\n        isDragDisabled={disabled}\n      >\n        {(provided, snapshot) => (\n          <div\n            ref={provided.innerRef}\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            className={getClassName(snapshot)}\n            style={{\n              ...provided.draggableProps.style,\n              // invisible, because needs to be rendered to avoid errors\n              display: cannotDrag ? 'none' : undefined,\n            }}\n          >\n            {!disabled && <FontAwesomeIcon icon={faGripVertical} />}\n            <div style={{ flex: 1, textAlign: 'center' }}>{draggableText}</div>\n          </div>\n        )}\n      </Draggable>\n      {/* visible element when cannot drag... is exactly the same above, without Draggable wrapper */}\n      {cannotDrag && <div className={getClassName()}>{draggableText}</div>}\n    </div>\n  );\n}\n\nexport default DraggableItem;\n","import React, { useEffect, useState } from 'react';\nimport { Droppable } from 'react-beautiful-dnd';\n\nimport styles from './DroppableArea.module.scss';\nimport DraggableItem from './DraggableItem';\nimport { Item } from './Matching';\n\ntype DroppableAreaProps = Item & {\n  correct?: boolean;\n  incorrect?: boolean;\n  disabled?: boolean;\n  minHeight?: number;\n  width?: number;\n  onMount?: (data: MountData) => void;\n};\n\nexport type MountData = {\n  height: number;\n};\n\nfunction DroppableArea({\n  droppableId,\n  droppableText,\n  draggableId,\n  draggableText,\n  type,\n  correct,\n  incorrect,\n  disabled,\n  minHeight,\n  width,\n  onMount,\n}: DroppableAreaProps) {\n  const [mountData, setMountData] = useState<MountData>();\n  const completed: boolean = !!droppableText && !!draggableText;\n\n  useEffect(() => {\n    if (mountData && onMount) onMount(mountData);\n  }, [mountData]); // eslint-disable-line\n\n  function handleRef(el: HTMLDivElement) {\n    if (mountData || !el?.clientHeight) return;\n    setMountData({ height: el?.clientHeight });\n  }\n\n  return (\n    <Droppable droppableId={droppableId} direction=\"horizontal\">\n      {(provided, snapshot) => (\n        <div\n          ref={provided.innerRef}\n          className={[\n            styles.dropzone,\n            styles[`dropzone_${type}`],\n            snapshot.isDraggingOver ? styles.dropzoneIsDragging : '',\n          ].join(' ')}\n          style={{\n            minHeight,\n            width: width\n              ? type === 'source'\n                ? `${width}px`\n                : `${width * 2}px`\n              : undefined,\n          }}\n        >\n          {draggableId && draggableText && (\n            <DraggableItem\n              draggableId={draggableId}\n              draggableText={draggableText}\n              index={0}\n              isDraggingOver={\n                snapshot.isDraggingOver &&\n                // to avoid the effect if is dragging over on itself\n                snapshot.draggingOverWith !== snapshot.draggingFromThisWith\n              }\n              className={styles.text}\n              correct={completed && !!correct}\n              incorrect={completed && !!incorrect}\n              disabled={disabled}\n              onMount={onMount}\n              minHeight={minHeight}\n            />\n          )}\n          {droppableText && (\n            <div\n              className={[\n                styles.droppableTextWrapper,\n                styles.droppableTextWrapperWithArrow,\n                draggableId && draggableText\n                  ? styles.droppableTextWrapperNoLeftBorder\n                  : '',\n                completed && correct ? styles.droppableTextWrapperCorrect : '',\n                completed && incorrect\n                  ? styles.droppableTextWrapperIncorrect\n                  : '',\n              ].join(' ')}\n              ref={handleRef}\n              style={{ minHeight }}\n            >\n              <div className={styles.text}>{droppableText}</div>\n            </div>\n          )}\n          <div style={{ display: 'none' }}>{provided.placeholder}</div>\n        </div>\n      )}\n    </Droppable>\n  );\n}\n\nexport default DroppableArea;\n","import React, { useEffect, useState } from 'react';\nimport {\n  DragDropContext,\n  DropResult,\n  ResponderProvided,\n} from 'react-beautiful-dnd';\nimport _ from 'lodash';\n\nimport styles from './Matching.module.scss';\nimport DroppableArea from './DroppableArea';\n\nexport type MatchingItem = {\n  resourceId: string;\n  draggable: string;\n  droppable: string;\n};\n\ntype MatchingProps = {\n  matchingItems: MatchingItem[];\n  matchingResponse?: object;\n  showFeedback?: boolean;\n  disabled?: boolean;\n  sameHeight?: boolean;\n  width?: number;\n  onChange?: ({ completed, response, score }: onChangePayload) => void;\n};\n\nexport type Item = {\n  draggableId?: string;\n  draggableText?: string;\n  droppableId: string;\n  droppableText?: string;\n  type: 'source' | 'destination';\n  order?: number;\n};\n\nexport type onChangePayload = {\n  response: object;\n  score: number;\n  completed: boolean;\n};\n\nfunction Matching({\n  matchingItems,\n  matchingResponse,\n  showFeedback,\n  disabled,\n  sameHeight,\n  width,\n  onChange,\n}: MatchingProps) {\n  const [items, setItems] = useState<Item[]>();\n  const [response, setResponse] = useState<any>();\n  const [changeDataPayload, setChangeDataPayload] = useState<onChangePayload>();\n  const [minHeight, setMinHeight] = useState<number>();\n  const [touched, setTouched] = useState<boolean>(false);\n\n  useEffect(() => {\n    const initialItems: Item[] = [];\n\n    const order: number[] = [];\n    for (let i = 0; i < _.size(matchingItems); i++) order.push(i);\n    const shuffle = _.shuffle(order);\n\n    _.forEach(\n      matchingItems,\n      ({ resourceId, draggable, droppable }, index: number) => {\n        initialItems.push({\n          draggableId: `draggable-${resourceId}`,\n          draggableText: draggable,\n          droppableId: `droppable-source-${resourceId}`,\n          droppableText: undefined,\n          type: 'source',\n          order: shuffle[index],\n        });\n        initialItems.push({\n          draggableId: undefined,\n          draggableText: undefined,\n          droppableId: `droppable-destination-${resourceId}`,\n          droppableText: droppable,\n          type: 'destination',\n        });\n      }\n    );\n    setItems(initialItems);\n  }, [matchingItems]);\n\n  useEffect(() => {\n    if (!_.isEmpty(matchingResponse) && _.isEmpty(response))\n      setResponse(matchingResponse);\n\n    // check completed and calculate score\n    if (!_.isEmpty(response)) {\n      let completed = true;\n      const maxResponses = matchingItems.length;\n      let correctResponses = 0;\n      _.forEach(_.keys(response), (key: string) => {\n        if (_.includes(key, 'destination')) {\n          if (response[key] === undefined) {\n            completed = false;\n          } else {\n            if (checkResponse(key, response[key])) correctResponses++;\n          }\n        }\n      });\n\n      const updatedChangeDataPayload = {\n        completed,\n        response,\n        score: correctResponses / maxResponses,\n      };\n\n      setChangeDataPayload((prevState) => {\n        // if object is the same, do not set state (to avoid trigger useEffect on changeDataPayload)\n        if (_.isEqual(prevState, updatedChangeDataPayload)) return;\n        return updatedChangeDataPayload;\n      });\n    }\n  }, [matchingResponse, response, matchingItems]); // eslint-disable-line\n\n  useEffect(() => {\n    onChange && changeDataPayload && onChange(changeDataPayload);\n  }, [changeDataPayload]); // eslint-disable-line\n\n  function checkResponse(droppableId: string, draggableId: string) {\n    // first, will match ids:\n    const onlyIdFromDroppableId = _.replace(\n      droppableId,\n      'droppable-destination-',\n      ''\n    );\n    const onlyIdFromDraggableId = _.replace(draggableId, 'draggable-', '');\n    const matchIds = onlyIdFromDroppableId === onlyIdFromDraggableId;\n\n    // then, will try to match with expected text\n    // for instance: two droppables as \"hero\" (same text)\n    const textThatMatchesWithThisDraggagle = _.find(\n      items,\n      (i) => i.droppableId === `droppable-destination-${onlyIdFromDraggableId}`\n    )?.droppableText;\n    const droppableText = _.find(\n      items,\n      (i) => i.droppableId === droppableId\n    )?.droppableText;\n    const matchTexts = textThatMatchesWithThisDraggagle === droppableText;\n\n    // it will accept as correct one or other\n    return matchIds || matchTexts;\n  }\n\n  function handleOnDragEnd(result: DropResult, provided: ResponderProvided) {\n    // console.log(\n    //   `${result.draggableId} from ${result.source.droppableId} to ${result.destination?.droppableId}`\n    // );\n\n    if (!result.destination?.droppableId) {\n      console.warn('destination is undefined');\n      return;\n    }\n    if (result.source.droppableId === result.destination?.droppableId) {\n      console.warn('source and destination are the same');\n      return;\n    }\n\n    let updatedResponse = _.cloneDeep(response);\n\n    // init response (if undefined)\n    if (!updatedResponse) {\n      _.forEach(items, (item) => {\n        updatedResponse = {\n          ...updatedResponse,\n          [item.droppableId]: item.draggableId,\n        };\n      });\n    }\n\n    // swap\n    const prevUpdatedResponse = _.cloneDeep(updatedResponse);\n    updatedResponse[result.destination.droppableId] = result.draggableId;\n    updatedResponse[result.source.droppableId] =\n      prevUpdatedResponse[result.destination.droppableId];\n\n    setResponse(updatedResponse);\n  }\n\n  function renderDroppables(type: 'source' | 'destination') {\n    const ordered = _.orderBy(items, 'order');\n\n    const merged = _.map(ordered, (item) => {\n      if (!response) return item;\n      const responseDraggableId = response[item.droppableId];\n      return {\n        ...item,\n        draggableId: responseDraggableId,\n        draggableText: responseDraggableId\n          ? _.find(items, (item) => item.draggableId === responseDraggableId)\n              ?.draggableText\n          : undefined,\n      };\n    });\n\n    const filtered = _.filter(merged, (item) => item.type === type);\n\n    return _.map(filtered, (item) => {\n      const isResponseCorrect = checkResponse(\n        item.droppableId,\n        item.draggableId\n      );\n      return (\n        <DroppableArea\n          key={item.droppableId}\n          correct={showFeedback && isResponseCorrect}\n          incorrect={showFeedback && !isResponseCorrect}\n          disabled={disabled}\n          onMount={(data) => {\n            if (!sameHeight) return;\n            if (touched) return;\n            setMinHeight((prevMinHeight = 0) =>\n              data.height > prevMinHeight ? data.height : prevMinHeight\n            );\n          }}\n          minHeight={minHeight}\n          width={width}\n          {...item}\n        />\n      );\n    });\n  }\n\n  return (\n    <DragDropContext\n      onDragEnd={handleOnDragEnd}\n      onDragStart={() => setTouched(true)}\n    >\n      <main>\n        <section className={styles.left}>{renderDroppables('source')}</section>\n        <section className={styles.right}>\n          {renderDroppables('destination')}\n        </section>\n      </main>\n    </DragDropContext>\n  );\n}\n\nexport default Matching;\n","import React from 'react';\n\nimport Matching, { onChangePayload } from './Matching';\n\ntype MatchingWrapperProps = {\n  question: any;\n  tracking: any;\n  config: any;\n  onChange: Function;\n};\n\nfunction MatchingWrapper(props: MatchingWrapperProps) {\n  const { question, tracking, config, onChange } = props;\n  const { showCorrectAnswer, showYourAnswers } = config;\n  const { answer, submitted } = tracking;\n\n  function handleOnChange(payload: onChangePayload) {\n    onChange &&\n      onChange(undefined, {\n        value: payload.completed ? payload : undefined, // to avoid submit when incomplete\n        questionId: question.resourceId,\n      });\n  }\n\n  return (\n    <div style={{ marginTop: '10px' }}>\n      <Matching\n        matchingItems={question?.matchingItems}\n        matchingResponse={submitted ? answer?.response : undefined}\n        sameHeight\n        width={200}\n        onChange={handleOnChange}\n        showFeedback={submitted && (showCorrectAnswer || showYourAnswers)}\n        disabled={submitted}\n      />\n    </div>\n  );\n}\n\nexport default MatchingWrapper;\n","import React, { useEffect, useMemo } from 'react';\nimport _ from 'lodash';\nimport { useContextSelector } from 'use-context-selector';\n\nimport styles from './Question.module.scss';\nimport Feedback from '../../../UI/Feedback/Feedback';\nimport Label from '../../../context/Label/Label';\nimport MultipleChoice from './MultipleChoice/MultipleChoice';\nimport Essay from './Essay/Essay';\nimport FillInTheBlanks from './FillInTheBlanks/FillInTheBlanks';\nimport MatchingWrapper from './Matching/MatchingWrapper';\nimport { UIContext } from '../../../context/UI/UIContext';\n\nfunction Question({\n  question = {},\n  tracking,\n  config = {},\n  onChange,\n  cur,\n  max,\n  globalState,\n  className,\n}) {\n  const { course } = globalState;\n  const { primary } = globalState.getColorScheme();\n  const { answeredCorrectly, submitted } = tracking;\n  const setBackground = useContextSelector(UIContext, (c) => c.setBackground);\n  const clearBackground = useContextSelector(\n    UIContext,\n    (c) => c.clearBackground\n  );\n\n  useEffect(() => {\n    const hasQuizBackground = !_.isEmpty(config?.background);\n\n    // first, check for question background\n    if (!_.isEmpty(question.background) && !config?.showAllQuestionsInPage) {\n      setBackground(question.background);\n    } else {\n      // then, check for quiz background (to restore it)\n      hasQuizBackground && setBackground(config.background);\n    }\n\n    return () => {\n      if (!hasQuizBackground) {\n        clearBackground();\n      }\n    };\n  }, [question.background, config.background, config.showAllQuestionsInPage]); // eslint-disable-line\n\n  const _className = [styles.Question];\n  className && _className.push(className);\n\n  const renderedQuestionType = useMemo(() => {\n    switch (question.resourceType) {\n      case 'essay':\n        return (\n          <Essay\n            question={question}\n            tracking={tracking}\n            config={config}\n            onChange={onChange}\n          />\n        );\n      case 'fillInTheBlank':\n        return (\n          <FillInTheBlanks\n            question={question}\n            tracking={tracking}\n            config={config}\n            onChange={onChange}\n          />\n        );\n      case 'matching':\n        return (\n          <MatchingWrapper\n            question={question}\n            tracking={tracking}\n            config={config}\n            onChange={onChange}\n          />\n        );\n      case 'question':\n      case 'multipleChoice':\n        return (\n          <MultipleChoice\n            question={question}\n            tracking={tracking}\n            config={config}\n            onChange={onChange}\n          />\n        );\n      default:\n        return null;\n    }\n  }, [config, tracking, question, onChange]);\n\n  return (\n    <div className={_className.join(' ')}>\n      <div className={styles.Question__counter}>\n        <span style={{ color: primary }}>\n          <Label>question</Label> {cur}/{max}\n        </span>\n      </div>\n      {question?.textImage?.image?.name && course?.baseURL && (\n        <div\n          className={styles.Question__image}\n          style={{\n            backgroundImage: `url('${course?.baseURL}/${question?.textImage?.image?.name}')`,\n            ...question?.textImage?.style,\n          }}\n        />\n      )}\n      <div className={styles.Question__question}>{question.text}</div>\n      {renderedQuestionType}\n      {!!submitted &&\n        ((!_.isEmpty(question?.feedback?.whenCorrect) &&\n          answeredCorrectly === true) ||\n          (!_.isEmpty(question?.feedback?.whenIncorrect) &&\n            answeredCorrectly === false)) && (\n          <Feedback\n            incorrect={answeredCorrectly === false}\n            correct={answeredCorrectly === true}\n            className={styles.Question__feedback}\n          >\n            {answeredCorrectly\n              ? question?.feedback?.whenCorrect\n              : question?.feedback?.whenIncorrect}\n          </Feedback>\n        )}\n    </div>\n  );\n}\n\nexport default Question;\n","import { useRef, useEffect } from 'react';\n\nfunction usePrevious(value) {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef();\n\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n\nexport default usePrevious;\n","export const isViewportMobile = () => {\n  return getWindowPosition().width < 576;\n};\n\nexport const getWindowPosition = () => {\n  const w = window,\n    d = document,\n    documentElement = d.documentElement,\n    body = d.getElementsByTagName('body')[0],\n    _width = w.innerWidth || documentElement.clientWidth || body.clientWidth,\n    _height =\n      w.innerHeight || documentElement.clientHeight || body.clientHeight,\n    _scrollTop = w.scrollTop || documentElement.scrollTop || body.scrollTop,\n    _scrollLeft = w.scrollLeft || documentElement.scrollLeft || body.scrollLeft,\n    _scrollWidth =\n      w.scrollWidth || documentElement.scrollWidth || body.scrollWidth,\n    _scrollHeight =\n      w.scrollHeight || documentElement.scrollHeight || body.scrollHeight;\n\n  return {\n    width: _width,\n    height: _height,\n    scrollTop: _scrollTop,\n    scrollLeft: _scrollLeft,\n    scrollWidth: _scrollWidth,\n    scrollHeight: _scrollHeight,\n  };\n};\n\nexport const encodeIt = (_json) => {\n  const encoded = JSON.stringify(_json);\n  return encodeURIComponent(encoded);\n};\n\nexport const isRunningInProd = () => process.env.NODE_ENV === 'production';\n\n// remove undefined from entire object\nexport const cleanedObject = (obj) => {\n  function isReferenceField(obj) {\n    return !!obj && !!obj.firestore;\n  }\n  Object.keys(obj).forEach((key) => {\n    if (isReferenceField(obj[key])) {\n      delete obj[key];\n    } else if (obj[key] && typeof obj[key] === 'object') {\n      cleanedObject(obj[key]);\n    } else if (obj[key] === undefined) {\n      delete obj[key];\n    }\n  });\n  return obj;\n  // _.pickBy(obj, (v) => v !== undefined);\n};\n\nexport const scrollIntoViewSmooth = (el) => {\n  if (!el?.scrollIntoView) return;\n  setTimeout(() => {\n    try {\n      el.scrollIntoView({ behavior: 'smooth' });\n    } catch (err) {\n      console.warn('[scrollIntoViewSmooth] error');\n      console.error(err);\n    }\n  }, 200);\n};\n","import React, { useState, useEffect, useMemo } from 'react';\nimport _ from 'lodash';\nimport { useContextSelector } from 'use-context-selector';\n\nimport styles from './Quiz.module.scss';\nimport ContainerPage from '../../UI/ContainerPage/ContainerPage';\nimport Button from '../../UI/Button/Button';\nimport Question from './Question/Question';\nimport Icon from '../../UI/Icon/Icon';\nimport Label from '../../context/Label/Label';\nimport usePrevious from '../../hooks/usePrevious';\nimport { UIContext } from '../../context/UI/UIContext';\nimport { scrollIntoViewSmooth } from '../../utils/utils';\n\nfunction Quiz({ title, quiz = {}, globalState }) {\n  const { questions = [], config = {} } = quiz;\n  const [curQuestion, setCurQuestion] = useState(1);\n  const [reviewMode, setReviewMode] = useState(false);\n  const maxQuestion = questions.length;\n  const [order, setOrder] = useState(\n    initOrder(maxQuestion, config.randomizeQuestions)\n  );\n  const showAllQuestionsInPage = config.showAllQuestionsInPage === true;\n  const allowRetryWhenFailed = config.allowRetryWhenFailed === true;\n  const { passingScore } = config;\n\n  const {\n    getTracking,\n    patchTracking,\n    clearTracking,\n    onPageCompleted,\n    onPageStarted,\n    getCurrentPage,\n    setCourseScore,\n    setCourseFailed,\n    setCoursePassed,\n    courseCompleted,\n    handleError,\n    player,\n  } = globalState;\n  const currentPage = getCurrentPage();\n  const pageTracking = getTracking(currentPage.resourceId);\n  const pageCompleted = pageTracking?.completed;\n  const quizStarted = pageTracking?.started;\n  const result = pageTracking?.result || {};\n  const prevCourseCompleted = usePrevious(courseCompleted);\n  const setBackground = useContextSelector(UIContext, (c) => c.setBackground);\n  const clearBackground = useContextSelector(\n    UIContext,\n    (c) => c.clearBackground\n  );\n  const startBlinkNext = useContextSelector(UIContext, (c) => c.startBlinkNext);\n\n  function initOrder(max, randomize) {\n    const inOrder = _.map(new Array(max), (a, i) => i);\n    const newOrder = randomize ? _.shuffle(inOrder) : inOrder;\n    return newOrder;\n  }\n\n  useEffect(() => {\n    function onQuestionChange() {\n      if (player?.editMode && pageCompleted) {\n        console.warn('[onQuestionChange]: editMode activated = reset tracking');\n        handleRetry();\n      }\n    }\n    onQuestionChange();\n  }, [questions]); // eslint-disable-line\n\n  useEffect(() => {\n    function onQuestionAddOrRemove() {\n      if (player?.editMode) {\n        console.warn(\n          '[onQuestionAddOrRemove] editMode activated = reset order and tracking'\n        );\n        // order need to be init, once the number of question has changed\n        const newOrder = initOrder(maxQuestion, config.randomizeQuestions);\n        setOrder(newOrder);\n        handleRetry();\n      }\n    }\n    onQuestionAddOrRemove();\n  }, [maxQuestion]); // eslint-disable-line\n\n  useEffect(() => {\n    if (!_.isEmpty(config?.background)) {\n      setBackground(config?.background);\n    }\n\n    return () => {\n      clearBackground();\n    };\n  }, [config.background]); // eslint-disable-line\n\n  useEffect(() => {\n    pageCompleted && calculateQuizResult();\n  }, [pageCompleted]); // eslint-disable-line\n\n  const hasPassed = useMemo(() => {\n    // if passingScore not set, always return true\n    return !isNaN(passingScore) ? +result.score >= +passingScore : true;\n  }, [passingScore, result.score]);\n\n  useEffect(() => {\n    if (\n      prevCourseCompleted !== undefined &&\n      !!courseCompleted &&\n      !isNaN(result.score)\n    ) {\n      try {\n        hasPassed ? setCoursePassed() : setCourseFailed();\n      } catch (err) {\n        console.error(err);\n        handleError(err);\n      }\n    }\n  }, [\n    prevCourseCompleted,\n    courseCompleted,\n    result.score,\n    hasPassed,\n    setCourseScore,\n    setCourseFailed,\n    setCoursePassed,\n    handleError,\n  ]);\n\n  const anyChoiceTouched = useMemo(() => {\n    let touched = false;\n    _.forEach(questions, ({ resourceId }) => {\n      if (!_.isEmpty(getTracking(resourceId))) touched = true;\n    });\n    return touched;\n  }, [getTracking, questions]);\n\n  function handleChange(e, data) {\n    const { value, type, questionId, checked } = data;\n    let { answer } = getTracking(questionId);\n    if (type === 'checkbox') {\n      if (!Array.isArray(answer)) answer = [];\n      if (!_.includes(answer, value) && checked) {\n        answer = [...answer, value];\n      } else {\n        answer = _.filter(answer, (a) => a !== value);\n      }\n    } else {\n      answer = value;\n    }\n\n    // to avoid patch with undefined value\n    answer ? patchTracking(questionId, { answer }) : clearTracking(questionId);\n  }\n\n  function handleSubmitAnswer() {\n    const _questions = getAllQuestionsInPage();\n    _.forEach(\n      _questions,\n      ({\n        resourceId,\n        resourceType,\n        choices,\n        acceptableResponses,\n        exactResponse,\n        blanks,\n      }) => {\n        const { answer } = getTracking(resourceId);\n\n        let answeredCorrectly = false;\n\n        switch (resourceType) {\n          case 'question':\n          case 'multipleChoice':\n            const userAnswer = Array.isArray(answer) ? answer : [answer];\n            const correctAnswer = choices\n              .filter((c) => c.correct)\n              .map((c) => c.resourceId);\n            answeredCorrectly = _.isEqual(\n              _.sortBy(userAnswer).toString(),\n              _.sortBy(correctAnswer).toString()\n            );\n            break;\n\n          case 'essay':\n            const responseMatched = [];\n            _.forEach(acceptableResponses, ({ text }) => {\n              responseMatched.push(\n                _.includes(_.lowerCase(answer), _.lowerCase(text))\n              );\n            });\n\n            answeredCorrectly = exactResponse\n              ? _.size(_.filter(responseMatched, (r) => r === true)) ===\n                _.size(responseMatched)\n              : _.find(responseMatched, (r) => r === true);\n\n            break;\n\n          case 'fillInTheBlank':\n            let allBlanksAnsweredCorrectly = true;\n            _.forEach(blanks, (blank, i) => {\n              // warning: DO NOT use _.lowerCase (was crashing when using caps in mid string: ex: SuPeRHeRo)\n              if (\n                blank?.text.toLowerCase() !==\n                _.get(answer, blank?.id).toLowerCase()\n              )\n                allBlanksAnsweredCorrectly = false;\n            });\n            answeredCorrectly = allBlanksAnsweredCorrectly;\n            break;\n\n          case 'matching':\n            answeredCorrectly = answer?.score === 1;\n            break;\n\n          default:\n            break;\n        }\n\n        patchTracking(resourceId, {\n          submitted: true, // mark question(s) as submitted\n          answeredCorrectly,\n        });\n      }\n    );\n\n    // automatically go next question (or result) if does not have feedback\n    const hasFeedback = config?.showYourAnswers || questionHasFeedback();\n    if (!hasFeedback) handleNextQuestion();\n  }\n\n  function questionHasFeedback() {\n    const _questions = getAllQuestionsInPage();\n    return !!_questions.find((q) => {\n      return (\n        !_.isEmpty(q?.feedback?.whenCorrect) ||\n        !_.isEmpty(!q?.feedback?.whenIncorrect)\n      );\n    });\n  }\n\n  function handleNextQuestion() {\n    if (!showAllQuestionsInPage && curQuestion < maxQuestion) {\n      setCurQuestion(curQuestion + 1);\n    } else if (!pageCompleted) {\n      onPageCompleted(() => startBlinkNext());\n    } else if (reviewMode) {\n      setReviewMode(false);\n    }\n  }\n\n  function getAllQuestionsInPage() {\n    const question = questions[order[curQuestion - 1]] || {};\n    const _questions = config.randomizeQuestions\n      ? _.map(order, (o) => questions[o])\n      : questions;\n    return showAllQuestionsInPage ? _questions : [question];\n  }\n\n  function renderQuestions() {\n    if ((pageCompleted && !reviewMode) || !quizStarted) return;\n    const _questions = getAllQuestionsInPage();\n    return _.map(_questions, (q, i) => {\n      const { resourceId } = q;\n      const tracking = getTracking(resourceId);\n      return !_.isEmpty(q) ? (\n        <Question\n          key={resourceId}\n          question={q}\n          tracking={tracking}\n          config={config}\n          onChange={handleChange}\n          cur={showAllQuestionsInPage ? i + 1 : curQuestion}\n          max={maxQuestion}\n          globalState={globalState}\n          className={styles.Quiz__question__component}\n        />\n      ) : null;\n    });\n  }\n\n  function canSubmit() {\n    let allQuestionsAnswered = true;\n\n    const _questions = getAllQuestionsInPage();\n    _.forEach(_questions, (q) => {\n      if (_.isEmpty(getTracking(q.resourceId)?.answer))\n        allQuestionsAnswered = false;\n    });\n\n    return allQuestionsAnswered;\n  }\n\n  function canGoNextQuestion() {\n    const _questions = getAllQuestionsInPage();\n    let isQuestionsSubmitted = _.isEmpty(_questions) ? false : true;\n    _.forEach(_questions, (q) => {\n      if (!getTracking(q.resourceId)?.submitted) isQuestionsSubmitted = false;\n    });\n    return isQuestionsSubmitted;\n  }\n\n  function handleReview() {\n    setCurQuestion(1);\n    setReviewMode(true);\n  }\n\n  function handleRetry() {\n    resetPageTracking();\n    setCurQuestion(1);\n    setReviewMode(false);\n  }\n\n  function resetPageTracking() {\n    // clear all answers (tracking) for resourceId's\n    clearTracking(currentPage.resourceId);\n    resetQuestionsTracking();\n  }\n\n  function resetQuestionsTracking() {\n    _.forEach(questions, (q) => {\n      clearTracking(q.resourceId);\n    });\n  }\n\n  function calculateQuizResult() {\n    // do not calculate if has already calculated\n    if (!_.isEmpty(result)) return;\n\n    // caculate result\n    let totalAnsweredCorrectly = 0;\n    let totalAnsweredIncorrectly = 0;\n    // let totalAnsweredIncorrectly = 0;\n    _.forEach(questions, ({ resourceId }) => {\n      const { answeredCorrectly } = getTracking(resourceId);\n      answeredCorrectly ? totalAnsweredCorrectly++ : totalAnsweredIncorrectly++;\n    });\n\n    const score = Math.round((totalAnsweredCorrectly / questions.length) * 100);\n    patchTracking(currentPage.resourceId, {\n      result: {\n        score,\n        totalAnsweredCorrectly,\n        totalAnsweredIncorrectly,\n        totalAnswered: totalAnsweredCorrectly + totalAnsweredIncorrectly,\n      },\n    });\n  }\n\n  function renderResult() {\n    const { result } = pageTracking;\n    if (!pageCompleted || reviewMode || !result) return;\n\n    setCourseScore(+result.score);\n\n    return (\n      <div className={styles.Quiz__result}>\n        <h2>\n          <Label>Results</Label>\n        </h2>\n        <div className={styles.Quiz__result__detail}>\n          <span>\n            <Label>Score</Label>\n          </span>\n          <span>{result?.score}%</span>\n          <span>\n            {result?.totalAnsweredCorrectly} <Label>of</Label>{' '}\n            {result?.totalAnswered} <Label>correct</Label>\n          </span>\n          {passingScore && (\n            <div\n              className={[\n                styles.Quiz__result__passingScore,\n                hasPassed\n                  ? styles.Quiz__result__passingScore__passed\n                  : styles.Quiz__result__passingScore__failed,\n              ].join(' ')}\n            >\n              <span>\n                <Label>Passing score</Label>: {passingScore}%\n              </span>\n              <Icon\n                icon={hasPassed ? 'check-circle' : 'times-circle'}\n                className={styles.Quiz__result__passingScore__icon}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  function renderIntro() {\n    if (quizStarted) return;\n    return (\n      <div className={styles.Quiz__intro}>\n        <h3>\n          <Label>Take this quiz to test your knowledge.</Label>\n        </h3>\n      </div>\n    );\n  }\n\n  const canRetry = useMemo(() => {\n    return pageCompleted && !reviewMode && allowRetryWhenFailed && !hasPassed;\n  }, [allowRetryWhenFailed, hasPassed, pageCompleted, reviewMode]);\n\n  function handleButtonOnMount(el) {\n    if (pageCompleted) return;\n    scrollIntoViewSmooth(el);\n  }\n\n  return (\n    <ContainerPage\n      className={styles.Quiz}\n      title={title}\n      globalState={globalState}\n    >\n      {renderIntro()}\n      {renderQuestions()}\n      {renderResult()}\n      <div className={styles.Quiz__footer}>\n        {quizStarted && !pageCompleted && !canGoNextQuestion() && canSubmit() && (\n          <Button\n            primary\n            onClick={handleSubmitAnswer}\n            onMount={handleButtonOnMount}\n            globalState={globalState}\n          >\n            <Label>submit</Label>\n          </Button>\n        )}\n        {((!pageCompleted && canGoNextQuestion()) || reviewMode) && (\n          <Button\n            secondary\n            onClick={handleNextQuestion}\n            onMount={handleButtonOnMount}\n            globalState={globalState}\n          >\n            <Label>next</Label>\n          </Button>\n        )}\n        {pageCompleted && !reviewMode && !canRetry && (\n          <Button secondary onClick={handleReview} globalState={globalState}>\n            <Label>review</Label>\n          </Button>\n        )}\n        {canRetry && (\n          <Button secondary onClick={handleRetry} globalState={globalState}>\n            <Label>retry</Label>\n          </Button>\n        )}\n        {!anyChoiceTouched && !quizStarted && (\n          <Button\n            primary\n            onClick={onPageStarted}\n            disabled={maxQuestion === 0}\n            globalState={globalState}\n          >\n            <Label>start quiz</Label>\n          </Button>\n        )}\n      </div>\n    </ContainerPage>\n  );\n}\n\nexport default Quiz;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { extname } from 'path';\n\nimport styles from './Video.module.scss';\nimport { useContextSelector } from 'use-context-selector';\nimport { UIContext } from '../../context/UI/UIContext';\n\nfunction Video({ filename, baseURL, settings = {}, globalState }) {\n  const { onPageCompleted, player, getCurrentPage, getTracking } = globalState;\n  const [random, setRandom] = useState();\n  const [reloading, setReloading] = useState(false);\n  const { disableSeek } = settings;\n  const videoRef = useRef();\n  const supposedCurrentTime = useRef();\n  const currentPage = getCurrentPage();\n  const pageTracking = getTracking(currentPage.resourceId);\n  const pageCompleted = pageTracking?.completed;\n  const startBlinkNext = useContextSelector(UIContext, (c) => c.startBlinkNext);\n\n  useEffect(() => {\n    // force reload when data changes\n    setRandom(Math.ceil(Math.random() * 1000));\n  }, [filename]);\n\n  useEffect(() => {\n    setReloading(true);\n    setTimeout(() => {\n      setReloading(false);\n    }, 100);\n  }, [random]);\n\n  let src = `${baseURL}/${filename}`;\n  // to avoid random factor when editing (spaming the server requesting media)\n  if (player.editMode) src += `?r=${random}`;\n\n  if (reloading) return null;\n\n  return (\n    <div className={styles.Video}>\n      <video\n        ref={videoRef}\n        controls\n        autoPlay\n        controlsList=\"nodownload\"\n        onEnded={(e) => {\n          onPageCompleted(() => startBlinkNext());\n          // reset state in order to allow for rewind\n          supposedCurrentTime.current = 0;\n        }}\n        onContextMenu={(e) => e.preventDefault()}\n        onTimeUpdate={(e) => {\n          if (!videoRef?.current?.seeking) {\n            supposedCurrentTime.current = videoRef.current.currentTime;\n          }\n        }}\n        onSeeking={(e) => {\n          // code below is only valid if disableSeek is enabled\n          if (!disableSeek || pageCompleted) return;\n\n          // guard agains infinite recursion:\n          // user seeks, seeking is fired, currentTime is modified, seeking is fired, current time is modified, ....\n          const delta =\n            videoRef.current.currentTime - supposedCurrentTime.current;\n\n          // only allows do seek backwards\n          if (delta > 0.01) {\n            // console.log(\"Seeking is disabled\");\n            videoRef.current.currentTime = supposedCurrentTime.current;\n          }\n        }}\n      >\n        <source\n          src={src}\n          type={`video/${extname(filename).replace('.', '')}`}\n        />\n        Your browser does not support the video tag.\n      </video>\n    </div>\n  );\n}\n\nexport default Video;\n","let receiver = [];\nlet messengerEvent = null;\n\nexport const init = () => {\n  receiver = [];\n  messengerEvent = null;\n  window.addEventListener('message', onReceiveMessage, false);\n};\n\nexport const remove = () => {\n  window.removeEventListener('message', onReceiveMessage);\n};\n\nexport const addOnReceiveMessage = (message, execFunction) => {\n  receiver.push({\n    message: message,\n    execFunction: execFunction,\n  });\n};\n\nconst onReceiveMessage = (event) => {\n  try {\n    JSON.parse(event.data);\n    const _receivedData = JSON.parse(event.data) || {};\n    const _message = _receivedData.message || {};\n    const _param = _receivedData.param || {};\n    if (!messengerEvent) messengerEvent = event;\n    executeMessage(_message, _param);\n  } catch (e) {\n    //console.error('[onReceiveMessage] message received does not have a valid format and will not be executed.', event.data, e);\n  }\n};\n\nconst executeMessage = (message, param) => {\n  // find in receiver\n  const theMessage =\n    receiver.filter((receiver) => receiver.message === message) || [];\n  if (theMessage && theMessage[0] && theMessage[0].execFunction)\n    theMessage[0].execFunction(param);\n};\n\nexport const sendMessage = (message, param, sourceWindow) => {\n  const _data = { message: message, param: param };\n\n  if (sourceWindow) {\n    sourceWindow.postMessage(JSON.stringify(_data), '*');\n  } else if (messengerEvent && messengerEvent.source) {\n    messengerEvent.source.postMessage(\n      JSON.stringify(_data),\n      messengerEvent.origin\n    );\n  } else {\n    console.warn(\n      '[sendMessage] cannot postMessage: window does not exists in this context'\n    );\n  }\n};\n","import React from 'react';\nimport BarLoader from 'react-spinners/BarLoader';\n\nimport styles from './Spinner.module.scss';\n\nfunction Spinner() {\n  return (\n    <div className={styles.Spinner__container}>\n      <BarLoader color=\"#666\" size=\"16px\" loading={true} />\n    </div>\n  );\n}\n\nexport default Spinner;\n","import React, { useEffect, useRef, useState } from 'react';\n\nimport styles from './Game.module.scss';\nimport * as messenger from '../../utils/messenger';\nimport { encodeIt } from '../../utils/utils';\nimport Spinner from '../../UI/Spinner/Spinner';\nimport { useContextSelector } from 'use-context-selector';\nimport { UIContext } from '../../context/UI/UIContext';\n\nfunction Game({ game = {}, globalState }) {\n  const { onPageCompleted, goNextPage, setCourseScore, player } = globalState;\n  const iframeRef = useRef();\n  const { id, data } = game;\n  const dataRef = useRef(data);\n  dataRef.current = data;\n  const [random, setRandom] = useState();\n  const startBlinkNext = useContextSelector(UIContext, (c) => c.startBlinkNext);\n\n  useEffect(() => {\n    messenger.init();\n    messenger.addOnReceiveMessage('requestParameters', () => {\n      // send game data to render on iframe\n      const frameWindow = iframeRef.current.contentWindow || null;\n      messenger.sendMessage(\n        'retrieveParameters',\n        encodeIt(dataRef.current),\n        frameWindow\n      );\n      messenger.sendMessage('retrieveParameters');\n    });\n\n    messenger.addOnReceiveMessage('setAnswer', (data) => {\n      console.log({ score: data.score });\n      setCourseScore(data.score);\n      onPageCompleted(() => startBlinkNext());\n      goNextPage();\n    });\n\n    return () => {\n      messenger.remove();\n    };\n  }, [data, goNextPage, onPageCompleted, setCourseScore]); // eslint-disable-line\n\n  useEffect(() => {\n    // force reload iframe when data changes\n    setRandom(Math.ceil(Math.random() * 1000));\n  }, [data, id]);\n\n  let src = `${process.env.PUBLIC_URL}/assets/games/${id}/index.html`;\n  // to avoid random factor when editing (spaming the server requesting media)\n  if (player.editMode) src += `?r=${random}`;\n\n  if (!id) return <Spinner />;\n\n  return (\n    <iframe\n      title={id}\n      src={src}\n      width=\"100%\"\n      height=\"100%\"\n      ref={iframeRef}\n      frameBorder=\"0\"\n      className={styles.Game__iframe}\n    />\n  );\n}\n\nexport default Game;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useContextSelector } from 'use-context-selector';\n\nimport styles from './Main.module.scss';\nimport Slide from '../Content/Slide/Slide';\nimport Youtube from '../Content/Youtube/Youtube';\nimport Quiz from '../Content/Quiz/Quiz';\nimport Video from '../Content/Video/Video';\nimport Game from '../Content/Game/Game';\nimport { UIContext } from '../context/UI/UIContext';\n\nfunction Main({ globalState }) {\n  const { getCurrentPage, course } = globalState;\n  const page = getCurrentPage();\n  const [isChangingPage, setIsChangingPage] = useState(false);\n  const timeout = useRef();\n  const background = useContextSelector(UIContext, (c) => c.background);\n\n  useEffect(() => {\n    if (!isChangingPage) return;\n    clearTimeout(timeout.current);\n    timeout.current = setTimeout(() => setIsChangingPage(false), 50);\n  }, [isChangingPage]);\n\n  useEffect(() => {\n    setIsChangingPage(true);\n  }, [page.resourceId]);\n\n  function renderPage() {\n    switch (page?.resourceType) {\n      case 'slide':\n        return (\n          <Slide\n            filename={page?.filename}\n            baseURL={course.baseURL}\n            hyperlink={page?.hyperlink}\n            globalState={globalState}\n          />\n        );\n      case 'video':\n        if (page?.video?.type === 'youtube') {\n          return (\n            <Youtube\n              url={page.video.youtubeUrl}\n              settings={page?.settings}\n              globalState={globalState}\n            />\n          );\n        } else if (page?.video?.type === 'upload') {\n          return (\n            <Video\n              filename={page?.video?.name}\n              baseURL={course.baseURL}\n              settings={page?.settings}\n              globalState={globalState}\n            />\n          );\n        } else {\n          return null;\n        }\n      case 'quiz':\n        return <Quiz {...page} globalState={globalState} />;\n      case 'game':\n        return <Game {...page} globalState={globalState} />;\n      default:\n        return <span>{page?.type}</span>;\n    }\n  }\n\n  if (isChangingPage) return null;\n\n  const backgroundOpacity =\n    background?.opacity >= 0 && background?.opacity <= 1\n      ? 1 - background.opacity\n      : 0;\n\n  return (\n    <div\n      className={styles.Main}\n      style={{\n        backgroundImage:\n          background?.image?.name && course?.baseURL\n            ? `linear-gradient(rgba(255, 255, 255, ${backgroundOpacity}), rgba(255, 255, 255, ${backgroundOpacity})), url('${course?.baseURL}/${background?.image?.name}')`\n            : // example on how to darken a background-image (because opacity does not work)\n              // `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('${course?.baseURL}/${background?.image?.name}')`\n              undefined,\n      }}\n    >\n      {renderPage()}\n    </div>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nimport styles from './MenuItem.module.scss';\nimport Icon from '../../UI/Icon/Icon';\n\nfunction MenuItem({\n  children,\n  active,\n  completed,\n  disabled,\n  icon,\n  onClick = () => {},\n  globalState,\n}) {\n  const { primary } = globalState.getColorScheme();\n\n  const className = [styles.MenuItem];\n  active && className.push(styles['MenuItem--active']);\n  disabled && className.push(styles['MenuItem--disabled']);\n\n  const style = active ? { borderLeftColor: primary } : {};\n\n  return (\n    <div className={className.join(' ')} style={style} onClick={!disabled ? onClick : () => {}}>\n      <Icon icon={icon} className={styles.MenuItem__icon} />\n      <span className={styles.MenuItem__label}>{children}</span>\n      <Icon\n        icon={completed ? 'check-circle' : 'circle'}\n        className={`${styles.MenuItem__icon} ${\n          completed ? styles.MenuItem__completed : ''\n        }`}\n      />\n    </div>\n  );\n}\n\nexport default MenuItem;\n","import React, { useEffect, useState } from 'react';\nimport { extname } from 'path';\n\nimport styles from './VideoPlayback.module.scss';\n\nfunction VideoPlayback({ videoMetadata, pageResourceId, globalState }) {\n  const [forceRender, setForceRender] = useState(false);\n  const [error, setError] = useState();\n  const { course } = globalState;\n\n  useEffect(() => {\n    setForceRender(true);\n  }, [videoMetadata]);\n\n  useEffect(() => {\n    forceRender && setForceRender(false);\n  }, [forceRender]);\n\n  return (\n    <div className={styles.VideoPlayback}>\n      {!forceRender && !error && (\n        <video\n          controls\n          autoPlay\n          controlsList=\"nodownload\"\n          onContextMenu={(e) => e.preventDefault()}\n          onError={(err) => setError(err)}\n        >\n          <source\n            src={`${course.baseURL}/${videoMetadata?.name}`}\n            type={`video/${extname(videoMetadata?.name).replace('.', '')}`}\n          />\n        </video>\n      )}\n    </div>\n  );\n}\n\nexport default VideoPlayback;\n","import packageJson from '../../../../package.json';\n\n// 2.0.1: fix: Course Completed message was always in portuguese\n// 2.0.2: feat: New languages\n// 2.0.3: feat: Retry quiz\n// 2.0.4: feat: Failed/passed status on quiz\n// 2.0.5: fix: Audio component do not display when empty attributes\n// 2.0.7: feat: Scorm 2004 3rd edition\n// 2.0.8: feat: Updating imsmanifest with wildcards\n// 2.0.20: feat: Preloading slide images, placeholder when loading, fade in pages\n// 2.0.21: fix: compress/decompress json of suspendData (limit of Scorm 1.2 is 4096 chars)\n// 3.0.0: feat: labels revamp + course player typescript + npm publish private package\n// 3.0.1: fix: quiz saving answers with resourceId instead of text (make it short for suspend_data)\n// 3.0.2: fix: the last fix broke correct check in quiz\n// 3.0.3: feat: matching\n// UNSTABLE: 3.0.6: fix: packages updated to avoid dependency error when installing this package\n// UNSTABLE:  3.0.7: fix: infinite render on clearBackground and missing React import\n// UNSTABLE:  3.0.8: fix: change fillInTheBlank params to match InputTag component on editor\n// UNSTABLE:  3.0.10: refactor: sentence as a functional component on fill in the blanks\n// UNSTABLE:  3.0.12: fix: labels and check correct on essay\n// UNSTABLE:  3.0.18: fix: quiz order when added (editorMode) and randomize when all question in page was set\n// 3.1.0: feat: new quiz types\n// 3.1.1: fix: passing score, fill in the blanks, debounce setSuspendData\n// 3.1.3: fix: navigation mode\n// 3.1.5: feat: hyperlink, disable video seek, blink on next, scrollIntoView on quiz, matching on texts\nexport const VERSION = packageJson.version;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport styles from './Menu.module.scss';\nimport MenuItem from './MenuItem/MenuItem';\nimport VideoPlayback from './VideoPlayback/VideoPlayback';\nimport Label from '../context/Label/Label';\nimport { VERSION } from '../constants/version';\n\nfunction Menu({ globalState }) {\n  const {\n    getCurrentPage,\n    getPages,\n    goPage,\n    getTracking,\n    player,\n    isNavigationModeFree,\n  } = globalState;\n  const pages = getPages();\n  const currentPage = getCurrentPage();\n\n  function getIcon(type) {\n    switch (type) {\n      case 'video':\n      case 'youtube':\n        return 'video';\n      case 'quiz':\n        return 'edit';\n      default:\n        return 'bars';\n    }\n  }\n\n  return (\n    <div className={styles.Menu}>\n      {!_.isEmpty(currentPage?.facevideo) && player.showMenu && (\n        <VideoPlayback\n          videoMetadata={currentPage?.facevideo}\n          pageResourceId={currentPage?.resourceId}\n          globalState={globalState}\n        />\n      )}\n      <div className={styles.Menu__title}>\n        <Label>Table of Contents</Label>\n      </div>\n      <div className={styles.Menu__list}>\n        {_.map(pages, (page, i) => {\n          const _trackingPrevPage = getTracking(pages[i - 1]?.resourceId);\n          const _tracking = getTracking(page.resourceId);\n          return (\n            <MenuItem\n              key={i}\n              completed={_tracking.completed}\n              active={currentPage?.resourceId === page.resourceId}\n              disabled={\n                !_trackingPrevPage.completed &&\n                !_tracking.completed &&\n                !isNavigationModeFree\n              }\n              icon={getIcon(page.type)}\n              onClick={() => goPage(i + 1)}\n              globalState={globalState}\n            >\n              {page.title || `Page ${i + 1}`}\n            </MenuItem>\n          );\n        })}\n      </div>\n      <div className={styles.Menu__bottom}>{VERSION}</div>\n    </div>\n  );\n}\n\nexport default Menu;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\n/**\n * Component that alerts if you click outside of it\n */\nexport default class OutsideAlerter extends Component {\n  constructor(props) {\n    super(props);\n\n    this.setWrapperRef = this.setWrapperRef.bind(this);\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleClickOutside);\n  }\n\n  /**\n   * Set the wrapper ref\n   */\n  setWrapperRef(node) {\n    this.wrapperRef = ReactDOM.findDOMNode(node);\n  }\n\n  /**\n   * Alert if clicked on outside of element\n   */\n  handleClickOutside(event) {\n    try {\n      const { onClickOutside } = this.props;\n      if (\n        this.wrapperRef &&\n        this.wrapperRef.contains &&\n        !this.wrapperRef.contains(event.target)\n      ) {\n        if (onClickOutside) onClickOutside();\n      }\n    } catch (err) {\n      //getGeneralCatchError(err);\n    }\n  }\n\n  render() {\n    const childElement = React.Children.only(this.props.children);\n\n    return React.cloneElement(childElement, { ref: this.setWrapperRef });\n  }\n}\n\nOutsideAlerter.propTypes = {\n  children: PropTypes.element.isRequired\n};\n","import { useState } from 'react';\nimport { compress, decompress } from 'compress-json';\nimport { cleanedObject, isRunningInProd } from '../utils/utils';\n\nfunction useScorm() {\n  const [previous, setPrevious] = useState({});\n  const emulateScorm = !isRunningInProd();\n\n  function setupScormScripts() {\n    return new Promise((resolve, reject) => {\n      const scripts = ['scripts/APIWrapper.js', 'scripts/AUFunctions.js'];\n\n      const onLoadPromises = [];\n\n      scripts.forEach((file) => {\n        let script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.async = true;\n\n        script.src = file;\n        onLoadPromises.push(\n          new Promise((resolve, reject) => {\n            script.onload = function () {\n              resolve();\n            };\n          })\n        );\n        document.body.appendChild(script);\n      });\n\n      Promise.all(onLoadPromises)\n        .then((res) => {\n          resolve();\n        })\n        .catch((err) => reject(err));\n    });\n  }\n\n  async function initializeScormAsync() {\n    console.log('initializeScormAsync');\n    let scormData;\n\n    return new Promise((resolve, reject) => {\n      // 1. try without interval:\n      try {\n        scormData = initializeScorm();\n        resolve(scormData);\n      } catch (err) {\n        // do nothing, will continue below\n        console.error(err);\n        console.warn(`initial attempt failed, retrying...`);\n      }\n\n      // 2. start retrying process:\n      const maxRetry = 5;\n      let curRetry = 0;\n      let lastError;\n      const interval = setInterval(() => {\n        if (curRetry >= maxRetry) {\n          clearInterval(interval);\n          reject(lastError);\n        }\n        try {\n          scormData = initializeScorm();\n          clearInterval(interval);\n          resolve(scormData);\n        } catch (err) {\n          console.error(err);\n          console.warn(`attempt ${curRetry}/${maxRetry} failed`);\n          lastError = err;\n          curRetry++;\n        }\n      }, 1000);\n    });\n  }\n\n  function startScormEmulator() {\n    if (!window.getAPIHandle)\n      window.getAPIHandle = () => {\n        console.log('[getAPIHandle]');\n        return true;\n      };\n    if (!window.doLMSGetValue)\n      window.doLMSGetValue = (arg) => {\n        console.log('[doLMSGetValue]', arg);\n        return '';\n      };\n    if (!window.doLMSSetValue)\n      window.doLMSSetValue = (arg, val) =>\n        console.log('[doLMSSetValue]', arg, val);\n    if (!window.doLMSCommit)\n      window.doLMSCommit = () => console.log('[doLMSCommit]');\n    if (!window.loadPage) window.loadPage = () => console.log('[loadPage]');\n    if (!window.unloadPage)\n      window.unloadPage = () => console.log('[unloadPage]');\n    if (!window.setLessonStatus)\n      window.setLessonStatus = (arg, val) =>\n        console.log('[setLessonStatus]', arg, val);\n  }\n\n  function initializeScorm() {\n    if (emulateScorm) startScormEmulator();\n\n    try {\n      // first, check if SCORM api exists\n      if (!window.getAPIHandle())\n        throw Error(\"Unable to locate the LMS's API implementation\");\n\n      // initialize\n      window.loadPage();\n\n      // get persisted data\n      const lessonLocation = window.doLMSGetValue('cmi.core.lesson_location');\n      const suspendData = window.doLMSGetValue('cmi.suspend_data');\n      const lessonStatus = window.doLMSGetValue('cmi.core.lesson_status');\n      const scoreRaw = window.doLMSGetValue('cmi.core.score.raw');\n\n      // set unload event\n      window.addEventListener('unload', (event) => window.unloadPage());\n      window.addEventListener('beforeunload', (event) => window.unloadPage());\n\n      return {\n        lessonLocation,\n        suspendData,\n        lessonStatus,\n        scoreRaw,\n      };\n    } catch (err) {\n      throw new Error(err.message || err);\n    }\n  }\n\n  function setCompleted() {\n    setLessonStatus('completed');\n  }\n\n  function setPassed() {\n    setLessonStatus('passed');\n  }\n\n  function setFailed() {\n    setLessonStatus('failed');\n  }\n\n  function setLessonStatus(lessonStatus) {\n    if (lessonStatus === previous.lessonStatus) return;\n    window.doLMSSetValue('cmi.core.lesson_status', lessonStatus);\n    commit();\n    setPrevious({ ...previous, lessonStatus });\n  }\n\n  function setLessonLocation(lessonLocation) {\n    if (lessonLocation === previous.lessonLocation) return;\n    window.doLMSSetValue('cmi.core.lesson_location', lessonLocation);\n    commit();\n    setPrevious({ ...previous, lessonLocation });\n  }\n\n  function setSuspendData(suspendData) {\n    suspendData = cleanedObject(suspendData); // remove undefined\n    suspendData = compress(suspendData);\n    suspendData = JSON.stringify(suspendData);\n    if (suspendData === previous.suspendData) return;\n    window.doLMSSetValue('cmi.suspend_data', suspendData);\n    commit();\n    setPrevious({ ...previous, suspendData });\n  }\n\n  function getSuspendData(suspendData) {\n    suspendData = JSON.parse(suspendData);\n    suspendData = decompress(suspendData);\n    return suspendData;\n  }\n\n  function setScore(score) {\n    if (score === previous.score) return;\n    window.doLMSSetValue('cmi.core.score.scaled', score / 100);\n    window.doLMSSetValue('cmi.core.score.raw', score);\n    window.doLMSSetValue('cmi.core.score.min', 0);\n    window.doLMSSetValue('cmi.core.score.max', 100);\n    commit();\n    setPrevious({ ...previous, score });\n  }\n\n  function commit() {\n    window.doLMSCommit();\n  }\n\n  return {\n    setupScormScripts,\n    initializeScorm,\n    initializeScormAsync,\n    setCompleted,\n    setPassed,\n    setFailed,\n    setLessonLocation,\n    setSuspendData,\n    getSuspendData,\n    setScore,\n  };\n}\n\nexport default useScorm;\n","import { useReducer, useEffect, useCallback, useRef } from 'react';\nimport _ from 'lodash';\nimport { toast } from 'react-toastify';\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport useScorm from './useScorm';\n\nfunction useGlobal() {\n  const {\n    setCompleted,\n    setFailed,\n    setPassed,\n    setSuspendData,\n    setLessonLocation,\n    setScore,\n  } = useScorm();\n  const localLanguage = useRef();\n  const debouncedSetSuspendData = useRef();\n\n  function reducer(state, action) {\n    switch (action.type) {\n      case 'SET_COURSE':\n        const course = action.payload;\n        return {\n          ...state,\n          course: action.payload,\n          player: {\n            ...state.player,\n            maxPage: course?.pages?.length || 1,\n          },\n        };\n      case 'NEXT_PAGE':\n        return {\n          ...state,\n          player: {\n            ...state.player,\n            curPage:\n              state.player.curPage < state.player.maxPage\n                ? state.player.curPage + 1\n                : state.player.curPage,\n          },\n        };\n      case 'PREV_PAGE':\n        return {\n          ...state,\n          player: {\n            ...state.player,\n            curPage:\n              state.player.curPage > 1\n                ? state.player.curPage - 1\n                : state.player.curPage,\n          },\n        };\n      case 'GO_PAGE':\n        return {\n          ...state,\n          player: {\n            ...state.player,\n            curPage: action.payload,\n          },\n        };\n      case 'TOGGLE_MENU':\n        return {\n          ...state,\n          player: {\n            ...state.player,\n            showMenu: !state.player.showMenu,\n          },\n        };\n      case 'RESTORE_TRACKING':\n        return {\n          ...state,\n          tracking: action.payload,\n        };\n      case 'PATCH_TRACKING':\n        const { resourceId, data } = action.payload;\n        const updatedState = {\n          ...state,\n          tracking: {\n            ...state.tracking,\n            [resourceId]: {\n              ...state.tracking[resourceId],\n              ...data,\n            },\n          },\n        };\n        saveTrackingAsSuspendData(updatedState);\n        return updatedState;\n      case 'CLEAR_TRACKING':\n        const updatedState2 = {\n          ...state,\n          tracking: {\n            ...state.tracking,\n            [action.payload.resourceId]: {},\n          },\n        };\n        saveTrackingAsSuspendData(updatedState2);\n        return updatedState2;\n      case 'SET_MESSAGE':\n        return {\n          ...state,\n          player: {\n            ...state.player,\n            messages: {\n              ...state.player.messages,\n              [action.payload.key]: action.payload.value,\n            },\n          },\n        };\n      case 'SET_SCORM_READY':\n        return {\n          ...state,\n          player: {\n            ...state.player,\n            scormReady: action.payload,\n          },\n        };\n      case 'SET_DISABLE_SCORM':\n        return {\n          ...state,\n          player: {\n            ...state.player,\n            disableScorm: action.payload,\n          },\n        };\n      case 'SET_EDIT_MODE':\n        return {\n          ...state,\n          player: {\n            ...state.player,\n            editMode: action.payload,\n          },\n        };\n      default:\n        handleError(new Error(`Action type not recognized: ${action.type}`));\n    }\n  }\n\n  const initialState = {\n    player: {\n      showMenu: false,\n      curPage: 1,\n      maxPage: 1,\n      scormReady: false,\n      disableScorm: false,\n      messages: {\n        courseCompleted: 'Course completed',\n      },\n    },\n    tracking: {},\n    course: {},\n  };\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  function initCourseData(course) {\n    dispatch({ type: 'SET_COURSE', payload: course });\n  }\n\n  function toggleMenu() {\n    dispatch({ type: 'TOGGLE_MENU' });\n  }\n\n  function goNextPage() {\n    dispatch({ type: 'NEXT_PAGE' });\n  }\n\n  function goPrevPage() {\n    dispatch({ type: 'PREV_PAGE' });\n  }\n\n  function goPage(idx) {\n    dispatch({ type: 'GO_PAGE', payload: idx });\n  }\n\n  function getCurrentPage() {\n    return _.get(state.course, `pages[${state.player?.curPage - 1}]`) || {};\n  }\n\n  const getPages = useCallback(() => {\n    return state.course?.pages || [];\n  }, [state.course]);\n\n  function getColorScheme() {\n    return state.course?.colorScheme || {};\n  }\n\n  function getCoursePercentage() {\n    return Math.round((getPagesCompleted() / state.player?.maxPage) * 100);\n  }\n\n  //////////////////\n  // useTracking\n  //////////////////\n\n  const getTracking = useCallback(\n    (resourceId) => {\n      return _.get(state.tracking, resourceId) || {};\n    },\n    [state.tracking]\n  );\n\n  function restoreTracking(data) {\n    dispatch({ type: 'RESTORE_TRACKING', payload: data });\n  }\n\n  function patchTracking(resourceId, data) {\n    dispatch({ type: 'PATCH_TRACKING', payload: { resourceId, data } });\n  }\n\n  function clearTracking(resourceId) {\n    dispatch({ type: 'CLEAR_TRACKING', payload: { resourceId } });\n  }\n\n  function setMessage(key, value) {\n    dispatch({ type: 'SET_MESSAGE', payload: { key, value } });\n  }\n\n  function setMessageCourseCompleted(message) {\n    setMessage(\n      'courseCompleted',\n      message || state.player.messages.courseCompleted\n    );\n  }\n\n  function onPageStarted() {\n    const { resourceId } = getCurrentPage();\n    const data = { started: true };\n    patchTracking(resourceId, data);\n  }\n\n  function onPageCompleted(callback = () => {}) {\n    const { resourceId } = getCurrentPage();\n\n    // avoid double calling\n    const wasCompletedBefore = getTracking(resourceId)?.completed;\n    if (wasCompletedBefore) return;\n\n    const data = { completed: true };\n    patchTracking(resourceId, data);\n\n    // must show tooltip to advance?\n    callback && typeof callback === 'function' && !isInLastPage() && callback();\n  }\n\n  function isInFirstPage() {\n    return state.player.curPage === 1;\n  }\n\n  function isInLastPage() {\n    return state.player.curPage === state.player.maxPage;\n  }\n\n  function saveTrackingAsSuspendData(updatedState) {\n    // save suspend data (when in scorm)\n    try {\n      if (!updatedState.player.disableScorm) {\n        // using debounce to avoid spamming suspend_data\n        if (!debouncedSetSuspendData) return;\n        debouncedSetSuspendData.current?.cancel &&\n          debouncedSetSuspendData.current.cancel();\n        debouncedSetSuspendData.current = _.debounce(\n          () => setSuspendData(updatedState.tracking),\n          2000 // every 2 secs save suspend_data\n        );\n        debouncedSetSuspendData.current();\n      }\n    } catch (err) {\n      handleError(err);\n    }\n  }\n\n  const getPagesCompleted = useCallback(() => {\n    const pages = getPages();\n    let pagesCompleted = 0;\n    _.forEach(pages, ({ resourceId }) => {\n      const { completed } = getTracking(resourceId);\n      completed === true && pagesCompleted++;\n    });\n    return pagesCompleted;\n  }, [getPages, getTracking]);\n\n  function onPageChanged(currentPage) {\n    const hasFaceVideo = !!currentPage?.facevideo;\n    if (hasFaceVideo && !state.player.showMenu) toggleMenu();\n  }\n\n  const isCourseCompleted = useCallback(() => {\n    return !!getTracking(state.course.id).completed;\n  }, [getTracking, state.course.id]);\n\n  const onCourseCompleted = useCallback(() => {\n    if (isCourseCompleted()) return;\n    !state.player.disableScorm &&\n      toast.success(state.player.messages.courseCompleted);\n\n    const { id, pages } = state.course;\n    const data = { completed: true };\n    patchTracking(id, data);\n\n    // mark lesson status as completed\n    if (!state.player.disableScorm) {\n      setCompleted();\n\n      // check if has quiz or minigame...\n      const hasQuizOrMinigame = !!_.find(\n        pages,\n        ({ resourceType }) => resourceType === 'quiz' || resourceType === 'game'\n      );\n\n      // if does not have any ot them, also set course aas passed\n      if (!hasQuizOrMinigame) setPassed();\n    }\n  }, [\n    isCourseCompleted,\n    setCompleted,\n    setPassed,\n    state.course,\n    state.player.disableScorm,\n    state.player.messages.courseCompleted,\n  ]);\n\n  function setCourseScore(score) {\n    !state.player.disableScorm && setScore(score);\n  }\n\n  function setCoursePassed() {\n    !state.player.disableScorm && setPassed();\n  }\n\n  function setCourseFailed() {\n    !state.player.disableScorm && setFailed();\n  }\n\n  function setScormReady(ready) {\n    dispatch({ type: 'SET_SCORM_READY', payload: ready });\n  }\n\n  function setDisableScorm(disable) {\n    dispatch({ type: 'SET_DISABLE_SCORM', payload: disable });\n  }\n\n  function setEditMode(editMode) {\n    dispatch({ type: 'SET_EDIT_MODE', payload: editMode });\n  }\n\n  function setLocalLanguage(l) {\n    localLanguage.current = l;\n  }\n\n  const isNavigationModeFree =\n    state?.course?.settings?.navigationMode === 'free';\n\n  // save curPage on lesson location\n  useEffect(() => {\n    try {\n      if (state.player.curPage === 1) return;\n      !state.player.disableScorm &&\n        setLessonLocation(JSON.stringify({ curPage: state.player.curPage }));\n    } catch (err) {\n      handleError(err);\n    }\n  }, [setLessonLocation, state.player.curPage, state.player.disableScorm]);\n\n  useEffect(() => {\n    if (getPagesCompleted() === state.player?.maxPage) {\n      onCourseCompleted();\n    }\n  }, [getPagesCompleted, onCourseCompleted, state.player]);\n\n  function handleError(err) {\n    console.error(err);\n    toast.error(err.message || err);\n  }\n\n  return {\n    player: state.player,\n    course: state.course,\n    tracking: state.tracking,\n    initCourseData,\n    toggleMenu,\n    goNextPage,\n    goPrevPage,\n    goPage,\n    getCurrentPage,\n    getPages,\n    getColorScheme,\n    getTracking,\n    patchTracking,\n    restoreTracking,\n    clearTracking,\n    setMessageCourseCompleted,\n    onPageStarted,\n    onPageCompleted,\n    getCoursePercentage,\n    onPageChanged,\n    setDisableScorm,\n    setScormReady,\n    setEditMode,\n    handleError,\n    setCourseScore,\n    setCoursePassed,\n    setCourseFailed,\n    isInFirstPage,\n    isInLastPage,\n    setLocalLanguage,\n    courseCompleted: isCourseCompleted(),\n    isNavigationModeFree,\n  };\n}\n\nexport default useGlobal;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport _ from 'lodash';\n\nfunction Preloader({\n  course = {},\n  curPage = 0,\n}: {\n  course?: {\n    pages?: any[];\n    baseURL?: string;\n  };\n  curPage?: number;\n}) {\n  type StackItem = {\n    pageIdx: number;\n    url: string;\n  };\n\n  const { pages = [], baseURL = '' } = course;\n  const [stack, setStack] = useState<StackItem[]>([]);\n  const limit = 5; // will load the next/prev N pages\n\n  useEffect(() => {\n    const initialStack: StackItem[] = [];\n    _.forEach(pages, (page = {}, idx) => {\n      if (page.filename)\n        initialStack.push({\n          pageIdx: idx,\n          url: `${baseURL}/${page.filename}`,\n        });\n      //   if (page.audio?.name) urls.push(`${baseURL}/${page.audio?.name}`);\n      //   if (page.facevideo?.name) urls.push(`${baseURL}/${page.facevideo?.name}`);\n      //   if (page.video?.name) urls.push(`${baseURL}/${page.video?.name}`);\n    });\n\n    if (_.isEmpty(initialStack)) return;\n\n    setStack(initialStack);\n  }, [baseURL, pages]);\n\n  const filteredStack = useMemo(\n    () =>\n      _.filter(\n        stack,\n        (s) =>\n          s.pageIdx > curPage - (limit - 1) && s.pageIdx < curPage + (limit - 1)\n      ),\n    [stack, curPage]\n  );\n\n  function handleOnMediaPreloaded(src: string) {\n    setStack(_.filter(stack, (s) => s.url !== src)); // remove from stack\n  }\n\n  function Media({ src, onLoad }: { src?: string; onLoad?: Function }) {\n    if (!src) {\n      return null;\n    }\n    return (\n      // eslint-disable-next-line\n      <img\n        src={src}\n        onLoad={() => {\n          // console.log(`Preloading ${src}: complete!`);\n          onLoad && onLoad(src);\n        }}\n      />\n    );\n  }\n\n  return (\n    <div style={{ display: 'none' }}>\n      <Media src={filteredStack[0]?.url} onLoad={handleOnMediaPreloaded} />\n    </div>\n  );\n}\n\nexport default Preloader;\n","// Todo:\n// - Melhorar efeito do PlaceholderSlide\n// - Colocar fadeIn nos componentes Video, Quiz, Minigame...\n\nimport React, { memo, useEffect } from 'react';\nimport { ToastContainer, Slide } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport _ from 'lodash';\n\nimport styles from './CoursePlayer.module.scss';\nimport Header from './Header/Header';\nimport NavFooter from './NavFooter/NavFooter';\nimport Main from './Main/Main';\nimport Menu from './Menu/Menu';\nimport OutsideAlerter from './UI/OutsiderAlerter/OutsiderAlerter';\nimport { isViewportMobile } from './utils/utils';\nimport useGlobal from './hooks/useGlobal';\nimport useScorm from './hooks/useScorm';\nimport usePrevious from './hooks/usePrevious';\nimport Spinner from './UI/Spinner/Spinner';\nimport Preloader from './Preloader/Preloader';\nimport LabelProvider from './context/Label/LabelContext';\nimport { labels, config } from './constants/labels.json';\nimport UIProvider from './context/UI/UIContext';\n\nfunction CoursePlayer(props) {\n  const {\n    course,\n    onPageChanged,\n    curPage,\n    disableScorm,\n    editMode = false,\n    customLabels,\n    onLoad,\n  } = props;\n  const globalState = useGlobal();\n  const {\n    player,\n    toggleMenu,\n    initCourseData,\n    getCurrentPage,\n    goPage,\n    setScormReady,\n    setDisableScorm,\n    restoreTracking,\n    handleError,\n    setMessageCourseCompleted,\n    setEditMode,\n  } = globalState;\n  const currentPage = getCurrentPage();\n  const prevCurrentPage = usePrevious(currentPage);\n  const { initializeScormAsync, getSuspendData } = useScorm();\n\n  useEffect(() => {\n    // edit mode\n    setEditMode(!!editMode);\n\n    // on load\n    onLoad && onLoad({ labels, languages: config.languages });\n\n    // disable scorm coming from props\n    if (disableScorm) {\n      setDisableScorm(true);\n      return;\n    }\n\n    doInitializeScorm();\n\n    async function doInitializeScorm() {\n      try {\n        // initialize SCORM\n        const scormData = await initializeScormAsync();\n        console.log('Scorm initialized successfully:', scormData);\n\n        if (!_.isEmpty(scormData.suspendData))\n          restoreTracking(getSuspendData(scormData.suspendData));\n        setScormReady(true);\n\n        if (!_.isEmpty(scormData.lessonLocation)) {\n          const lastVisitedPage = JSON.parse(scormData.lessonLocation)?.curPage;\n          if (lastVisitedPage > 1) {\n            if (window.confirm('Return to the last visited page?')) {\n              goPage(lastVisitedPage);\n            }\n          }\n        }\n      } catch (err) {\n        handleError(err);\n        setDisableScorm(true);\n      }\n    }\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    initCourseData(course);\n  }, [course]); //eslint-disable-line\n\n  useEffect(() => {\n    // avoid first time calling\n    if (\n      !currentPage ||\n      !prevCurrentPage ||\n      currentPage.resourceId === prevCurrentPage.resourceId\n    ) {\n      if (currentPage?.facevideo && !player?.showMenu) toggleMenu();\n      return;\n    }\n\n    onPageChanged && onPageChanged(currentPage);\n    globalState.onPageChanged(currentPage);\n  }, [currentPage]); //eslint-disable-line\n\n  useEffect(() => {\n    !isNaN(curPage) && goPage(curPage);\n  }, [curPage]); //eslint-disable-line\n\n  function handleClickOutside() {\n    isViewportMobile() && player?.showMenu && toggleMenu();\n  }\n\n  function renderMenu() {\n    const className = [styles.CoursePlayer__menu];\n\n    !player?.showMenu && className.push(styles['CoursePlayer__menu--hidden']);\n\n    return (\n      <OutsideAlerter onClickOutside={handleClickOutside}>\n        <div className={className.join(' ')}>\n          <Menu globalState={globalState} />\n        </div>\n      </OutsideAlerter>\n    );\n  }\n\n  function handleLanguageChanged(language) {\n    setMessageCourseCompleted(_.get(labels, `Course-completed.${language}`));\n  }\n\n  const canRenderCourse =\n    !!course && (player.scormReady || player.disableScorm);\n\n  if (!canRenderCourse) return <Spinner />;\n\n  return (\n    <LabelProvider\n      labels={labels}\n      language={course?.language}\n      languages={config.languages}\n      customLabels={customLabels}\n      onLanguageChanged={handleLanguageChanged}\n    >\n      <UIProvider>\n        <div className={styles.CoursePlayer}>\n          <ToastContainer transition={Slide} />\n          {!editMode && (\n            <Preloader course={course} curPage={globalState?.player?.curPage} />\n          )}\n          {renderMenu()}\n          <div className={styles.CoursePlayer__main}>\n            <Header globalState={globalState} />\n            <Main globalState={globalState} />\n            <NavFooter globalState={globalState} />\n          </div>\n        </div>\n      </UIProvider>\n    </LabelProvider>\n  );\n}\n\nexport default memo(CoursePlayer);\n","import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nimport './App.css';\nimport CoursePlayer from './components/CoursePlayer/CoursePlayer';\nimport Spinner from './components/CoursePlayer/UI/Spinner/Spinner';\n\nfunction App() {\n  const [course, setCourse] = useState({});\n  const [isFetching, setIsFetching] = useState(true);\n\n  useEffect(() => {\n    async function fetchCourse() {\n      const res = await axios.get(`data/course.json`);\n      if (!res.data) return;\n      setCourse(res.data);\n      setIsFetching(false);\n    }\n    fetchCourse();\n  }, []);\n\n  if (isFetching) return <Spinner />;\n\n  return (\n    <div className=\"App\">\n      <CoursePlayer\n        course={course}\n        // @ts-ignore\n        customLabels={course?.customLabels}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Quiz\":\"Quiz_Quiz__3h5C1\",\"fadein\":\"Quiz_fadein__1VAs2\",\"Quiz__question\":\"Quiz_Quiz__question__36IOl\",\"Quiz__footer\":\"Quiz_Quiz__footer__3eU0O\",\"Quiz__intro\":\"Quiz_Quiz__intro__3yvg7\",\"Quiz__question__component\":\"Quiz_Quiz__question__component__TL9kd\",\"Quiz__result\":\"Quiz_Quiz__result__O0rY_\",\"Quiz__result__detail\":\"Quiz_Quiz__result__detail__q0UTY\",\"Quiz__result__passingScore\":\"Quiz_Quiz__result__passingScore__1j4RS\",\"Quiz__result__passingScore__passed\":\"Quiz_Quiz__result__passingScore__passed__3Kn8n\",\"Quiz__result__passingScore__failed\":\"Quiz_Quiz__result__passingScore__failed__F3WoJ\",\"Quiz__result__passingScore__icon\":\"Quiz_Quiz__result__passingScore__icon__334m_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropzone\":\"DroppableArea_dropzone__3tbTU\",\"dropzone_source\":\"DroppableArea_dropzone_source__1g43N\",\"dropzone_destination\":\"DroppableArea_dropzone_destination__1djXe\",\"dropzoneIsDragging\":\"DroppableArea_dropzoneIsDragging__Il8Wx\",\"droppableTextWrapper\":\"DroppableArea_droppableTextWrapper__12QQW\",\"droppableTextWrapperWithArrow\":\"DroppableArea_droppableTextWrapperWithArrow__3zOpZ\",\"droppableTextWrapperNoLeftBorder\":\"DroppableArea_droppableTextWrapperNoLeftBorder__1EmKe\",\"droppableTextWrapperCorrect\":\"DroppableArea_droppableTextWrapperCorrect__2L7ej\",\"droppableTextWrapperIncorrect\":\"DroppableArea_droppableTextWrapperIncorrect__1SoXq\",\"text\":\"DroppableArea_text__1e_by\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NavFooter\":\"NavFooter_NavFooter__3GVcV\",\"NavFooter__audio\":\"NavFooter_NavFooter__audio__2HkBE\",\"NavFooter__navbuttons\":\"NavFooter_NavFooter__navbuttons__3-0Cp\",\"NavFooter__progress\":\"NavFooter_NavFooter__progress__je6gd\",\"NavFooter__button__blink\":\"NavFooter_NavFooter__button__blink__LCb_U\",\"blinker\":\"NavFooter_blinker__1ry03\",\"tooltip\":\"NavFooter_tooltip__1Jsny\",\"NavFooter__button\":\"NavFooter_NavFooter__button__2ljZ1\",\"NavFooter__nextButton\":\"NavFooter_NavFooter__nextButton__G-TuU\",\"fadein\":\"NavFooter_fadein__M8wKC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"itemWrapper\":\"DraggableItem_itemWrapper__2wj9b\",\"item\":\"DraggableItem_item__1V8gy\",\"itemWithArrow\":\"DraggableItem_itemWithArrow__32fDl\",\"itemIsDragging\":\"DraggableItem_itemIsDragging__3aumZ\",\"itemIsDraggingOver\":\"DraggableItem_itemIsDraggingOver__3VPe7\",\"fadeOut\":\"DraggableItem_fadeOut__OVjvM\",\"itemIsCorrect\":\"DraggableItem_itemIsCorrect__1d74c\",\"itemIsIncorrect\":\"DraggableItem_itemIsIncorrect__2Rla3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MenuItem\":\"MenuItem_MenuItem__2N2R8\",\"MenuItem--active\":\"MenuItem_MenuItem--active__1iOq6\",\"MenuItem--disabled\":\"MenuItem_MenuItem--disabled__1zkbU\",\"MenuItem__icon\":\"MenuItem_MenuItem__icon__24hxa\",\"MenuItem__label\":\"MenuItem_MenuItem__label__96UD8\",\"MenuItem__completed\":\"MenuItem_MenuItem__completed__1WP4d\",\"fadein\":\"MenuItem_fadein__4u1Fv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__1YEIK\",\"Header__left\":\"Header_Header__left__3fv2Q\",\"Header__icon\":\"Header_Header__icon__2NMs7\",\"Header__title\":\"Header_Header__title__3aHIg\",\"Header__right\":\"Header_Header__right__uNrRT\",\"Header__logo\":\"Header_Header__logo__S1epo\",\"fadein\":\"Header_fadein__R0Fzr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Feedback\":\"Feedback_Feedback__1T3jc\",\"Feedback__type\":\"Feedback_Feedback__type__1c9JE\",\"Feedback__icon\":\"Feedback_Feedback__icon__1Wjgk\",\"Feedback__text\":\"Feedback_Feedback__text__2nC5p\",\"--correct\":\"Feedback_--correct__Idjfg\",\"--incorrect\":\"Feedback_--incorrect__4Z9Hc\",\"fadein\":\"Feedback_fadein__KLcuo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Question__counter\":\"Question_Question__counter__1pUji\",\"Question__question\":\"Question_Question__question__1YDEF\",\"Question__feedback\":\"Question_Question__feedback__VGhke\",\"Question__image\":\"Question_Question__image__1lsXS\",\"fadein\":\"Question_fadein__1YLg3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Sentence\":\"Sentence_Sentence__2OSu-\",\"correct\":\"Sentence_correct__2FUeU\",\"incorrect\":\"Sentence_incorrect__BJkU8\",\"preview\":\"Sentence_preview__2bGIY\",\"correctAnswer\":\"Sentence_correctAnswer__Kpby7\",\"fadein\":\"Sentence_fadein__1ABnP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CoursePlayer\":\"CoursePlayer_CoursePlayer__1HZRm\",\"CoursePlayer__main\":\"CoursePlayer_CoursePlayer__main__2Ul0S\",\"CoursePlayer__menu\":\"CoursePlayer_CoursePlayer__menu__2exwD\",\"CoursePlayer__menu--hidden\":\"CoursePlayer_CoursePlayer__menu--hidden__3WKds\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Progress__bar__bg\":\"Progress_Progress__bar__bg__3rtvA\",\"Progress__bar__fg\":\"Progress_Progress__bar__fg__1o1Cu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2WGph\",\"--primary\":\"Button_--primary__M6eN9\",\"--secondary\":\"Button_--secondary__38OM-\",\"--disabled\":\"Button_--disabled__1IuPa\",\"fadein\":\"Button_fadein__23IBf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ContainerPage\":\"ContainerPage_ContainerPage__1eGBx\",\"ContainerPage__container\":\"ContainerPage_ContainerPage__container__Wx-8P\",\"ContainerPage__title\":\"ContainerPage_ContainerPage__title__M0QLO\",\"ContainerPage__body\":\"ContainerPage_ContainerPage__body__3Pb6d\",\"fadein\":\"ContainerPage_fadein__D91Ps\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Radio\":\"Radio_Radio__25Rvm\",\"--correct\":\"Radio_--correct__29LZx\",\"--incorrect\":\"Radio_--incorrect__3HPyr\",\"--showAnswer\":\"Radio_--showAnswer__2BgFc\",\"fadein\":\"Radio_fadein__2e5gF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Essay\":\"Essay_Essay__10viV\",\"Essay__correct\":\"Essay_Essay__correct__3AxI7\",\"Essay__incorrect\":\"Essay_Essay__incorrect__2pJ1n\",\"acceptableResponses\":\"Essay_acceptableResponses__34RAY\",\"fadein\":\"Essay_fadein__-a5sJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Menu\":\"Menu_Menu__3vsmE\",\"Menu__title\":\"Menu_Menu__title__1UtAL\",\"Menu__list\":\"Menu_Menu__list__1b-mV\",\"Menu__bottom\":\"Menu_Menu__bottom__1GP7v\",\"fadein\":\"Menu_fadein__5qh7r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Label__highlighted\":\"Label_Label__highlighted__RL4cn\",\"Label__highlighted__tracked\":\"Label_Label__highlighted__tracked__OYARI\",\"Label__highlighted__tracked__in__context\":\"Label_Label__highlighted__tracked__in__context__1bmIr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Icon__clickable\":\"Icon_Icon__clickable__2w_N_\",\"fadein\":\"Icon_fadein__3dhz-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PlaceholderSlide\":\"PlaceholderSlide_PlaceholderSlide__XDr7m\",\"fadein\":\"PlaceholderSlide_fadein__3Aq30\",\"PlaceholderSlide__activity\":\"PlaceholderSlide_PlaceholderSlide__activity__3Mkpk\",\"loading\":\"PlaceholderSlide_loading__1CcYS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MultipleChoice\":\"MultipleChoice_MultipleChoice__5FOnW\",\"MultipleChoice__radio\":\"MultipleChoice_MultipleChoice__radio__B-6Tp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"left\":\"Matching_left__24Cvi\",\"right\":\"Matching_right__3d1j8\"};"],"sourceRoot":""}